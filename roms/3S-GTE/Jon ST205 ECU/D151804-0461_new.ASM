

;
; ษอออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออป
; บ	This file is generated by The Interactive Disassembler (IDA)	    บ
; บ	Copyright (c) 2006 by DataRescue sa/nv,	<ida@datarescue.com>	    บ
; บ			 Licensed to: Freeware version			    บ
; ศอออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออผ
;
; Disassembly labels and comments are copyright	2014, Jon Sole


; ; Processor:	      D8X
; ; Target assembler: Table Driven Assembler (TASM) by Speech Technology Inc.

; อออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออ

				.locallabelchar "."

; Segment type:	Pure data
				;.segment FSR
DDRA:				.block 1			; DATA XREF: ROM:C615w
								; sub_C57A+1B6w
								; Port A i/o config
DDRB:				.block 1			; Port B i/o config
WDC:				.block 1			; watch	dog timer
TIMER3:				.block 1			; DATA XREF: ROM:C5F2r
								; sub_C57A+1E2r ...
								; Timer	LSB (bit0~bit2)
TIMER:				.block 1			; DATA XREF: sub_C57A+2FAr
								; sub_D32F+Ar ...
								; Timer	MSB (bit11~bit18)
TIMERL:				.block 1			; Timer	LSB (bit3~bit10)
SIDR_SODR:			.block 1			; DATA XREF: ROM:C631r
								; ROM:C637r ...
								; Serial Input/Output Data Register
SMRC_SIR:			.block 1			; DATA XREF: ROM:C602r
								; sub_C57A+1BDr ...
								; Serial Master	Register Control
CPR0:				.block 1			; DATA XREF: sub_C57A+2FCw
								; iv6_ne_process+7Ar ...
								; Timer	comparison #0 MSB
CPR0L:				.block 1			; Timer	comparison #0 LSB
CPR1:				.block 1			; DATA XREF: sub_D32F+Cw
								; Timer	comparison #1 MSB
CPR1L:				.block 1			; Timer	comparison #1 LSB
CPR2:				.block 1			; Timer	comparison #2 MSB
CPR2L:				.block 1			; Timer	comparison #2 LSB
CPR3:				.block 1			; Timer	comparison #3 MSB
CPR3L:				.block 1			; Timer	comparison #3 LSB
ASR0P:				.block 1			; DATA XREF: ROM:C5E6r
								; sub_C57A+1EEr
								; ASR0 pos edge	counter	value MSB
ASR0PL:				.block 1			; DATA XREF: ROM:C617r
								; sub_C57A+1EBr
								; ASR0 pos edge	counter	value LSB
ASR0N:				.block 1			; DATA XREF: ROM:C5EFr
								; sub_C57A+1E0w ...
								; ASR0 neg edge	counter	value MSB
ASR0NL:				.block 1			; DATA XREF: ROM:C5ECr
								; sub_C57A+1F4r
								; ASR0 neg edge	counter	value LSB
ASR1P:				.block 1			; DATA XREF: ROM:C5FFr
								; sub_C57A+1F1r
								; ASR1 pos edge	counter	value MSB
ASR1PL:				.block 1			; ASR1 pos edge	counter	value LSB
ASR1N:				.block 1			; ASR1 neg edge	counter	value MSB
ASR1NL:				.block 1			; ASR1 neg edge	counter	value LSB
ASR2:				.block 1			; DATA XREF: ROM:C5F8w
								; sub_C57A+1FDw ...
								; ASR2 edge counter value MSB
ASR2L:				.block 1			; ASR2 edge counter value LSB
ASR3:				.block 1			; DATA XREF: ROM:C5FDw
								; sub_C57A+202w ...
								; ASR3 edge counter value MSB
ASR3L:				.block 1			; ASR3 edge counter value LSB
unk_1C:				.block 1			; DATA XREF: IV0+29r
unk_1D:				.block 1			; DATA XREF: ROM:C5E9r
								; sub_C57A+1F7r
				.block 1
OMODE:				.block 1			; DATA XREF: ROM:reset_vectorr
								; Mode control Register
PORTA:				.block 1			; DATA XREF: ROM:C605r
								; sub_C57A+994r ...
								; PORTA.0 - Reset watchdog, toggles every 4ms
								; PORTA.1 - Starter signal, high when starter running
								; PORTA.2 - Idle contact, low when throttle closed
								; PORTA.3 -
								; PORTA.4 -
								; PORTA.5 - STP	signal,	high when 12v at pin
								; PORTA.6 - G1 signal
								; PORTA.7 - G2 signal
PORTAL:				.block 1			; DATA XREF: ROM:C608w
								; sub_C57A+306w
								; Port A Latch
PORTB:				.block 1			; DATA XREF: ROM:C60Ar
								; sub_E094:loc_E0E2r ...
								; PORTB.0 - Some signal	to knock MCU
								; PORTB.1 - Cylinder 1 signal to knock MCU
								; PORTB.2 -
								; PORTB.3 - Knock input	LSB
								; PORTB.4 - Knock input
								; PORTB.5 - Knock input	MSB
								; PORTB.6 - TE1	(active	low)
								; PORTB.7 - TE2	(active	low)
								;
PBCS:				.block 1			; DATA XREF: ROM:C60Dw
								; sub_C57A+1B1w ...
								; Port B Control Register
TAIT:				.block 1			; DATA XREF: ROM:C61Ar
								; ROM:C623r ...
								; TAIT.4 - Set for ASR2	to capture rising edge,	clear for ASR2 to capure falling edge
								; TAIT.5 - Set for ASR3	to capture rising edge,	clear for ASR3 to capure falling edge
LDOUT:				.block 1			; DATA XREF: injector_drive+Br
								; int_vector_9_ignition+4r
								; Latch	DOUT
DOUT:				.block 1			; DATA XREF: ROM:C627r
								; sub_E094+42r	...
								; DOUT Data Register
								; DOUT.0 - Ignition IGT	(o/p)
								; DOUT.1 - ISCV
								; DOUT.2 - Knock MCU reset???
								; DOUT.3
								; DOUT.4 - Injector #10	(o/p)
								; DOUT.5 - Injector #20	(o/p)
								; DOUT.6 - Injector #30	(o/p)
								; DOUT.7 - Injector #40	(o/p)
DOM:				.block 1			; DATA XREF: ROM:C62Ar
								; sub_C57A+1C0r ...
								; DOUT Control Register
PORTC:				.block 1			; DATA XREF: check_io_inputs:loc_FAD3r
								; check_io_inputs:loc_FAD8r ...
								; PORTC.0 -
								; PORTC.1 -
								; PORTC.2 - PS/IDUP signal, low	when 0V	at pin
								; PORTC.3 -
								; PORTC.4 -
								; PORTC.5 -
								; PORTC.6 -
								; PORTC.7 -
PORTD_ASRIN:			.block 1			; DATA XREF: ROM:C60Fr
								; ROM:C61Dr ...
								; Port D Data Register / ASR Input Data
								; PORTD.0 - Air-con idle up VSV	control
								; PORTD.1 - Malfunction	indicator lamp (0 = LED	on)
								; PORTD.2 - ELS	pin, high when 12v at pin
								; PORTD.3 - ECO	pin, high when 12v at pin
								; PORTD.4
								; PORTD.5
								; PORTD.6
								; PORTD.7
RAMST:				.block 1			; DATA XREF: sub_C57A+215r
								; sub_C57A:loc_C7A8r ...
								; Built-in RAM status
SSD:				.block 1			; DATA XREF: ROM:C62Fr
								; ROM:F98Br ...
								; Serial Status	Data Register
IRQL:				.block 1			; DATA XREF: ROM:C63Cw
								; sub_C57A+16Dw ...
								; Interrupt Request Flag MSB
IRQLL:				.block 1			; DATA XREF: sub_C57A:loc_C799r
								; ROM:loc_DEC1r ...
								; Interrupt Request Flag LSB
IMASK:				.block 1			; DATA XREF: ROM:C63Ew
								; sub_C57A+172w ...
								; Interrupt Request Mask MSB
IMASKL:				.block 1			; DATA XREF: sub_C57A+1C4r
								; Interrupt Request Mask LSB
				.block 1
				.block 1
				.block 1
				.block 1
UNK34:				.block 1			; DATA XREF: int_vector_4_kph:loc_F94Dr
				.block 1
				.block 1
				.block 1
CPR4:				.block 1			; Timer	comparison #0 MSB
CPR4L:				.block 1			; Timer	comparison #0 LSB
CPR5:				.block 1			; Timer	comparison #1 MSB
CPR5L:				.block 1			; Timer	comparison #1 LSB
CPR6:				.block 1			; Timer	comparison #2 MSB
CPR6L:				.block 1			; Timer	comparison #2 LSB
CPR7:				.block 1			; Timer	comparison #3 MSB
CPR7L:				.block 1			; Timer	comparison #3 LSB
; end of 'FSR'

; อออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออ

; Segment type:	Pure data
				;.segment RAM
				.org 40h
unk_40:				.block 1			; DATA XREF: sub_C57A+CDo
								; sub_C57A+207r ...
								; 40.0 -
								; 40.1 - Startup injection pulse done
								; 40.2 -
								; 40.3 - Transient throttle injection
								; 40.4 -
								; 40.5 - Set when RPM <	300, cleared when RPM >	500rpm
								; 40.6 -
								; 40.7 -
unk_41:				.block 1			; DATA XREF: sub_C57A+F5r
								; sub_C57A+2D6r ...
var_flags_42:			.block 1			; DATA XREF: sub_C57A:loc_C6F8r
								; sub_C57A+61Er ...
								; 42.0 - Trim valid flag, set when valid
								; 42.1 - ADC flag, set when using ADC table, cleared when scanning sequentially.
								; 42.2 - Cleared in 4ms	watchdog interrupt to schedule 4ms background code
								; 42.3 - Cleared in NE interrupt to schedule NE	triggered background code.
								; 42.4 -
								; 42.5 -
								; 42.6 -
								; 42.7 - Set at	end of 4ms process, cleared in ADC code
var_limiter_flags:		.block 1			; DATA XREF: sub_C57A+487r
								; sub_C57A:loc_CA26r ...
								; 43.1 - ** related to var_cnt_EB **
								; 43.3 - Set if	speed limiter active
								; 43.4 - Set if	4 IGF pulses missing
								; 43.5 - Set if	throttle shut
								; 43.6 - Set if	rev limit active
								; 43.7 - Set if	boost limit exceeded
unk_44:				.block 1			; DATA XREF: sub_C57A+3C0r
								; sub_C57A+4AFr ...
var_ignition_flags:		.block 1			; DATA XREF: iv6_ne_process+51r
								; iv6_ne_process+7Er ...
var_flags_46:			.block 1			; DATA XREF: sub_C57A+204r
								; sub_C57A:loc_C931r ...
								; 46.0 - Set when RPM<200rpm, cleared when RPM>400rpm
								; 46.1 - Set when closed loop mode allowed
								; 46.2 - Cleared when throttle open, set when closed for certain period
								; 46.3 - Some TPS flag
								; 46.4 - Set if	diagnostic error code
								; 46.5 - Knock sensor error
								; 46.6 -
								; 46.7 - Set on	sub-CPU	error
								;
unk_47:				.block 1			; DATA XREF: sub_C977+3r
								; sub_E4C5+1Br	...
var_diag_errors_5:		.block 1			; DATA XREF: check_knock_sensor_err_flagr
								; sub_C8F4+12r	...
								; 48.0 - Knock signal error
								; 48.1 -
								; 48.2 -
								; 48.3 - Sensor	error
								; 48.4 - Knock management error
								; 48.5 - Air-con switch	signal
								; 48.6 -
								; 48.7 -
								;
var_io_input1:			.block 1			; DATA XREF: sub_C57A:loc_C714r
								; sub_C57A+19Dr ...
								; 49.0 - Set if	STA signal high	(starter running)
								; 49.1 - Set if	IDL signal low (throttle closed)
								; 49.2 -
								; 49.3 -
								; 49.4 - Set if	STP signal high
								; 49.5 - Set if	TE1 signal low (diagnostic check)
								; 49.6 - Set if	TE2 signal low (OBD stream enabled)
								; 49.7 - Set if	ELS signal high
var_io_input2:			.block 1			; DATA XREF: sub_C57A+D1Er
								; sub_C57A+D2Er ...
								; 4A.0 - Set if	ECO signal high
								; 4A.1 -
								; 4A.2 -
								; 4A.3 - PS/IDUP
								; 4A.4 -
								; 4A.5 -
								; 4A.6 -
								; 4A.7 -
var_error_flags1:		.block 1			; DATA XREF: clear_nv_ram+Bw
								; sub_C57A+5D8r ...
								; 4B.0 - STA signal error?
								; 4B.1 - G1 or G2 signal error
								; 4B.2 - Too many IGF signals not received error
								; 4B.3 - ECT sensor error
								; 4B.4 - THA sensor error
								; 4B.5 - PIM sensor error
								; 4B.6 - SPD sensor error
								; 4B.7 -
var_error_flags2:		.block 1			; DATA XREF: clear_nv_ram+Dw
								; sub_C57A+935r ...
								; 4C.0 - Knock sensor error
								; 4C.1 - TPS error
								; 4C.2 -
								; 4C.3 - TRAC TPS error
								; 4C.4 - THAM sensor error
								; 4C.5 - O2 sensor heater error
								; 4C.6 -
								; 4C.7 -
								;
var_flags_4D:			.block 1			; DATA XREF: sub_C57A+817r
								; sub_C57A+97Br ...
								; 4D.0 -
								; 4D.1 -
								; 4D.2 -
								; 4D.3 - Using default PIM value
								; 4D.4 - Set on	too many IGF missing error
								; 4D.5 -
								; 4D.6 -
								; 4D.7 - Starter running during	ignition
var_flags_4E:			.block 1			; DATA XREF: sub_C57A+441w
								; sub_C57A+471r ...
								; 4E.0 -
								; 4E.1 - Set when closed loop mode
								; 4E.2 - ECT greater than 75c
								; 4E.3 -
								; 4E.4 -
								; 4E.5 -
								; 4E.6 -
								; 4E.7 - Boost limit exceeded error
var_flags_4F:			.block 1			; DATA XREF: sub_C57A+92Aw
								; sub_C57A+980r ...
								; 4F.0 - Set if	STA high
								; 4F.1 - Set if	ECO high
								; 4F.2 -
								; 4F.3 - Set if	ELS high
								; 4F.4 -
								; 4F.5 - Set if	diagnostic mode
								; 4F.6 -
								; 4F.7
var_pim2:			.block 1			; DATA XREF: sub_C57A+5EBr
								; check_boost_limit:loc_CC8Fr ...
								; (ADC - 10560)	* 1.285156
				.block 1
var_tps:			.block 1			; DATA XREF: async_throttle_inject+Fr
								; sub_C57A+812r ...
				.block 1
var_tha:			.block 1			; DATA XREF: injector_cold_start:loc_CCFCr
								; sub_D463+Fr ...
var_tham:			.block 1			; DATA XREF: sub_E094+22Dr
								; ROM:FDEBw
var_adc_battery:		.block 1			; DATA XREF: sub_C57A+752r
								; sub_C57A+B17r ...
var_ect:			.block 1			; DATA XREF: table_ect_pair_interpolater
								; table_ect_fixed4_interpolater ...
				.block 1
var_rpm_x_5p12:			.block 1			; DATA XREF: table_rA_pair_interpolate:table_rpm_pair_interpolater
								; sub_C57A:loc_C891w ...
				.block 1
var_rpm_div_25:			.block 1			; DATA XREF: sub_C57A+31Cw
								; sub_C57A:loc_C917r ...
unk_5C:				.block 1			; DATA XREF: sub_C8F4+18w
								; sub_C57A+508r ...
var_speed_kph:			.block 1			; DATA XREF: sub_C57A+4A2r
								; sub_C57A+4BAr ...
var_tps_delta:			.block 1			; DATA XREF: async_throttle_injectr
								; sub_CDE8r ...
var_adc_lambda:			.block 1			; DATA XREF: sub_C57A+92Cr
								; sub_C57A+98Br ...
unk_60:				.block 1			; DATA XREF: sub_C57A+109r
								; sub_C57A+359r ...
unk_61:				.block 1			; DATA XREF: sub_C57A+BADw
								; sub_D133r ...
unk_62:				.block 1			; DATA XREF: sub_C57A:loc_CFD2r
								; sub_C57A+A7Dw ...
				.block 1
unk_64:				.block 1			; DATA XREF: sub_C57A+B40r
								; sub_C57A+B46r ...
				.block 1
				.block 1
var_unk_trim_67:		.block 1			; DATA XREF: sub_C57A+AF2r
								; sub_C57A:loc_D119r
unk_68:				.block 1			; DATA XREF: sub_C57A+622w
								; sub_C57A+62Br ...
unk_69:				.block 1			; DATA XREF: sub_C57A+AF6w
								; sub_C57A:loc_D0B4r ...
unk_6A:				.block 1			; DATA XREF: sub_C57A:loc_D8E2w
								; ROM:DAD6r
unk_6B:				.block 1			; DATA XREF: sub_C57A+107w
								; sub_C57A:loc_D1D6r ...
unk_6C:				.block 1			; DATA XREF: sub_C57A:loc_D23Br
								; sub_C57A+CC3w ...
unk_6D:				.block 1			; DATA XREF: ROM:DEDBr
								; ROM:DEDFw ...
unk_6E:				.block 1			; DATA XREF: check_set_speed_limiter+6r
								; check_set_speed_limiter:loc_CC6Fw
var_kph_table:			.block 1			; DATA XREF: int_vector_4_kph+20r
								; int_vector_4_kph+25w	...
				.block 1
var_kph_71:			.block 1			; DATA XREF: int_vector_4_kph+14r
								; int_vector_4_kph+1Br	...
				.block 1
var_speed_kph_2:		.block 1			; DATA XREF: calc_speed_kph+15w
unk_74:				.block 1			; DATA XREF: sub_C57A+2EBw
								; sub_C57A+365r ...
				.block 1
unk_76:				.block 1			; DATA XREF: start_dma:loc_F825r
								; IV0+4r ...
unk_77:				.block 1			; DATA XREF: start_dma+65r
								; start_dma:loc_F861w ...
var_temp_w:			.block 1			; DATA XREF: map_rD_rX_interpolate+3w
								; map_rD_rX_interpolate+1Ar ...
unk_79:				.block 1			; DATA XREF: sub_C57A+63Dr
								; sub_C57A:loc_CC14r ...
var_temp_7A:			.block 1			; DATA XREF: map_rD_rX_interpolate+14w
								; map_rD_rX_interpolate+16r ...
var_temp_7B:			.block 1			; DATA XREF: map_rD_rX_interpolate+27w
								; sub_C57A:loc_CF75w ...
unk_7C:				.block 1			; DATA XREF: sub_E7D9+178w
								; sub_E996+248w
serial_diag_address:		.block 2
serial_diag_mode:		.block 1			; DATA XREF: sub_C57A+D1o
nv_diag_errors_1:		.block 2			; DATA XREF: sub_C57A:loc_C7C6o
								; clear_nv_ram+5o ...
								; 80.0 - RPM G1	or G2 signal
								; 80.1 - RPM NE	signal
								; 80.2 - IGT or	IGF signal
								; 80.3 - Coolant temperature sensor
								; 80.4 - Intake	air temperature	sensor
								; 80.5 - Turbo pressure	sensor
								; 80.6 - Speed sensor signal
								; 80.7 - RPM G1	or G2 signal
								;
nv_diag_errors_2:		.block 2			; DATA XREF: ROM:DD6Er
								; ROM:DEF7o ...
								; 82.0 - Knock signal
								; 82.1 - Primary throttle position sensor
								; 82.2 - O2 Sensor
								; 82.3 - Secondary throttle position
								; 82.4 - Manifold air temperature sensor
								; 82.5 - O2 Sensor
								; 82.6 - Lean error
								; 82.7 - Chargecooler pump/level
								;
nv_diag_errors_3:		.block 2			; DATA XREF: ROM:DD56r
								; ROM:DF16r ...
								; 84.0 - Boost pressure
								; 84.1 -
								; 84.2 -
								; 84.3 -
								; 84.4 -
								; 84.5 -
								; 84.6 -
								; 84.7 -
nv_unk_trim_86:			.block 2			; DATA XREF: clear_nv_ram+22o
								; sub_C57A:loc_D010t ...
word_88:			.block 2			; DATA XREF: sub_D14D+29o
				.block 1
				.block 1
				.block 1
				.block 1
				.block 1
				.block 1
				.block 1
				.block 1
				.block 1
				.block 1
nv_unk_trim_94:			.block 1			; DATA XREF: clear_nv_ram+26o
								; sub_C57A+B6Bo
nv_unk_trim_95:			.block 1			; DATA XREF: sub_C57A+AA6o
nv_unk_trim_96:			.block 1			; DATA XREF: clear_nv_ram+2Ew
								; sub_C57A+CCDr ...
nv_unk_trim_97:			.block 1
nv_unk_trim_98:			.block 2			; DATA XREF: clear_nv_ram:loc_C821w
								; sub_C57A+1E03r ...
var_nv_idle_trim:		.block 2			; DATA XREF: sub_C57A+166r
								; clear_nv_ram+3Ew ...
var_nv_valid:			.block 2			; DATA XREF: sub_C57A+238r
								; clear_nv_ramw ...
unk_9E:				.block 1			; DATA XREF: sub_C57A:loc_C7C9o
								; clear_nv_ram+43r ...
unk_9F:				.block 1			; DATA XREF: clear_nv_ram+4Aw
								; sub_C57A+1DCBr ...
var_diag_errors_4:		.block 1			; DATA XREF: sub_C57A+D6o
								; sub_C57A+1A2r ...
unk_A1:				.block 1			; DATA XREF: sub_E996+37Er
								; ROM:EF2Ar ...
unk_A2:				.block 1			; DATA XREF: sub_DCAC:loc_DCB1r
								; ROM:ED47r ...
unk_A3:				.block 1			; DATA XREF: sub_E996+4Aw
								; sub_E996+6Fw	...
unk_A4:				.block 1			; DATA XREF: iv6_ne_process+61w
								; iv6_ne_process+68r ...
				.block 1
unk_A6:				.block 1			; DATA XREF: sub_C57A+13Cw
								; sub_E996+444r ...
unk_A7:				.block 1			; DATA XREF: sub_F3E9+4Fr
								; sub_F3E9+54w	...
unk_A8:				.block 1			; DATA XREF: ROM:DF61r
								; ROM:loc_DF74w ...
unk_A9:				.block 1			; DATA XREF: sub_C57A+14Ew
								; ROM:loc_DF56r ...
unk_AA:				.block 1			; DATA XREF: sub_C57A+10Cr
								; sub_E7D9+25r	...
unk_AB:				.block 1			; DATA XREF: iv6_4ms_process+9r
								; iv6_4ms_process:loc_F795w
unk_AC:				.block 1			; DATA XREF: iv6_4ms_process:loc_F763w
								; iv6_4ms_process:loc_F777w ...
unk_AD:				.block 1			; DATA XREF: sub_C57A:loc_C729w
								; ROM:loc_F9B1r
unk_AE:				.block 1			; DATA XREF: sub_EFA8+7r
								; sub_EFA8+19w
unk_AF:				.block 1			; DATA XREF: sub_C57A+446w
								; sub_C57A+457r ...
				.block 1
var_4ms_cnt_B1:			.block 1			; DATA XREF: sub_C57A+E6r
								; sub_C57A:loc_C966r ...
unk_B2:				.block 1			; DATA XREF: iv6_4ms_process+6Dr
								; iv6_4ms_process+72w
var_4ms_cnt_B3:			.block 1			; DATA XREF: sub_C57A+FCr
								; int_vector_4_kph+Fr ...
unk_B4:				.block 1			; DATA XREF: sub_C57A+13B2r
								; sub_C57A:loc_D934w
unk_B5:				.block 1			; DATA XREF: sub_C57A:loc_D9ACr
								; sub_C57A:loc_D9B3w
var_4ms_cnt_starter:		.block 1			; DATA XREF: sub_C57A+745w
								; sub_C57A+757r ...
unk_B7:				.block 1			; DATA XREF: sub_C57A+930w
								; sub_C57A+93Br
var_4ms_boost_cnt:		.block 1			; DATA XREF: check_boost_limit+11w
								; check_boost_limit+1Br
unk_B9:				.block 1			; DATA XREF: sub_E996+E5w
								; sub_E996+F1r
unk_BA:				.block 1			; DATA XREF: sub_C57A+227w
								; ROM:DEC7r ...
unk_BB:				.block 1			; DATA XREF: sub_C57A+219w
								; ROM:DEB7r
unk_BC:				.block 1			; DATA XREF: sub_C57A+22Cw
								; ROM:DECFr ...
unk_BD:				.block 1			; DATA XREF: int_vector_9_ignition+4Bw
								; int_vector_9_ignition+55r
unk_BE:				.block 1			; DATA XREF: sub_C57A+1769w
								; ROM:EF2Er ...
var_4ms_boost_cut_cnt:		.block 1			; DATA XREF: sub_C57A+730r
								; sub_C57A:loc_CCB3w
unk_C0:				.block 1			; DATA XREF: sub_C57A+128r
								; start_dma+4Ar ...
unk_C1:				.block 1			; DATA XREF: sub_C57A+12Br
								; start_dmar ...
unk_C2:				.block 1			; DATA XREF: iv6_4ms_process+5Fw
								; iv6_4ms_process+63r
unk_C3:				.block 1			; DATA XREF: sub_C57A+F0r
								; sub_C57A+2E4r ...
unk_C4:				.block 1			; DATA XREF: sub_C57A:loc_D1A9r
								; sub_C57A+C34w
unk_C5:				.block 1			; DATA XREF: ROM:F5BEr
								; ROM:loc_F5C6w
unk_C6:				.block 1			; DATA XREF: sub_F63F:loc_F65Fw
								; sub_F63F:loc_F661r
unk_C7:				.block 1			; DATA XREF: sub_C57A+647w
								; sub_C57A+676r ...
unk_C8:				.block 1			; DATA XREF: sub_C57A+513w
unk_C9:				.block 1			; DATA XREF: sub_C57A:loc_CB69w
								; sub_C57A:loc_CB6Dr
var_cnt_startup:		.block 1			; DATA XREF: sub_C57A:loc_C941w
								; sub_C57A:loc_C9C4r ...
unk_CB:				.block 1			; DATA XREF: sub_C57A+3BAw
unk_CC:				.block 1			; DATA XREF: sub_C57A+94Dw
								; sub_E996+283r
var_cnt_CD:			.block 1			; DATA XREF: sub_C57A:check_open_or_closed_loopw
								; sub_C57A+95Fr ...
unk_CE:				.block 1			; DATA XREF: sub_C57A+82Fr
								; sub_C57A+857w ...
unk_CF:				.block 1			; DATA XREF: sub_C57A:loc_D1D4w
								; sub_C57A+C9Er
unk_D0:				.block 1			; DATA XREF: sub_C57A+565w
								; sub_C57A+5A9r
unk_D1:				.block 1			; DATA XREF: sub_C57A+E9r
								; sub_C57A+8B0w ...
unk_D2:				.block 1			; DATA XREF: sub_E996:loc_EC7Dw
								; sub_E996:loc_ECE2r ...
unk_D3:				.block 1			; DATA XREF: sub_E996+C9w
								; sub_E996+105r ...
unk_D4:				.block 1			; DATA XREF: sub_E996+128w
								; sub_EACB+5Aw	...
var_cnt_D5:			.block 1			; DATA XREF: sub_C57A:loc_D2F1w
								; sub_D463+14Cr ...
unk_D6:				.block 1			; DATA XREF: sub_C57A+D41w
								; sub_D463:loc_D88Er
unk_D7:				.block 1			; DATA XREF: sub_C57A+D7Cw
								; sub_D463+16Dw ...
unk_D8:				.block 1			; DATA XREF: sub_D463+12Bw
								; sub_D463:loc_D5CEw ...
var_cnt_sensor_error:		.block 1			; DATA XREF: ROM:FB23w
								; ROM:loc_FB27r ...
				.block 1
unk_DB:				.block 1			; DATA XREF: sub_C57A+6D9r
								; sub_C57A:loc_CC5Fw
unk_DC:				.block 1			; DATA XREF: sub_D463:loc_D715w
								; sub_D463:loc_D722r
unk_DD:				.block 1			; DATA XREF: ROM:loc_F4F1w
unk_DE:				.block 1			; DATA XREF: ROM:loc_DA0Cw
								; ROM:DA11r
unk_DF:				.block 1			; DATA XREF: sub_C57A+1724w
								; sub_C57A:loc_DCA0r ...
unk_E0:				.block 1			; DATA XREF: ROM:loc_DE2Fw
								; ROM:loc_DE31r
unk_E1:				.block 1			; DATA XREF: sub_F6DB+3w
								; sub_F6DB+7r
unk_E2:				.block 1			; DATA XREF: sub_C57A+1D6Ar
								; sub_C57A+1D6Dw
unk_E3:				.block 1			; DATA XREF: sub_C57A:loc_D357w
								; sub_C57A+E06r ...
var_cnt_E4:			.block 1			; DATA XREF: sub_C57A+3C9w
								; sub_D463:loc_D4F8r ...
unk_E5:				.block 1			; DATA XREF: sub_C57A:loc_CAFBw
								; sub_C57A:loc_CB19w ...
unk_E6:				.block 1			; DATA XREF: ROM:loc_DD8Aw
								; ROM:loc_DD8Cr
unk_E7:				.block 1			; DATA XREF: ROM:DDA4r
								; ROM:DDD8w
unk_E8:				.block 1			; DATA XREF: ROM:loc_DE65w
								; ROM:loc_DE67r
unk_E9:				.block 1			; DATA XREF: sub_C57A+C3Cw
								; ROM:FC70w ...
unk_EA:				.block 1			; DATA XREF: init_ne_counters+3o
								; iv6_ne_process+20o ...
				.block 1
unk_EC:				.block 1			; DATA XREF: iv6_ne_process+39r
				.block 1
unk_EE:				.block 1			; DATA XREF: iv6_ne_process+3Br
								; iv6_ne_process+63r ...
				.block 1
var_ne_sum3:			.block 1			; DATA XREF: calc_rpmr
								; ROM:ED55r ...
unk_F1:				.block 1			; DATA XREF: sub_F1D5+5r
var_rpm_avg:			.block 1			; DATA XREF: sub_C57A+2EDw
								; sub_C8F4+2r ...
				.block 1
unk_F4:				.block 1			; DATA XREF: ROM:FB6Cw
								; ROM:FB82r ...
unk_F5:				.block 1			; DATA XREF: sub_C57A+3DDr
								; sub_E996+9Cr	...
unk_F6:				.block 1			; DATA XREF: sub_C57A+206Cw
unk_F7:				.block 1			; DATA XREF: sub_C57A+176w
								; int_4ms_watchdog+12w	...
var_adc_index:			.block 1			; DATA XREF: int_4ms_watchdog+4r
								; int_4ms_watchdog:loc_F72Ew ...
var_tps_2:			.block 1			; DATA XREF: ROM:loc_FD14r
								; ROM:FD71w
				.block 1
unk_FB:				.block 1			; DATA XREF: sub_C57A+FAw
								; sub_C977+10r	...
unk_FC:				.block 1			; DATA XREF: sub_E094+227r
								; ROM:FBF1r ...
unk_FD:				.block 1			; DATA XREF: check_io_inputs+2Co
unk_FE:				.block 1			; DATA XREF: check_io_inputs+5Do
unk_FF:				.block 1			; DATA XREF: iv6_ne_process+8w
								; iv6_ne_process+186r ...
				.block 1
unk_101:			.block 1			; DATA XREF: iv6_ne_process+29r
								; iv6_ne_process:loc_F002w ...
				.block 1
unk_103:			.block 1			; DATA XREF: sub_E4C5+31r
								; sub_F2E7+26w
var_inj_pw_inj1:		.block 1			; DATA XREF: sub_C57A+55Dr
								; sub_C57A+579r ...
				.block 1
unk_106:			.block 1			; DATA XREF: sub_C57A+1E21w
								; sub_C57A+2136w
unk_107:			.block 1			; DATA XREF: sub_C57A+1B3o
unk_108:			.block 1			; DATA XREF: sub_C57A+1E24w
								; sub_C57A+2139w
				.block 1
unk_10A:			.block 1			; DATA XREF: sub_C57A+1E27w
								; sub_C57A+213Cw
				.block 1
unk_10C:			.block 1			; DATA XREF: sub_C57A:loc_E66Ao
								; sub_C57A+2147o
				.block 1
				.block 1
				.block 1
				.block 1
				.block 1
				.block 1
				.block 1
var_inj_battery_adjust:		.block 1			; DATA XREF: ROM:DD28r
								; injector_drive+13r ...
				.block 1
unk_116:			.block 1			; DATA XREF: sub_C57A+111w
								; sub_C57A+808w ...
unk_117:			.block 1			; DATA XREF: sub_CDE8+10r
								; sub_CDE8+1Fw
unk_118:			.block 1			; DATA XREF: sub_CDE8:loc_CE04w
unk_119:			.block 1			; DATA XREF: sub_C57A:loc_CE76w
								; sub_C57A+907r ...
unk_11A:			.block 1			; DATA XREF: sub_C57A+90Aw
								; sub_C57A+1ED3r
unk_11B:			.block 1			; DATA XREF: sub_C57A+9B5o
								; sub_C57A+9BBw ...
				.block 1
unk_11D:			.block 1			; DATA XREF: sub_C57A+9DBw
								; sub_C57A:loc_CF69o ...
unk_11E:			.block 1			; DATA XREF: sub_C57A+9E7w
unk_11F:			.block 1			; DATA XREF: ROM:FB4Fw
								; ROM:FB57r
				.block 1
unk_121:			.block 1			; DATA XREF: sub_C57A+C4Br
								; sub_C57A+20B4r ...
				.block 1
unk_123:			.block 1			; DATA XREF: sub_C57A+21CAr
								; sub_E7D9+1Fw	...
				.block 1
unk_125:			.block 1			; DATA XREF: sub_E7D9+14w
								; sub_E7D9+3Fr	...
				.block 1
unk_127:			.block 1			; DATA XREF: sub_E7D9+17w
								; sub_E7D9+85r	...
				.block 1
unk_129:			.block 1			; DATA XREF: sub_E7D9+1Aw
								; sub_E7D9+2Cr	...
				.block 1
unk_12B:			.block 1			; DATA XREF: sub_E4C5+10w
								; sub_C57A+2024r ...
				.block 1
unk_12D:			.block 1			; DATA XREF: sub_C57A+1FD9r
								; sub_C57A+2039r ...
				.block 1
unk_12F:			.block 1			; DATA XREF: sub_C57A+1FEEr
								; sub_C57A+2027r ...
				.block 1
unk_131:			.block 1			; DATA XREF: sub_E4C5+3w
								; sub_E712+Cr
unk_132:			.block 1			; DATA XREF: sub_E3C8+61w
								; sub_C57A+20A6r
				.block 1
unk_134:			.block 1			; DATA XREF: sub_E3C8r
								; sub_C57A+1EFAw
				.block 1
unk_136:			.block 1			; DATA XREF: sub_C57A+21D7w
								; sub_E7D9+115r
unk_137:			.block 1			; DATA XREF: sub_C57A:loc_E76Ew
								; sub_C57A+2207r ...
				.block 1
unk_139:			.block 1			; DATA XREF: sub_C57A+2211w
								; sub_E7D9+175r ...
				.block 1
unk_13B:			.block 1			; DATA XREF: sub_C57A+2226w
								; sub_E7D9+170r ...
				.block 1
unk_13D:			.block 1			; DATA XREF: sub_C57A:loc_E4A8w
								; sub_E4AD+8r
unk_13E:			.block 1			; DATA XREF: sub_C57A+E4Ar
								; sub_E4C5+Ar ...
unk_13F:			.block 1			; DATA XREF: sub_E4C5+7w
unk_140:			.block 1			; DATA XREF: sub_C57A:loc_D1E3r
								; sub_C57A+C92r ...
unk_141:			.block 1			; DATA XREF: sub_C57A:loc_E5C5w
								; sub_E996+5Br	...
unk_142:			.block 1			; DATA XREF: sub_C57A+101w
								; sub_C57A:loc_CA2Er ...
var_rpm_limit:			.block 1			; DATA XREF: sub_C57A:loc_CBC7r
								; sub_C57A:loc_CBD6w ...
unk_144:			.block 1			; DATA XREF: sub_C57A+662r
unk_145:			.block 1			; DATA XREF: iv6_ne_process+26Cw
								; iv6_ne_process+288r ...
unk_146:			.block 1			; DATA XREF: iv6_ne_process+2A4r
								; sub_F2E7+36w
unk_147:			.block 1			; DATA XREF: iv6_ne_process+271w
								; iv6_ne_process+2C7w ...
unk_148:			.block 1			; DATA XREF: iv6_ne_process:loc_F244r
								; iv6_ne_process+2E6w ...
var_tps_raw:			.block 1			; DATA XREF: sub_E094+9r
								; sub_E094+20Dr ...
var_tps_unk_14A:		.block 1			; DATA XREF: sub_C977+9r
								; sub_C977+32r	...
				.block 1
var_adc_unk_14C:		.block 1			; DATA XREF: sub_E094+233r
								; ROM:adc_handler_unk_fd7fw
unk_14D:			.block 1			; DATA XREF: sub_E996:loc_EDD4w
								; sub_E996+52Dr
unk_14E:			.block 1			; DATA XREF: sub_C57A+14Bw
								; sub_E996:loc_EBC1r ...
unk_14F:			.block 1			; DATA XREF: sub_EACB+3r
								; sub_EACB+79r	...
unk_150:			.block 1			; DATA XREF: sub_E996+3A4w
								; sub_E996+407r ...
unk_151:			.block 1			; DATA XREF: sub_E996:loc_EF04w
								; sub_E996:loc_EF0Ar ...
unk_152:			.block 1			; DATA XREF: sub_C57A+137w
								; sub_E996:loc_EE73r ...
				.block 1
unk_154:			.block 1			; DATA XREF: sub_E996+441r
								; sub_E996:loc_EE03w ...
unk_155:			.block 1			; DATA XREF: sub_C57A+140w
								; sub_EACB:loc_EB63w ...
unk_156:			.block 1			; DATA XREF: sub_C57A+143w
								; sub_E996+112w ...
unk_157:			.block 1			; DATA XREF: sub_C57A+146w
								; sub_EACB+80w
unk_158:			.block 1			; DATA XREF: sub_EACB:loc_EB56r
								; sub_EB8E+6w
unk_159:			.block 1			; DATA XREF: sub_EACB:loc_EAF8w
								; sub_EACB:loc_EB27r
unk_15A:			.block 1			; DATA XREF: sub_E996+12Aw
								; sub_EACB+57w	...
unk_15B:			.block 1			; DATA XREF: sub_EACB:loc_EAE4w
				.block 1
unk_15D:			.block 1			; DATA XREF: sub_EACB+1Dr
								; sub_EACB+30w
				.block 1
unk_15F:			.block 1			; DATA XREF: sub_E996+12Fw
								; sub_EACB+2Aw	...
unk_160:			.block 1			; DATA XREF: sub_C57A+30Fw
								; sub_C57A+1710w ...
unk_161:			.block 1			; DATA XREF: sub_F19Bw
								; sub_F1B2w ...
				.block 1
unk_163:			.block 1			; DATA XREF: iv6_ne_process+16Aw
								; iv6_ne_process:loc_F15Ar ...
				.block 1
				.block 1
				.block 1
unk_167:			.block 1			; DATA XREF: iv6_ne_process+94w
								; iv6_ne_process:loc_F092r ...
unk_168:			.block 1			; DATA XREF: sub_F17B+9r
								; sub_F17B+1Cr	...
				.block 1
unk_16A:			.block 1			; DATA XREF: sub_E996+2Aw
								; sub_F17B+12r	...
unk_16B:			.block 1			; DATA XREF: sub_E996+21w
								; iv6_ne_process+75r ...
				.block 1
unk_16D:			.block 1			; DATA XREF: iv6_ne_process+5Dr
								; iv6_ne_process:loc_F115w ...
				.block 1
				.block 1
unk_170:			.block 1			; DATA XREF: sub_EC86+2w
								; sub_E996:loc_EC97r ...
unk_171:			.block 1			; DATA XREF: ROM:ED57r
								; ROM:ED86w
				.block 1
unk_173:			.block 1			; DATA XREF: sub_EC8D+3w
								; sub_E996+30Ao ...
				.block 1
unk_175:			.block 1			; DATA XREF: sub_EC8D+6w
				.block 1
unk_177:			.block 1			; DATA XREF: sub_E996+2E1w
								; sub_E996+310o ...
				.block 1
unk_179:			.block 1			; DATA XREF: sub_E996+2E4w
				.block 1
unk_17B:			.block 1			; DATA XREF: ROM:DF5Br
								; ROM:DF98w ...
unk_17C:			.block 1			; DATA XREF: ROM:FC42w
								; ROM:FC5Dr ...
unk_17D:			.block 1			; DATA XREF: ROM:DDA1r
								; ROM:loc_DDBDw ...
var_adc_o2_heater:		.block 1			; DATA XREF: ROM:DD7Fr
								; ROM:DDA9r ...
unk_17F:			.block 1			; DATA XREF: sub_C57A+152w
								; ROM:DD77r ...
				.block 1
unk_181:			.block 1			; DATA XREF: ROM:EF33r
								; ROM:loc_EF4Ew
unk_182:			.block 1			; DATA XREF: int_vector_9_ignition+28r
								; int_vector_9_ignition:loc_F6D6w
				.block 1
var_flags_184:			.block 1			; DATA XREF: ROM:FB0Er
								; ROM:loc_FB3Ew ...
var_flags_185:			.block 1			; DATA XREF: ROM:FDC1r
								; ROM:loc_FDE6w
var_idle_trim:			.block 1			; DATA XREF: sub_C57A+168w
								; clear_nv_ram+40w ...
var_iscv_startup_flare:		.block 1			; DATA XREF: sub_D463:loc_D484r
								; sub_D463:loc_D48Ew ...
				.block 1
unk_189:			.block 1			; DATA XREF: sub_D31C+6w
								; sub_D463+407r
unk_18A:			.block 1			; DATA XREF: sub_D463+54w
								; sub_D463+5Er	...
				.block 1
unk_18C:			.block 1			; DATA XREF: sub_C57A+157w
								; sub_D43B+Ar ...
unk_18D:			.block 1			; DATA XREF: sub_D463+126r
								; sub_D463:loc_D590w ...
				.block 1
unk_18F:			.block 1			; DATA XREF: sub_D463+13Cw
								; sub_D463+154r ...
var_iscv_unk_190:		.block 1			; DATA XREF: sub_D32F+3r
								; sub_C57A:loc_D41Dw ...
				.block 1
unk_192:			.block 1			; DATA XREF: sub_D463+226r
								; sub_D463+22Aw ...
unk_193:			.block 1			; DATA XREF: sub_C57A+D8Aw
								; sub_D463+15Fr ...
				.block 1
unk_195:			.block 1			; DATA XREF: sub_C57A+E67r
								; sub_C57A+E81r ...
				.block 1
unk_197:			.block 1			; DATA XREF: sub_D463:loc_D822w
								; sub_D463+416r
unk_198:			.block 1			; DATA XREF: sub_D463:loc_D636w
								; sub_D463+200r ...
unk_199:			.block 1			; DATA XREF: sub_C57A+15Dw
								; sub_C57A+D9Dw ...
				.block 1
unk_19B:			.block 1			; DATA XREF: sub_D463+381r
								; sub_D463:loc_D7F4w
				.block 1
var_rpm_idle_unk_19D:		.block 1			; DATA XREF: sub_C57A+2EFw
								; sub_D463+345r ...
				.block 1
unk_19F:			.block 1			; DATA XREF: sub_D463:loc_D563w
								; sub_D463+1C0r
				.block 1
unk_1A1:			.block 1			; DATA XREF: sub_D463:loc_D4DAr
								; sub_D463:loc_D4E4w ...
				.block 1
unk_1A3:			.block 1			; DATA XREF: sub_D463:loc_D4FFw
								; sub_D463+10Dr ...
				.block 1
var_iscv_unk_1A5:		.block 1			; DATA XREF: sub_D463+B0r
								; sub_D463:loc_D535w ...
				.block 1
unk_1A7:			.block 1			; DATA XREF: sub_C57A+163w
				.block 1
				.block 1
				.block 1
unk_1AB:			.block 1			; DATA XREF: ROM:F4E7r
								; ROM:loc_F517r ...
				.block 1
unk_1AD:			.block 1			; DATA XREF: ROM:F4EAw
								; ROM:F5A3r
				.block 1
unk_1AF:			.block 1			; DATA XREF: sub_F3E9+2r
								; sub_F3E9:loc_F4A0w ...
unk_1B0:			.block 1			; DATA XREF: ROM:loc_F4B8r
								; ROM:F4BEw ...
unk_1B1:			.block 1			; DATA XREF: ROM:F4DFr
								; ROM:loc_F537r ...
unk_1B2:			.block 1			; DATA XREF: ROM:F525r
								; ROM:F52Dr ...
unk_1B3:			.block 1			; DATA XREF: ROM:F53Br
								; ROM:F585w
unk_1B4:			.block 1			; DATA XREF: ROM:F5F4r
								; ROM:F617r ...
unk_1B5:			.block 1			; DATA XREF: sub_C57A+141Dw
								; sub_C57A+144Er ...
unk_1B6:			.block 1			; DATA XREF: sub_C57A+13C6r
								; sub_C57A+1400r ...
				.block 1
unk_1B8:			.block 1			; DATA XREF: sub_C57A+13CFr
								; sub_C57A:loc_D992w ...
				.block 1
unk_1BA:			.block 1			; DATA XREF: sub_DB15+3w
								; ROM:loc_DB51r ...
				.block 1
unk_1BC:			.block 1			; DATA XREF: sub_C57A+142Fw
								; ROM:DA5Dr ...
				.block 1
unk_1BE:			.block 1			; DATA XREF: sub_C57A+117w
								; sub_DB2E+Dw ...
				.block 1
unk_1C0:			.block 1			; DATA XREF: sub_C57A+11Aw
								; ROM:loc_DC44w ...
				.block 1
unk_1C2:			.block 1			; DATA XREF: sub_C57A+11Fw
								; ROM:DBE5r ...
unk_1C3:			.block 1			; DATA XREF: sub_C57A+125w
								; ROM:loc_DB7Dr ...
				.block 1
unk_1C5:			.block 1			; DATA XREF: sub_E3C8+3Ew
								; sub_C57A+2089r
unk_1C6:			.block 1			; DATA XREF: sub_E094+1FAr
								; ROM:loc_FE58w
unk_1C7:			.block 1			; DATA XREF: sub_E094+1F4r
								; ROM:loc_FE5Ew
unk_1C8:			.block 1			; DATA XREF: sub_E094+1EEr
								; ROM:loc_FE64w
unk_1C9:			.block 1			; DATA XREF: sub_E094+1E8r
								; ROM:loc_FE6Aw
unk_1CA:			.block 1			; DATA XREF: sub_C57A+1713r
								; sub_C57A+1742w ...
unk_1CB:			.block 1			; DATA XREF: sub_C57A:loc_CD76r
								; sub_C57A+C11w
unk_1CC:			.block 1			; DATA XREF: sub_C57A+B1Fr
								; sub_C57A+CA6r ...
unk_1CD:			.block 1			; DATA XREF: sub_E996+2Dr
								; sub_E996+8Cw
unk_1CE:			.block 1			; DATA XREF: sub_E996+8Fr
								; sub_EB67r ...
unk_1CF:			.block 1			; DATA XREF: sub_E996+274r
								; sub_E996+3FDw
var_flags_43_copy_1D0:		.block 1			; DATA XREF: sub_C57A+482r
								; sub_C57A+73Fw ...
unk_1D1:			.block 1			; DATA XREF: sub_C57A+2054r
								; sub_C57A+215Aw
unk_1D2:			.block 1			; DATA XREF: sub_C57A:loc_C9B8r
								; sub_C57A+473w ...
unk_1D3:			.block 1			; DATA XREF: sub_C57A+D0Fr
								; sub_C57A+1350w
unk_1D4:			.block 1			; DATA XREF: sub_C57A:loc_CEA1r
								; sub_C57A+C16w ...
unk_1D5:			.block 1			; DATA XREF: sub_C57A+90Er
								; sub_C57A+914w ...
unk_1D6:			.block 1			; DATA XREF: sub_C57A:loc_C84Dr
								; sub_C57A:loc_C85Aw ...
unk_1D7:			.block 1			; DATA XREF: sub_C57A+130w
								; sub_C57A+1D6r ...
var_dma_rx_buffer:		.block 1			; DATA XREF: ROM:C5F5t
								; sub_C57A+1FAt ...
				.block 1
				.block 1
				.block 1
				.block 1
				.block 1
				.block 1
				.block 1
				.block 1
				.block 1
				.block 1
				.block 1
				.block 1
				.block 1
				.block 1
				.block 1
				.block 1
				.block 1
				.block 1
				.block 1
				.block 1
				.block 1
				.block 1
				.block 1
				.block 1
				.block 1
				.block 1
				.block 1
				.block 1
				.block 1
				.block 1
				.block 1
				.block 1
				.block 1
dmatx_pim2:			.block 1			; DATA XREF: ROM:C5FAt
								; sub_C57A+1FFt ...
				.block 1
dmatx_tps:			.block 1			; DATA XREF: ROM:FC77w
								; ROM:FCF6w
				.block 1
dmatx_ect:			.block 1			; DATA XREF: ROM:FE4Dw
				.block 1
unk_200:			.block 1			; DATA XREF: copy_dma_tx+26w
				.block 1
unk_202:			.block 1			; DATA XREF: sub_C57A+8EAr
								; sub_C57A:loc_E59Bw ...
				.block 1
dmatx_tha:			.block 1			; DATA XREF: ROM:FDB6w
dmatx_tham:			.block 1			; DATA XREF: ROM:FDEDw
dmatx_battery:			.block 1			; DATA XREF: ROM:FDF5w
unk_207:			.block 1			; DATA XREF: copy_dma_tx:loc_F8A3w
unk_208:			.block 1			; DATA XREF: copy_dma_tx+16w
unk_209:			.block 1			; DATA XREF: copy_dma_tx+1Bw
unk_20A:			.block 1			; DATA XREF: copy_dma_tx:loc_F8ADw
unk_20B:			.block 1			; DATA XREF: copy_dma_tx+20w
dmatx_adc_lambda:		.block 1			; DATA XREF: ROM:FC13w
unk_20D:			.block 1			; DATA XREF: copy_dma_tx+2Cw
				.block 1
unk_20F:			.block 1			; DATA XREF: copy_dma_tx+32w
unk_210:			.block 1			; DATA XREF: sub_E996+49Fr
								; ROM:F510r ...
unk_211:			.block 1			; DATA XREF: ROM:DD2Ew
unk_212:			.block 1			; DATA XREF: iv6_ne_process+99w
								; iv6_ne_process+13Cw
unk_213:			.block 1			; DATA XREF: ROM:DD37w
unk_214:			.block 1			; DATA XREF: sub_C57A:loc_D12Bw
unk_215:			.block 1			; DATA XREF: sub_E996:loc_EE50w
								; iv6_ne_process+F9r
unk_216:			.block 1			; DATA XREF: copy_dma_tx+38w
unk_217:			.block 1			; DATA XREF: copy_dma_tx+3Dw
unk_218:			.block 1			; DATA XREF: copy_dma_tx+42w
				.block 1
unk_21A:			.block 1			; DATA XREF: copy_dma_tx+47w
dmatx_flags_1:			.block 1			; DATA XREF: copy_dma_tx:loc_F911w
dmatx_limiter_flags:		.block 1			; DATA XREF: copy_dma_tx+7Aw
unk_21D:			.block 1			; DATA XREF: sub_E094+35w
								; sub_E094:loc_E0E7w
unk_21E:			.block 1			; DATA XREF: sub_E094+3Cw
								; sub_E094:loc_E0F8w ...
				.block 1
dmarx_unk_220:			.block 1			; DATA XREF: sub_C57A+13BCr
								; copy_dma_rxo
				.block 1
unk_222:			.block 1			; DATA XREF: sub_C57A+13C1r
				.block 1
unk_224:			.block 1			; DATA XREF: sub_C57A+13D8r
								; sub_C57A+140Ar
				.block 1
unk_226:			.block 1			; DATA XREF: sub_C57A:loc_E45Fr
				.block 1
unk_228:			.block 1			; DATA XREF: sub_E094+206r
				.block 1
unk_22A:			.block 1			; DATA XREF: sub_C57A+B0Fr
								; sub_C57A+138Er ...
unk_22B:			.block 1			; DATA XREF: sub_C57A+B06r
								; sub_C57A+C82r ...
unk_22C:			.block 1			; DATA XREF: sub_C57A+B09r
unk_22D:			.block 1			; DATA XREF: sub_C57A+B0Cr
								; sub_C57A+1EC9r
unk_22E:			.block 1			; DATA XREF: sub_C57A+1EBFr
unk_22F:			.block 1			; DATA XREF: sub_C57A:loc_E46Er
unk_230:			.block 1			; DATA XREF: sub_C57A+B12r
								; sub_C57A+C85r ...
unk_231:			.block 1			; DATA XREF: sub_C57A+833r
								; sub_E3C8+3r
				.block 1
unk_233:			.block 1			; DATA XREF: sub_E996+534r
unk_234:			.block 1			; DATA XREF: ROM:F4CEr
								; ROM:F557r ...
unk_235:			.block 1			; DATA XREF: sub_C57A+1EDAr
unk_236:			.block 1			; DATA XREF: sub_E996+400r
unk_237:			.block 1			; DATA XREF: sub_E7D9+BDr
unk_238:			.block 1			; DATA XREF: sub_E7D9+C3r
unk_239:			.block 1			; DATA XREF: sub_E7D9+5Cr
								; sub_E7D9+D3r
unk_23A:			.block 1			; DATA XREF: sub_E7D9+56r
								; sub_E7D9+D9r
unk_23B:			.block 1			; DATA XREF: sub_E7C3+8r
unk_23C:			.block 1			; DATA XREF: sub_C57A+958r
								; sub_C57A+C53r ...
unk_23D:			.block 1			; DATA XREF: sub_E996:loc_EE3Cr
unk_23E:			.block 1			; DATA XREF: sub_E094+1E1r
unk_23F:			.block 1			; DATA XREF: sub_E094+1DAr
unk_240:			.block 1			; DATA XREF: iv6_ne_process+122r
unk_241:			.block 1			; DATA XREF: sub_C57A+DAo
								; iv6_ne_process+12Ar
byte_242:			.block 0BDh			; DATA XREF: copy_dma_rx+Bo
stack_top:			.block 1			; DATA XREF: ROM:C642o
								; sub_C57A+1B8o ...
var_nv_tps:			.block 1			; DATA XREF: sub_C57A+23Do
								; sub_C57A:loc_C7D5r ...
				.block 1
nv_table_knock_info:		.block 3			; DATA XREF: sub_C57A:loc_C7BAo
								; clear_nv_ram+56w ...
				.block 1
				.block 1
				.block 1
				.block 1
				.block 1
				.block 1
				.block 1
				.block 1
				.block 1
				.block 1
				.block 1
				.block 1
				.block 1
				.block 1
				.block 1
				.block 1
				.block 1
				.block 1
				.block 1
				.block 1
				.block 1
				.block 1
				.block 1
				.block 1
				.block 1
				.block 1
				.block 1
				.block 1
				.block 1
				.block 1
				.block 1
				.block 1
				.block 1
				.block 1
				.block 1
				.block 1
				.block 1
				.block 1
				.block 1
				.block 1
				.block 1
				.block 1
				.block 1
				.block 1
				.block 1
				.block 1
				.block 1
				.block 1
				.block 1
				.block 1
				.block 1
				.block 1
				.block 1
				.block 1
				.block 1
				.block 1
				.block 1
				.block 1
				.block 1
				.block 1
				.block 1
				.block 1
				.block 1
				.block 1
				.block 1
				.block 1
				.block 1
				.block 1
				.block 1
				.block 1
				.block 1
				.block 1
				.block 1
				.block 1
				.block 1
				.block 1
				.block 1
				.block 1
				.block 1
				.block 1
				.block 1
				.block 1
				.block 1
				.block 1
				.block 1
				.block 1
				.block 1
				.block 1
				.block 1
				.block 1
				.block 1
				.block 1
				.block 1
				.block 1
				.block 1
				.block 1
				.block 1
				.block 1
				.block 1
				.block 1
				.block 1
				.block 1
				.block 1
				.block 1
				.block 1
				.block 1
				.block 1
				.block 1
				.block 1
				.block 1
				.block 1
				.block 1
				.block 1
				.block 1
				.block 1
				.block 1
				.block 1
				.block 1
				.block 1
				.block 1
				.block 1
				.block 1
				.block 1
				.block 1
				.block 1
				.block 1
				.block 1
				.block 1
				.block 1
				.block 1
				.block 1
				.block 1
				.block 1
				.block 1
				.block 1
				.block 1
				.block 1
				.block 1
				.block 1
				.block 1
				.block 1
				.block 1
				.block 1
				.block 1
				.block 1
				.block 1
				.block 1
				.block 1
				.block 1
				.block 1
				.block 1
				.block 1
				.block 1
				.block 1
				.block 1
				.block 1
				.block 1
				.block 1
				.block 1
				.block 1
				.block 1
				.block 1
				.block 1
				.block 1
				.block 1
				.block 1
				.block 1
				.block 1
				.block 1
				.block 1
				.block 1
				.block 1
				.block 1
				.block 1
				.block 1
				.block 1
				.block 1
				.block 1
				.block 1
				.block 1
				.block 1
				.block 1
				.block 1
				.block 1
				.block 1
				.block 1
				.block 1
				.block 1
				.block 1
				.block 1
				.block 1
				.block 1
				.block 1
				.block 1
				.block 1
				.block 1
				.block 1
				.block 1
				.block 1
				.block 1
				.block 1
				.block 1
				.block 1
				.block 1
				.block 1
				.block 1
				.block 1
				.block 1
				.block 1
				.block 1
				.block 1
				.block 1
				.block 1
				.block 1
				.block 1
				.block 1
				.block 1
				.block 1
				.block 1
				.block 1
				.block 1
				.block 1
				.block 1
				.block 1
				.block 1
				.block 1
				.block 1
				.block 1
				.block 1
				.block 1
				.block 1
				.block 1
				.block 1
				.block 1
				.block 1
				.block 1
				.block 1
				.block 1
				.block 1
				.block 1
				.block 1
				.block 1
				.block 1
				.block 1
				.block 1
				.block 1
				.block 1
				.block 1
				.block 1
				.block 1
; end of 'RAM'


				.org 08000h
rom_start:

; *************************************************
; Extended serial diagnostics
; *************************************************
serial_diag_extended:                
                        
; Flush any stale data in UART receive buffer
.diag_flush:
				ld      a, SIDR_SODR
				tbbs    bit7, SSD, .diag_flush          ; Loop back if SSD.7 set (data in receive buffer)
                        
; Send sync byte                        
				clrb    bit1, SSD                       ; Clear SSD.1 which sets parity bit to space (DIAG)
				ld      a, serial_diag_mode             ; Copy mode value...
				;clrb    bit1, PORTD_ASRIN
				st      a, SIDR_SODR                    ; ...to serial Tx buffer

				ld      y, #.diag_mode_table            ; Load table base for diag mode table
				sub     a, #0DAh                        ; Convert mode into index and...
				shl     a                               ; ...multiply by 2
				add     y, a                            ; Compute address in table
				ld      y, y + 00h                      ; Load jump address into y for selected mode

				ld      b, #10h                         ; Initialise loop counter (16 iterations)
				;setb    bit1, PORTD_ASRIN

; Wait for MSB of command/address to be received
.diag_msb_wait:
				tbbs    bit7, SSD, .diag_msb_found      ; Exit loop if SSD.7 set (data in receive buffer)
				dec     b                               ; Repeat for 14 iterations...
				bne     .diag_msb_wait                  ; ...loop back if more iterations
				ret					; Timed out waiting for data

; MSB of command/address received
.diag_msb_found:                                              
				tbbs    bit6, SSD, .diag_drop           ; Jump if SSD.6 (buffer overflow) set
				ld      a, SIDR_SODR                    ; Store MSB in A

; Wait for LSB of command/address to be received                        
.diag_lsb_wait:
				tbbs    bit7, SSD, .diag_lsb_found      ; Exit loop if SSD.7 set (data in receive buffer)
				dec     b                               ; Repeat for 14 iterations...
				bne     .diag_lsb_wait                  ; ...loop back if more iterations
				ret		                      	; Timed out waiting for data

; LSB of command/address received
.diag_lsb_found:        	tbbs    bit6, SSD, .diag_drop           ; Jump if SSD.6 (buffer overflow) set
				ld      b, SIDR_SODR                    ; Store LSB in B, 16 bit value now in D

				tbbs    bit0, SSD, .diag_command        ; Read Serial Status Register, jump if parity bit is set (command selection bit)
				jmp     y + 00h                         ; Not command, so jump to mode handler routine

; Handler for read 16 mode
.diag_data_read16_mode:
				mov     d, y                            ; Move address to Y
				ld      d, [y]                          ; Read 2 bytes and increment address                        

; Transmit word in D
.diag_tx_word:
				clrb    bit1, SSD                       ; Clear SSD.1 which sets parity bit to space (DIAG)
				st      a, SIDR_SODR                    ; Write 1st byte to serial Tx buffer
				div     d, #00h                         ; Wait for a bit...                        
				clrb    bit1, SSD                       ; Clear SSD.1 which sets parity bit to space (DIAG)
				st      b, SIDR_SODR                    ; Write 2nd byte to serial Tx buffer
				ret
				
; Handler for write 16 bits mode, address phase
.diag_addr_write16_mode:
				st      d, serial_diag_address          ; Store write address
				ld      #0DCh, serial_diag_mode         ; Move to data_write16 mode
				bra     .diag_tx_word                   ; Echo back address
                        
; Handler for write 16 bits mode, data phase
.diag_data_write16_mode:
				ld      y, serial_diag_address          ; Retrieve write address
				st      d, [y]                          ; Write 16 bit value in D, increment write address
				st      y, serial_diag_address          ; Store write address
				bra     .diag_tx_word                   ; Echo back address
                        
; Handler for write 8 bits mode, address phase
.diag_addr_write8_mode:
				st      d, serial_diag_address          ; Store write address
				ld      #0DEh, serial_diag_mode         ; Move to data_write8 mode    
				bra     .diag_tx_word                   ; Echo back address
                        
; Handler for write 16 bits mode, data phase
.diag_data_write8_mode:
				ld      y, serial_diag_address          ; Retrieve write address
				st      a, [y]                          ; Write 8 bit value in A, increment write address
				st      y, serial_diag_address          ; Store write address
				bra     .diag_tx_word                   ; Echo back address

; Command received, store and echo back              
.diag_command:
				cmp     b, #0DAh                        ; Check if command < 0DAh...
				bcs     .diag_drop                      ; Jump if it is, command is invalid
				cmp     b, #0DEh                        ; Check if command > 0DEh
				bgt     .diag_drop                      ; Jump if it is, command is invalid                                
				st      b, serial_diag_mode             ; Store new diagnostic mode                        
				bra     .diag_tx_word                   ; Echo back command  
                        
; Drop any data in buffer                        
.diag_drop:
				ld      a, SIDR_SODR
				tbbs    bit7, SSD, .diag_drop            ; Loop back if SSD.7 set (data in receive buffer)
				ret

.diag_mode_table:
				.dw     .diag_data_read16_mode          ; 0DAh
				.dw     .diag_addr_write16_mode         ; 0DBh
				.dw     .diag_data_write16_mode         ; 0DCh
				.dw     .diag_addr_write8_mode          ; 0DDh
				.dw     .diag_data_write8_mode          ; 0DEh

serial_diag_init:		ld	a, #0DAh
				st	a, serial_diag_mode
				jmp	init_ne_counters

				
				;.segment ROM
				.org 0C000h
unk_C000:			.db  5Fh ; _			; DATA XREF: sub_E094+E4o
				.db  5Fh ; _
				.db  5Fh ; _

; *************** S U B	R O U T	I N E ***************************************


				; public IVf
IVf:								; CODE XREF: IVfj
								; DATA XREF: ROM:FFE2o	...
				bra	IVf			; IV2
								; IV3
								; IV5
								; IV7
								; IV8
								; IVa
								; IVb
								; IVd

; End of function IVf

; ***************************************************************************
				.db 00h


word_C006:			.dw 0200h			; DATA XREF: sub_E6E1:loc_E6FBo
				.db 0Bh
				.dw 0000h
				.db 0Ah
				.db 043, 039, 030, 024,	022, 018, 018, 015, 014, 014, 013, 012
				.db 076, 073, 069, 058,	047, 039, 033, 026, 022, 022, 021, 018
				.db 091, 088, 088, 080,	074, 064, 053, 045, 039, 037, 034, 029
				.db 093, 092, 091, 088,	086, 078, 071, 063, 056, 053, 049, 042
				.db 094, 094, 094, 092,	091, 087, 082, 076, 070, 067, 062, 056
				.db 094, 094, 095, 094,	094, 090, 087, 083, 079, 075, 073, 067
				.db 096, 096, 096, 096,	095, 094, 093, 091, 090, 088, 086, 083
				.db 097, 096, 096, 096,	096, 096, 095, 094, 094, 093, 092, 091
				.db 097, 097, 097, 097,	097, 097, 096, 095, 095, 095, 095, 094
				.db 097, 097, 097, 097,	097, 097, 097, 097, 097, 096, 097, 097
				.db 097, 097, 097, 097,	097, 097, 097, 097, 097, 097, 097, 097


word_C090:			.dw 0080h			; DATA XREF: sub_E6E1+27o
				.db 02h
				.dw 0225h
				.db 0Ah
				.db 003, 017, 026
				.db 004, 019, 031
				.db 004, 020, 038
				.db 005, 021, 040
				.db 005, 022, 043
				.db 006, 023, 046
				.db 006, 025, 048
				.db 010, 034, 050
				.db 013, 032, 053
				.db 015, 038, 061
				.db 048, 062, 076


map_fuel_scale_rpm:		.dw 0280h			; DATA XREF: sub_C57A+83Co
				.db 05h
				.dw 0100h
				.db 04h
				.db 128, 128, 090, 090,	090, 090
				.db 128, 128, 077, 077,	077, 077
				.db 128, 128, 051, 051,	051, 051
				.db 128, 128, 051, 051,	051, 051
				.db 128, 128, 051, 051,	051, 051


table_ect_C0DB:			.db 18h				; DATA XREF: sub_C57A:loc_E326o
				.db 10h, 67h
				.db 20h, 5Ch
				.db 2Fh, 4Bh
				.db 3Fh, 3Bh
				.db 4Eh, 35h
				.db 5Eh, 29h
				.db 6Dh, 1Eh
				.db 7Dh, 17h
				.db 8Dh, 0Fh
				.db 9Dh, 0Eh
				.db 0ADh, 0Dh
				.db 0BDh, 0Ah
				.db 0CDh, 08h


table_rpm_C0F6:			.dw 0280h			; DATA XREF: sub_C57A+1DB6o
				.db 06h
				.db 0FFh
				.db 92h
				.db 72h
				.db 5Dh
				.db 4Fh
				.db 44h
				.db 3Ch


table_ect_C102:			.db 9Ch, 40h			; DATA XREF: sub_C57A+1DBDo
				.db 0FFh
				.db 0A0h
				.db 40h


table_battery_unk_C105:		.db 46h, 10h			; DATA XREF: sub_C57A+1DDDo
				.db 0A9h
				.db 94h


table_inj_battery_adjust:	.db 53h, 80h			; DATA XREF: ROM:FE07o
				.db 0A9h			; 6.48v	 =
				.db 4Eh				; 8.95v	 =
				.db 2Ah				; 11.44v =
				.db 1Eh				; 13.92v =
				.db 11h				; 16.40v =


table_ect_unk_C110:		.db 26h, 0C0h			; DATA XREF: sub_CAC1o
				.db 60h
				.db 50h
				.db 44h
				.db 29h


table_rpm_unk_C116:		.db 60h, 80h			; DATA XREF: sub_C57A+5A3o
				.db 0Fh
				.db 06h
				.db 06h
				.db 06h
				.db 06h


table_pim_unk_C11D:		.dw 0113h			; DATA XREF: sub_E7D9+Ao
				.db 0Bh
				.db 00h
				.db 07h
				.db 09h
				.db 13h
				.db 19h
				.db 20h
				.db 25h
				.db 2Bh
				.db 3Bh
				.db 4Eh
				.db 69h
				.db 80h


unk_C12C:			.db  01h			; DATA XREF: sub_E7D9+CBo
				.db  00h
				.db  01h
				.db  1Ah
				.db  80h ; 


unk_C131:			.db  00h			; DATA XREF: sub_C57A:loc_E741o
				.db  80h ; 
				.db  06h
				.db  47h ; G
				.db  47h ; G
				.db  49h ; I
				.db  56h ; V
				.db  30h ; 0
				.db  30h ; 0
				.db  30h ; 0


unk_C13B:			.db  00h			; DATA XREF: sub_C57A+21CFo
				.db  80h ; 
				.db  06h
				.db  42h ; B
				.db  42h ; B
				.db  57h ; W
				.db  43h ; C
				.db  45h ; E
				.db  45h ; E
				.db  45h ; E


unk_C145:			.db  1Fh			; DATA XREF: sub_C57A+21E7o
				.db 0C0h ; ภ
				.db  30h ; 0
				.db  30h ; 0
				.db  64h ; d
				.db  3Fh ; ?
				.db  20h
				.db  06h
				.db  00h


unk_C14E:			.db  1Fh			; DATA XREF: sub_C57A+21DDo
				.db 0C0h ; ภ
				.db  00h
				.db  00h
				.db  00h
				.db  00h
				.db  00h
				.db  00h
				.db  00h


unk_C157:			.db  0Eh			; DATA XREF: sub_C57A:loc_E771o
				.db  1Fh
				.db  80h ; 
				.db  3Eh ; >
				.db  80h ; 
				.db  5Dh ; ]
				.db  60h ; `
				.db  7Ch ; |
				.db  40h ; @
				.db  9Ch ; 
				.db  28h ; (
				.db 0BCh ; ผ
				.db  14h
				.db 0DCh ; 
				.db  06h
				.db 0E8h ; ่
				.db  00h


unk_C168:			.db  0Eh			; DATA XREF: sub_C57A+2214o
				.db  1Fh
				.db  6Ch ; l
				.db  3Eh ; >
				.db  6Ah ; j
				.db  5Dh ; ]
				.db  54h ; T
				.db  7Ch ; |
				.db  48h ; H
				.db  9Ch ; 
				.db  1Ch
				.db 0BCh ; ผ
				.db  12h
				.db 0DCh ; 
				.db  07h
				.db 0E8h ; ่
				.db  00h


unk_C179:			.db  0Eh			; DATA XREF: sub_C57A+21FFo
				.db  1Fh
				.db  00h
				.db  3Eh ; >
				.db  00h
				.db  5Dh ; ]
				.db  00h
				.db  7Ch ; |
				.db  00h
				.db  9Ch ; 
				.db  00h
				.db 0BCh ; ผ
				.db  00h
				.db 0DCh ; 
				.db  00h
				.db 0E8h ; ่
				.db  00h


unk_C18A:			.db  0Eh			; DATA XREF: sub_C57A+221Co
				.db  1Fh
				.db  00h
				.db  3Eh ; >
				.db  00h
				.db  5Dh ; ]
				.db  00h
				.db  7Ch ; |
				.db  00h
				.db  9Ch ; 
				.db  00h
				.db 0BCh ; ผ
				.db  00h
				.db 0DCh ; 
				.db  00h
				.db 0E8h ; ่
				.db  00h


byte_C19B:			.db 38h				; DATA XREF: sub_CD14+Co
				.db  60h ; `
				.db  7Dh ; }
				.db  7Dh ; }
				.db  7Dh ; }
				.db  00h


unk_C1A1:			.db  06h			; DATA XREF: sub_CD14:loc_CD2Ao
				.db  26h ; &
				.db  00h
				.db  51h ; Q
				.db  00h
				.db  86h ; 
				.db  00h
				.db 0B3h ; ณ
				.db  00h


unk_C1AA:			.db  18h			; DATA XREF: sub_C57A+5E5o
				.db  60h ; `
				.db  66h ; f
				.db  2Ah ; *
				.db  28h ; (
				.db  33h ; 3


unk_C1B0:			.db  38h ; 8			; DATA XREF: sub_C57A:loc_CC21o
				.db  50h ; P
				.db  02h
				.db  03h
				.db  05h
				.db  09h
				.db  0Bh
				.db  1Ah


table_boost_limit:		.dw 0200h			; DATA XREF: check_boost_limito
				.db 02h
				.db 0DAh, 0DAh,	0CDh


table_boost_limit_time:		.dw 0200h			; DATA XREF: check_boost_limit:loc_CC95o
				.db 02h, 62h, 62h
				.db  62h ; b


table_ect_inj_throttle_pump:	.db 002				; DATA XREF: async_throttle_inject+1Bo
				.db 081, 038			; 0c
				.db 228, 038			; 82c


unk_C1C9:			.db  06h			; DATA XREF: sub_C57A+827o
				.db  29h ; )
				.db  7Ah ; z
				.db  52h ; R
				.db  5Ch ; \
				.db  7Bh ; {
				.db  3Dh ; =
				.db 0A4h ; ค
				.db  3Dh ; =


unk_C1D2:			.db  08h			; DATA XREF: sub_C57A+8F5o
				.db  28h ; (
				.db  40h ; @
				.db  3Ch ; <
				.db  73h ; s
				.db  50h ; P
				.db  7Fh ; 
				.db  64h ; d
				.db  7Fh ; 
				.db  78h ; x
				.db  7Fh ; 


unk_C1DD:			.db  12h			; DATA XREF: sub_C57A+901o
				.db  0Ah
				.db 0FDh ; 
				.db  14h
				.db 0FDh ; 
				.db  1Fh
				.db 0FDh ; 
				.db  29h ; )
				.db 0FDh ; 
				.db  33h ; 3
				.db  1Ah
				.db  3Dh ; =
				.db  00h
				.db  48h ; H
				.db  00h
				.db  52h ; R
				.db  00h
				.db  5Ch ; \
				.db  00h
				.db  66h ; f
				.db  00h


unk_C1F2:			.db  0Ah			; DATA XREF: sub_C57A:loc_CF24o
								; sub_C57A+A18o
				.db  05h
				.db  0Ah
				.db  05h


unk_C1F6:			.db  1Ah			; DATA XREF: sub_C57A+999o
				.db  1Ah
				.db  1Ah
				.db  1Ah


unk_C1FA:			.db  2Bh ; +			; DATA XREF: sub_C57A+9C5o
								; sub_C57A+A34o
				.db  16h
				.db  10h
				.db  40h ; @
				.db  41h ; A
				.db  61h ; a
				.db  97h ; 
				.db  10h
				.db  40h ; @
				.db  41h ; A
				.db  61h ; a
				.db  6Ch ; l


unk_C206:			.db  2Bh ; +			; DATA XREF: sub_C57A+9CDo
				.db  16h
				.db  10h
				.db  40h ; @
				.db  41h ; A
				.db  6Ch ; l
				.db 0A1h ; ก
				.db  10h
				.db  40h ; @
				.db  41h ; A
				.db  56h ; V
				.db  61h ; a


table_adc_lambda_C212:		.db  09h			; DATA XREF: ROM:FBEAo
				.db  09h
				.db  06h
				.db  10h
				.db  0Bh
				.db 0FEh ; 
				.db 0FEh ; 
				.db 0FEh ; 
				.db 0FEh ; 
				.db 0FEh ; 


word_C21C:			.dw 0300h			; DATA XREF: sub_C57A+3E6o
				.db 05h
				.dw 01CDh
				.db 03h
				.db 7Ah, 7Ah, 7Ah, 7Ah,	31h, 31h
				.db 7Ah, 7Ah, 7Ah, 7Ah,	31h, 31h
				.db 7Ah, 7Ah, 7Ah, 7Ah,	31h, 31h
				.db 7Ah, 7Ah, 7Ah, 7Ah,	31h, 31h


unk_C23A:			.db  00h			; DATA XREF: sub_C57A+20F3o
				.db  00h
				.db  00h
				.db  00h
unk_C23E:			.db  08h			; DATA XREF: sub_C57A+20F9o
				.db  00h
				.db  00h
				.db  00h
unk_C242:			.db  0Dh			; DATA XREF: sub_F2E7+16o
				.db  0Dh
				.db  0Dh
				.db  0Dh
unk_C246:			.db  08h			; DATA XREF: sub_E996:loc_E9A1o
				.db  80h ; 
				.db 0FFh
				.db  9Ah ; 
				.db 0D7h ; ื
				.db 0B3h ; ณ
				.db 0BBh ; ป
				.db 0CDh ; อ
				.db 0AAh ; ช
				.db 0E6h ; ๆ
				.db  8Fh ; 
unk_C251:			.db  08h			; DATA XREF: sub_E996+16o
				.db  0Ah
				.db 0FFh
				.db  20h
				.db 0CBh ; ห
				.db  3Ch ; <
				.db 0A1h ; ก
				.db  5Ah ; Z
				.db 0A1h ; ก
				.db 0A0h ; 
				.db  7Eh ; ~
unk_C25C:			.db  04h			; DATA XREF: sub_E996+24o
				.db  28h ; (
				.db 0FAh ; ๚
				.db  50h ; P
				.db  7Dh ; }
				.db 0A0h ; 
				.db  5Eh ; ^
unk_C263:			.db  0Eh			; DATA XREF: sub_E996+242o
				.db  1Fh
				.db 0ABh ; ซ
				.db  3Eh ; >
				.db  9Eh ; 
				.db  5Dh ; ]
				.db  95h ; 
				.db  7Ch ; |
				.db  80h ; 
				.db  9Ch ; 
				.db  80h ; 
				.db 0BCh ; ผ
				.db  80h ; 
				.db 0D2h ; า
				.db  80h ; 
				.db 0E4h ; *
				.db  80h ; 
unk_C274:			.db  0Eh			; DATA XREF: sub_E996+24Co
				.db  1Fh
				.db 0ABh ; ซ
				.db  3Eh ; >
				.db  9Eh ; 
				.db  5Dh ; ]
				.db  95h ; 
				.db  7Ch ; |
				.db  80h ; 
				.db  9Ch ; 
				.db  6Bh ; k
				.db 0BCh ; ผ
				.db  6Fh ; o
				.db 0D2h ; า
				.db  80h ; 
				.db 0E4h ; *
				.db  80h ; 
unk_C285:			.db  0Eh			; DATA XREF: sub_E996:loc_EBFEo
				.db  1Fh
				.db 0ABh ; ซ
				.db  3Eh ; >
				.db  9Eh ; 
				.db  5Dh ; ]
				.db  95h ; 
				.db  7Ch ; |
				.db  80h ; 
				.db  9Ch ; 
				.db  80h ; 
				.db 0BCh ; ผ
				.db  80h ; 
				.db 0D2h ; า
				.db  80h ; 
				.db 0E4h ; *
				.db  80h ; 
unk_C296:			.db  00h			; DATA XREF: sub_E996+296o
				.db 0C0h ; ภ
				.db  33h ; 3
				.db  40h ; @
				.db  48h ; H
				.db  55h ; U
				.db  73h ; s
				.db  7Bh ; {
				.db  88h ; 
unk_C29F:			.db  08h			; DATA XREF: sub_E996+41Bo
				.db  60h ; `
				.db  05h
				.db  56h ; V
				.db  56h ; V
				.db  77h ; w
				.db  98h ; 
				.db 0B8h ; ธ
				.db 0CDh ; อ
unk_C2A8:			.db  05h			; DATA XREF: sub_E996+423o
				.db  11h
				.db  05h
				.db  11h
unk_C2AC:			.db  1Ah			; DATA XREF: sub_E996+9Eo
				.db  80h ; 
				.db 0C8h ; ศ
				.db 0C8h ; ศ
				.db 0C8h ; ศ
				.db 0C8h ; ศ
				.db 0C8h ; ศ
unk_C2B3:			.db  56h ; V			; DATA XREF: sub_EACB+6o
				.db  80h ; 
				.db  00h
				.db  0Ch
				.db  2Ah ; *
				.db  40h ; @
				.db  95h ; 
unk_C2BA:			.db  00h			; DATA XREF: sub_EACB:loc_EB30o
				.db  80h ; 
				.db  00h
				.db  1Eh
				.db  33h ; 3
				.db  40h ; @
				.db  40h ; @
unk_C2C1:			.db  02h			; DATA XREF: sub_EB8Eo
				.db 0D2h ; า
				.db  40h ; @
				.db 0E4h ; *
				.db  00h
unk_C2C6:			.db  1Ah			; DATA XREF: sub_E996:loc_EA7Fo
				.db  80h ; 
				.db  06h
				.db  0Ah
				.db  19h
				.db  25h ; %
				.db  25h ; %
unk_C2CD:			.db  4Fh ; O			; DATA XREF: sub_EACB+6Co
				.db  40h ; @
				.db  80h ; 
				.db  00h
unk_C2D1:			.db  20h			; DATA XREF: sub_E996+32o
				.db  40h ; @
				.db  29h ; )
				.db  3Ah ; :
				.db  4Dh ; M
unk_C2D6:			.db  04h			; DATA XREF: sub_E996+69o
				.db  28h ; (
				.db  44h ; D
				.db  50h ; P
				.db  44h ; D
				.db  78h ; x
				.db  44h ; D


table_idle_C2DD:		.dw 0600h			; DATA XREF: sub_D463:loc_D810o
				.db 04h
				.dw 0200h
				.db 04h
				.db 0D0h, 0D0h,	0D0h, 0D0h, 0D0h
				.db 0B6h, 6Ah, 64h, 5Fh, 79h
				.db 5Ah, 5Ah, 50h, 46h,	46h
				.db 50h, 50h, 50h, 46h,	31h
				.db 46h, 31h, 31h, 31h,	31h


table_rpm_c2fc:			.db 50h, 30h			; DATA XREF: sub_D463+448o
				.db 00h, 66h, 9Ah, 0CDh


table_ect_idle_C302:		.db 12h				; DATA XREF: sub_C57A+B4Fo
								; sub_D31Co
byte_C303:			.db 038, 127
				.db 058, 100
				.db 081, 084
				.db 107, 077
				.db 134, 067
				.db 179, 056
				.db 210, 046
				.db 220, 027
				.db 225, 019
				.db 228, 000


table_ect_idle_flare:		.db 0Ah				; DATA XREF: sub_D463+5o
				.db 26h, 14h
				.db 3Ah, 14h
				.db 51h, 14h
				.db 86h, 14h
				.db 0DCh, 14h
				.db 0E8h, 1Ah


table_tha_idle_flare:		.db 02h				; DATA XREF: sub_D463+Co
				.db 0B3h, 0Ah
				.db 0D2h, 33h


unk_C329:			.db  1Fh			; DATA XREF: sub_D463:loc_D852o
				.db  0Ah
unk_C32B:			.db  21h ; !			; DATA XREF: sub_D463+4Bo
				.db  30h ; 0
				.db  00h
				.db  26h ; &
				.db  26h ; &
				.db  26h ; &


unk_C331:			.db  0Dh			; DATA XREF: sub_D463+1B2o
				.db  1Ah
				.db  13h
				.db  20h


unk_C335:			.db  92h ; 			; DATA XREF: sub_D463+1AAo
				.db  40h ; @
				.db  00h


table_iscv_rpm_C338:		.db 00h, 6Ah, 7Ah, 85h,	95h	; DATA XREF: sub_D463+151o
				.db 0FFh, 83h, 81h, 80h, 7Fh


table_iscv_rpm_c342:		.db 7Dh, 6Ah, 7Ah, 85h,	95h	; DATA XREF: sub_D463+1E1o
				.db 0FFh, 83h, 81h, 80h, 7Fh
				.db 7Dh


idle_trim:			.db 70h, 90h			; DATA XREF: sub_D463+D5o
idle_trim_els:			.db 0A0h, 0B0h			; DATA XREF: sub_D463+E1o
idle_trim_eco:			.db 70h, 90h			; DATA XREF: sub_D463+E7o
byte_C353:			.db 10h, 00h			; DATA XREF: sub_D463+A4o
byte_C355:			.db 00h, 00h			; DATA XREF: sub_D463+AAo


table_ect_C357:			.db 0Ch				; DATA XREF: sub_D456o
				.db 26h, 0F3h
				.db 51h, 0F1h
				.db 6Bh, 0E8h
				.db 86h, 0D7h
				.db 0B3h, 0ACh
				.db 0D2h, 94h
				.db 0E4h, 8Dh


unk_C366:			.db  73h ; s			; DATA XREF: sub_D423+2o
				.db  60h ; `
				.db  19h
				.db  27h ; '
				.db  33h ; 3
				.db  3Bh ; ;


byte_C36C:			.db 73h				; DATA XREF: sub_D42F+2o
				.db  60h ; `
				.db  36h ; 6
				.db  33h ; 3
				.db  31h ; 1
				.db  2Ch ; ,


unk_C372:			.db  00h			; DATA XREF: sub_D463+112o
				.db  08h
				.db  10h


unk_C375:			.db  20h			; DATA XREF: ROM:F4FDo
				.db  02h
				.db  04h
				.db  06h


unk_C379:			.db  01h			; DATA XREF: ROM:F5F7o
				.db  01h
				.db  02h


table_knock_rpm_C37C:		.db 70h, 0C0h			; DATA XREF: ROM:loc_F61Do
				.db 68h, 0C0h			; 2800,	4800
				.db 68h, 0B8h			; 2600,	4800
								; 2600,	4600


ram_62_limits:			.dw 0E600h, 1A00h		; DATA XREF: sub_C57A:loc_CFF2o


nv_86_limits:			.db 0E6h, 1Ah			; DATA XREF: sub_C57A+A99o
				.db 0E6h, 1Ah
				.db 0E6h, 1Ah
				.db 0E6h, 1Ah
				.db 0E6h, 1Ah
				.db 0E6h, 1Ah
				.db 0E6h, 1Ah
				.db 0E6h, 1Ah
				.db 0AEh, 52h


nv_96_limits:			.db 40h, 00h			; DATA XREF: sub_D271+2o


inj_pw_limits:			.dw 7530h, 00AFh		; DATA XREF: sub_C57A:loc_E68Do


byte_C39E:			.db 64h, 37h			; DATA XREF: ROM:FBA1o
								; sub_FBB7+2o


byte_C3A0:			.db 88h, 2Ah			; DATA XREF: sub_E996:loc_ED35o


word_C3A2:			.dw 0500h, 0000h		; DATA XREF: sub_C57A:loc_D9E1o
								; ROM:DBAEo


idle_trim_limits:		.db 78h, 31h			; DATA XREF: sub_C57A+D45o
								; sub_D463+2E1o ...
pim_adc_limits:			.db 0E6h, 1Ah			; DATA XREF: ROM:adc_handler_pimo
tha_adc_limits:			.db 0FCh, 07h			; DATA XREF: ROM:adc_handler_thao
tham_adc_limits:		.db 0FCh, 07h			; DATA XREF: ROM:adc_handler_thamo
ect_adc_limits:			.db 0FCh, 07h			; DATA XREF: ROM:adc_handler_ecto
tps_adc_limits:			.db 0FBh, 05h			; DATA XREF: ROM:FC1Co
byte_C3B2:			.db 31h, 05h			; DATA XREF: ROM:FC56o
nv_tps_limits:			.db 0C3h, 14h			; DATA XREF: sub_C57A+25Eo
								; ROM:FCD2o

; *************** S U B	R O U T	I N E ***************************************


clamp_rB:							; CODE XREF: sub_C57A+AA0p
								; sub_C57A+B54p ...
				dec	y
				cmp	b, y + 01h
				bgt	loc_C3C9

				ld	a, y + 01h
				bra	loc_C3C4

; End of function clamp_rB


; *************** S U B	R O U T	I N E ***************************************


clamp_rD:							; CODE XREF: sub_E7D9+42p
								; sub_E7D9+88p
				cmp	d, y + 00h
				bgt	loc_C3C9

				inc	y

loc_C3C4:							; CODE XREF: clamp_rB+7-j
				inc	y
				cmp	d, y + 00h
				bcc	locret_C3CC


loc_C3C9:							; CODE XREF: clamp_rB+3-j
								; clamp_rD+2-j
				ld	d, y + 00h
				setc

locret_C3CC:							; CODE XREF: clamp_rD+8-j
				ret

; End of function clamp_rD


; *************** S U B	R O U T	I N E ***************************************


table_ect_pair_interpolate:					; CODE XREF: sub_CD14+19p
								; async_throttle_inject+1Ep ...
				ld	a, var_ect
; End of function table_ect_pair_interpolate


; *************** S U B	R O U T	I N E ***************************************


table_rA_pair_interpolate:					; CODE XREF: sub_C57A+904p
								; sub_D463+11p	...
				clr	b
; ***************************************************************************
				.db 8Ch
; ***************************************************************************

table_rpm_pair_interpolate:					; CODE XREF: sub_C57A+8F8p
								; sub_E996+19p	...
				ld	d, var_rpm_x_5p12
; End of function table_rA_pair_interpolate


; *************** S U B	R O U T	I N E ***************************************


sub_C3D3:							; CODE XREF: sub_C57A+82Cp
								; sub_E7D9+186p ...
				mov	d, x
				ld	a, [y]
				push	y
				add	y, a
				mov	x, d
				cmp	a, y + 00h
				bcs	loc_C3DF

				pull	x
				bra	loc_C3E4

; ***************************************************************************

loc_C3DF:							; CODE XREF: sub_C3D3+7-j
				pull	y
				cmp	a, y + 00h
				bcc	loc_C3EA


loc_C3E4:							; CODE XREF: sub_C3D3+A-j
								; sub_C3D3+2Fj
				ld	a, y + 01h
				clr	b
				ret

; ***************************************************************************

loc_C3E8:							; CODE XREF: sub_C3D3+19j
				inc	y
				inc	y

loc_C3EA:							; CODE XREF: sub_C3D3+F-j
				cmp	a, y + 02h
				bcc	loc_C3E8

				ld	a, y + 02h
				sub	a, y + 00h
				push	a
				mov	x, d
				sub	a, y + 00h
				mov	s, x
				div	d, x + 00h
				inc	s
				ld	a, y + 03h
				sub	a, y + 01h
				bcc	loc_C406

				neg	a
				neg	b
				beq	loc_C3E4

				inc	y
				inc	y

loc_C406:							; CODE XREF: sub_C3D3+2B-j
				push	b
				mov	s, x
				mul	a, x + 00h
				add	a, y + 01h
				inc	s
				ret

; End of function sub_C3D3


; *************** S U B	R O U T	I N E ***************************************


table_rD_fixed128_interpolate:					; CODE XREF: check_boost_limit+5p
								; check_boost_limit+18p
				shr	d
; End of function table_rD_fixed128_interpolate


; *************** S U B	R O U T	I N E ***************************************


table_rD_fixed64_interpolate:					; CODE XREF: sub_C57A+21D4p
								; sub_E7D9+Dp
				shr	d
				shr	d
				shr	d
				shr	d
; End of function table_rD_fixed64_interpolate


; *************** S U B	R O U T	I N E ***************************************

; Attributes: thunk

j_table_rD_fixed_interpolate:					; CODE XREF: sub_C57A+1DB9p
				bra	table_rD_fixed_interpolate

; End of function j_table_rD_fixed_interpolate

; ***************************************************************************
				shl	d

; *************** S U B	R O U T	I N E ***************************************


table_rD_fixed2_interpolate:					; CODE XREF: sub_E7D9+CEp
				shl	d

table_rD_fixed_interpolate:					; CODE XREF: j_table_rD_fixed_interpolate-j
				bsr	table_rD_clamp

				bra	sub_C438

; End of function table_rD_fixed2_interpolate


; *************** S U B	R O U T	I N E ***************************************


table_ect_fixed4_interpolate:					; CODE XREF: sub_CAC1+3p
								; sub_D463+1ADp
				ld	b, var_ect
; End of function table_ect_fixed4_interpolate


; *************** S U B	R O U T	I N E ***************************************


table_rB_fixed4_interpolate:					; CODE XREF: sub_EACB+71p

; FUNCTION CHUNK AT C428 SIZE 00000010 BYTES
; FUNCTION CHUNK AT C451 SIZE 00000004 BYTES

				ld	a, #04h
				bra	table_rB_fixed_rA_interpolate

; End of function table_rB_fixed4_interpolate


; *************** S U B	R O U T	I N E ***************************************


table_ect_fixed_32_interpolate:					; CODE XREF: sub_C57A+1DC0p
								; sub_C57A+21E0p ...
				ld	b, var_ect
; End of function table_ect_fixed_32_interpolate


; *************** S U B	R O U T	I N E ***************************************


table_rB_fixed_32_interpolate:					; CODE XREF: sub_C57A+5A6p
								; sub_C57A+5E8p ...
				ld	a, #08h
; ***************************************************************************
				.db 8Ch
; ***************************************************************************

table_rB_fixed_16_interpolate:					; CODE XREF: sub_C57A+6ACp
								; sub_D463+4Ep	...
				ld	a, #10h
; End of function table_rB_fixed_32_interpolate

; START	OF FUNCTION CHUNK FOR table_rB_fixed4_interpolate

table_rB_fixed_rA_interpolate:					; CODE XREF: table_rB_fixed4_interpolate+2-j
				sub	b, y + 00h
				bcs	loc_C451

				push	a
				cmp	b, y + 01h
				ble	loc_C433

				ld	b, y + 01h

loc_C433:							; CODE XREF: table_rB_fixed4_interpolate+12-j
				mov	s, x
				mov	b, a
				mul	a, x + 00h
				inc	s
; END OF FUNCTION CHUNK	FOR table_rB_fixed4_interpolate

; *************** S U B	R O U T	I N E ***************************************


sub_C438:							; CODE XREF: table_rD_fixed2_interpolate+3-j
								; map_rD_rX_interpolate+1Cp ...
				add	a, #02h
				add	y, a
; End of function sub_C438


; *************** S U B	R O U T	I N E ***************************************


sub_C43B:							; CODE XREF: map_rD_rX_interpolate+2Dj
								; sub_D14D+36p	...
				mov	b, a
				beq	loc_C44E

				push	b
				mov	s, x
				ld	a, y + 01h
				sub	a, y + 00h
				bcc	loc_C44B

				neg	a
				neg	b
				xch	b, x + 00h
				inc	y

loc_C44B:							; CODE XREF: sub_C43B+9-j
				mul	a, x + 00h
				inc	s

loc_C44E:							; CODE XREF: sub_C43B+1-j
				add	a, y + 00h
				ret

; End of function sub_C43B

; ***************************************************************************
; START	OF FUNCTION CHUNK FOR table_rB_fixed4_interpolate

loc_C451:							; CODE XREF: table_rB_fixed4_interpolate+D-j
				ld	a, y + 02h
				clr	b
				ret

; END OF FUNCTION CHUNK	FOR table_rB_fixed4_interpolate

; *************** S U B	R O U T	I N E ***************************************


table_rD_clamp:							; CODE XREF: table_rD_fixed2_interpolate:table_rD_fixed_interpolate-p
								; map_rD_rX_interpolatep ...
				sub	d, y + 00h
				bcc	loc_C45B

				clr	a
				clr	b

loc_C45B:							; CODE XREF: table_rD_clamp+2-j
				cmp	a, y + 02h
				bcs	loc_C462

				ld	a, y + 02h
				clr	b

loc_C462:							; CODE XREF: table_rD_clamp+8-j
				inc	y
				ret

; End of function table_rD_clamp


; *************** S U B	R O U T	I N E ***************************************


map_rD_32_rX_map_interpolate:					; CODE XREF: sub_E6E1+2Ap
				shr	d
; End of function map_rD_32_rX_map_interpolate


; *************** S U B	R O U T	I N E ***************************************


map_rD_16_rX_map_interpolate:					; CODE XREF: sub_C57A+844p
				shr	d
; End of function map_rD_16_rX_map_interpolate


; *************** S U B	R O U T	I N E ***************************************


map_rD_8_rX_map_interpolate:					; CODE XREF: sub_C57A+3E9p
				shr	d
				shr	d
				shr	d
; End of function map_rD_8_rX_map_interpolate


; *************** S U B	R O U T	I N E ***************************************


map_rD_rX_interpolate:						; CODE XREF: sub_D463+3B0p
								; sub_E6E1+1Dp
				bsr	table_rD_clamp

				push	x
				st	d, var_temp_w
				mov	y, d
				mov	d, x
				inc	y
				inc	y
				pull	d
				bsr	table_rD_clamp

				push	b
				ld	b, x + 01h
				inc	b
				push	b
				mov	s, x
				mul	a, x + 00h
				st	y, var_temp_7A
				add	d, var_temp_7A
				mov	d, y
				push	y
				ld	d, var_temp_w
				bsr	sub_C438

				st	a, var_temp_7A
				pull	y
				pull	b
				add	y, b
				ld	d, var_temp_w
				bsr	sub_C438

				st	a, var_temp_7B
				ld	y, #var_temp_7A
				pull	b
				bra	sub_C43B

; End of function map_rD_rX_interpolate


; *************** S U B	R O U T	I N E ***************************************


increment_counters:						; CODE XREF: sub_D133+Dp
								; sub_C57A+C20p ...
				ld	x, #0000h
				add	x, a

loc_C49C:							; CODE XREF: increment_counters+Dj
				ld	a, x + 00h
				inc	a
				beq	loc_C4A3

				inc	x + 00h

loc_C4A3:							; CODE XREF: increment_counters+7-j
				inc	x
				dec	b
				bne	loc_C49C

				ret

; End of function increment_counters


; *************** S U B	R O U T	I N E ***************************************


divide_rD_128:							; CODE XREF: sub_E3C8+51p
				shr	d
; End of function divide_rD_128


; *************** S U B	R O U T	I N E ***************************************


divide_rD_64:							; CODE XREF: sub_CD14:loc_CD30p
								; sub_D423+8p ...
				shr	d
; End of function divide_rD_64


; *************** S U B	R O U T	I N E ***************************************


divide_rD_32:							; CODE XREF: sub_E996+1Ep
				shr	d
; End of function divide_rD_32


; *************** S U B	R O U T	I N E ***************************************


divide_rD_16:							; CODE XREF: calc_rpm:loc_C8B6p
								; sub_D463+1Cp	...
				shr	d
; End of function divide_rD_16


; *************** S U B	R O U T	I N E ***************************************


divide_rD_8:							; CODE XREF: sub_C57A+AE4p
								; sub_D14D:loc_D165p ...
				shr	d
				shr	d
				shr	d
				ret

; End of function divide_rD_8


; *************** S U B	R O U T	I N E ***************************************


divide_rD_16_signed:						; CODE XREF: sub_C57A+36Bp
				shra	a
				rorc	b
				shra	a
				rorc	b
; End of function divide_rD_16_signed


; *************** S U B	R O U T	I N E ***************************************


divide_rD_4_signed:						; CODE XREF: sub_D463+34Cp
				shra	a
				rorc	b

divide_rD_2_signed:						; CODE XREF: ROM:FB79p
				shra	a
				rorc	b
				ret

; End of function divide_rD_4_signed


; *************** S U B	R O U T	I N E ***************************************


divide_rD_128_saturate:						; CODE XREF: sub_C57A+319p
				shr	d
; End of function divide_rD_128_saturate


; *************** S U B	R O U T	I N E ***************************************


divide_rD_64_saturate:						; CODE XREF: sub_C977+Cp
								; sub_C57A+2069p ...
				shr	d
; End of function divide_rD_64_saturate


; *************** S U B	R O U T	I N E ***************************************


divide_rD_32_saturate:						; CODE XREF: ROM:DD2Bp
								; sub_E3C8+3Bp	...
				shr	d
; End of function divide_rD_32_saturate


; *************** S U B	R O U T	I N E ***************************************


divide_rD_16_saturate:						; CODE XREF: sub_C8F4:loc_C902p
								; sub_D463+C5p	...
				shr	d
; End of function divide_rD_16_saturate


; *************** S U B	R O U T	I N E ***************************************


divide_rD_8_saturate:						; CODE XREF: ROM:loc_ED62p
								; ROM:ED7Fp
				shr	d
; End of function divide_rD_8_saturate


; *************** S U B	R O U T	I N E ***************************************


divide_rD_4_saturate:						; CODE XREF: ROM:DD34p
								; sub_E996+379p
				shr	d
; End of function divide_rD_4_saturate


; *************** S U B	R O U T	I N E ***************************************


divide_rD_2_saturate:						; CODE XREF: sub_EACB+22p
								; sub_E996:loc_EC29p
				shr	d
; End of function divide_rD_2_saturate


; *************** S U B	R O U T	I N E ***************************************


clamp_rD_FF:							; CODE XREF: sub_C57A+B8Bp
								; sub_E996:loc_EDACp
				cmpz	a
				beq	locret_C4C5

				ld	b, #0FFh

locret_C4C5:							; CODE XREF: clamp_rD_FF+1-j
				ret

; End of function clamp_rD_FF


; *************** S U B	R O U T	I N E ***************************************


set_knock_sensor_err_flag:					; CODE XREF: ROM:DB59p
								; ROM:DC24p ...
				setb	bit0, var_diag_errors_5
; End of function set_knock_sensor_err_flag


; *************** S U B	R O U T	I N E ***************************************


check_knock_sensor_err_flag:					; CODE XREF: sub_D463+F6p
								; sub_C57A+1F1Ap ...
				tbbc	bit0, var_diag_errors_5, locret_C4CF

; End of function check_knock_sensor_err_flag


; *************** S U B	R O U T	I N E ***************************************


negate_rD:							; CODE XREF: sub_C57A+B7Cp
								; sub_C57A:loc_D3AFp ...
				neg	a
				neg	b
				subc	a, #00h

locret_C4CF:							; CODE XREF: check_knock_sensor_err_flag-j
				ret

; End of function negate_rD


; *************** S U B	R O U T	I N E ***************************************


sub_C4D0:							; CODE XREF: sub_C57A+1EE1p
								; sub_C57A+1EF7p
				clr	a
				add	d, #0180h
; End of function sub_C4D0


; *************** S U B	R O U T	I N E ***************************************


sub_C4D4:							; CODE XREF: sub_E3C8+38p
								; sub_E3C8+5Ep
				bsr	mult_rDrX

				mov	y, d
				push	a
				mov	x, d
				shr	d
				and	a, #0FFh
				pull	a
				beq	loc_C4E3

				ld	d, #0FFFFh
				setc

loc_C4E3:							; CODE XREF: sub_C4D4+9-j
				xch	a, b
				rorc	b
				ret

; End of function sub_C4D4


; *************** S U B	R O U T	I N E ***************************************


mult_rDrX:							; CODE XREF: sub_C4D4-p
								; sub_C57A+13D5p ...
				push	d
				push	x
				mov	s, x
				mul	a, x + 00h
				mov	d, y
				ld	a, x + 00h
				mul	a, x + 03h
				add	y, a
				st	b, x + 00h
				ld	a, x + 01h
				mul	a, x + 03h
				st	b, x + 03h
				xch	a, x + 02h
				mul	a, x + 01h
				add	b, x + 00h
				addc	a, #00h
				add	y, a
				clr	a
				add	b, x + 02h
				rolc	a
				add	y, a
				st	b, x + 02h
				st	y, x + 00h
				ld	a, x + 00h
				beq	loc_C513

				ld	d, #0FFFFh
; ***************************************************************************
				.db 8Ch
; ***************************************************************************

loc_C513:							; CODE XREF: mult_rDrX+27-j
				ld	d, x + 01h
				pull	x
				pull	y
				ret

; End of function mult_rDrX


; *************** S U B	R O U T	I N E ***************************************


sub_C518:							; CODE XREF: sub_E7D9+19Ap
				mov	x, d
				cmpb	a, #0F8h
				beq	loc_C521

				ld	d, #7FFFh
				ret

; ***************************************************************************

loc_C521:							; CODE XREF: sub_C518+3-j
				shl	d
				shl	d
				shl	d
				shl	d
				shl	d
				mov	d, x
				mov	y, d
				mul	a, #20h
				add	x, a
				mov	x, d
				shr	d
				ret

; End of function sub_C518


; *************** S U B	R O U T	I N E ***************************************


mult_rBrX2:							; CODE XREF: sub_C57A+E4Dp
								; ROM:DC19p ...
				bsr	mult_rBrX

				rolc	b
				rolc	a
				bcc	loc_C537

				ld	d, #0FFFFh

loc_C537:							; CODE XREF: mult_rBrX2+4-j
				mov	d, x
				ret

; End of function mult_rBrX2


; *************** S U B	R O U T	I N E ***************************************


mult_rBrX:							; CODE XREF: mult_rBrX2-p
								; sub_C57A+1E12p ...
				mov	b, a
; End of function mult_rBrX


; *************** S U B	R O U T	I N E ***************************************
; Compute (rA * rX)/100h, result in rD and rX
; Used to scale a variable by some fraction 80h = 50%, 40h = 25%, and so on
mult_rArX:							; CODE XREF: sub_C54C+Ep
								; sub_C54C+1Ep	...
				push	x
				mov	s, x
				xch	a, x + 01h
				mul	a, x + 01h
				push	b
				xch	a, x + 01h
				mul	a, x + 00h
				mov	d, x
				pull	d
				pull	b
				add	x, b
				shl	a
				mov	x, d
				ret

; End of function mult_rArX


; *************** S U B	R O U T	I N E ***************************************


sub_C54C:							; CODE XREF: sub_C57A+1FE4p
								; sub_E712+Fp
				push	b
				mov	x, d
				sub	d, y + 00h
				beq	loc_C577

				bcc	loc_C568

				neg	a
				neg	b
				subc	a, #00h
				mov	d, x
				pull	a
				bsr	mult_rArX

				cmp	d, #0000h
				bne	loc_C562

				inc	b

loc_C562:							; CODE XREF: sub_C54C+13-j
				neg	a
				neg	b
				subc	a, #00h
				bra	loc_C572

; ***************************************************************************

loc_C568:							; CODE XREF: sub_C54C+6-j
				mov	d, x
				pull	a
				bsr	mult_rArX

				cmp	d, #0000h
				bne	loc_C572

				inc	b

loc_C572:							; CODE XREF: sub_C54C+1A-j
								; sub_C54C+23-j
				add	d, y + 00h
				st	d, y + 00h
; ***************************************************************************
				.db 8Ch
; ***************************************************************************

loc_C577:							; CODE XREF: sub_C54C+4-j
				inc	s
				mov	x, d
				ret

; End of function sub_C54C


; *************** S U B	R O U T	I N E ***************************************


sub_C57A:							; CODE XREF: sub_C57A+13EBp
								; sub_C57A+1415p ...

; FUNCTION CHUNK AT C646 SIZE 000001A2 BYTES
; FUNCTION CHUNK AT C84D SIZE 0000004D BYTES
; FUNCTION CHUNK AT C8C8 SIZE 0000002C BYTES
; FUNCTION CHUNK AT C917 SIZE 00000060 BYTES
; FUNCTION CHUNK AT C9B8 SIZE 000000FE BYTES
; FUNCTION CHUNK AT CAD4 SIZE 0000016B BYTES
; FUNCTION CHUNK AT CC48 SIZE 0000001B BYTES
; FUNCTION CHUNK AT CC7D SIZE 00000005 BYTES
; FUNCTION CHUNK AT CCA7 SIZE 0000003A BYTES
; FUNCTION CHUNK AT CD12 SIZE 00000002 BYTES
; FUNCTION CHUNK AT CD37 SIZE 00000002 BYTES
; FUNCTION CHUNK AT CD63 SIZE 00000002 BYTES
; FUNCTION CHUNK AT CD76 SIZE 0000005F BYTES
; FUNCTION CHUNK AT CE18 SIZE 00000240 BYTES
; FUNCTION CHUNK AT D05B SIZE 000000D8 BYTES
; FUNCTION CHUNK AT D189 SIZE 000000E8 BYTES
; FUNCTION CHUNK AT D27E SIZE 0000009E BYTES
; FUNCTION CHUNK AT D326 SIZE 00000009 BYTES
; FUNCTION CHUNK AT D34B SIZE 000000D8 BYTES
; FUNCTION CHUNK AT D460 SIZE 00000003 BYTES
; FUNCTION CHUNK AT D8BF SIZE 00000140 BYTES
; FUNCTION CHUNK AT DC84 SIZE 00000028 BYTES
; FUNCTION CHUNK AT DCBA SIZE 0000001B BYTES
; FUNCTION CHUNK AT DCDB SIZE 00000010 BYTES
; FUNCTION CHUNK AT E091 SIZE 00000003 BYTES
; FUNCTION CHUNK AT E2D7 SIZE 000000D2 BYTES
; FUNCTION CHUNK AT E3C6 SIZE 00000002 BYTES
; FUNCTION CHUNK AT E42D SIZE 00000080 BYTES
; FUNCTION CHUNK AT E4C2 SIZE 00000003 BYTES
; FUNCTION CHUNK AT E4FB SIZE 000001E0 BYTES
; FUNCTION CHUNK AT E741 SIZE 00000065 BYTES
; FUNCTION CHUNK AT E98B SIZE 0000000B BYTES

				ld	y, #0FFF8h
				push	d
				mov	x, d
				cmp	d, #0000h
				bne	loc_C589

				pull	x
				bra	loc_C5E0

; ***************************************************************************

loc_C587:							; CODE XREF: sub_C57A:loc_C589j
				dec	y
				shl	d

loc_C589:							; CODE XREF: sub_C57A+8-j
				bpz	loc_C587

				inc	y
				shr	d
				mov	d, x
				pull	d
				cmp	d, #0000h
				beq	loc_C5DB

				bmi	loc_C59A


loc_C596:							; CODE XREF: sub_C57A+1Ej
				inc	y
				shl	d
				bpz	loc_C596


loc_C59A:							; CODE XREF: sub_C57A+1A-j
				push	y
				xch	x, y
				inc	a
				push	d
				push	y
				mov	s, x
				beq	loc_C5AC

				mov	y, d
				div	d, x + 02h
				st	b, x + 00h
				clr	b
				div	d, x + 02h
				st	b, x + 01h

loc_C5AC:							; CODE XREF: sub_C57A+26-j
				mov	y, d
				dec	x + 02h
				div	d, x + 02h
				push	b
				clr	b
				div	d, x + 02h
				pull	a
				neg	x + 03h
				beq	loc_C5C7

				sub	d, x + 00h
				push	b
				mul	a, x + 03h
				mov	d, y
				pull	a
				mul	a, x + 03h
				add	y, a
				mov	y, d
				add	d, x + 00h

loc_C5C7:							; CODE XREF: sub_C57A+3E-j
				pull	x
				pull	x
				pull	y
				cmp	y, #0000h
				bpz	loc_C5D3


loc_C5CF:							; CODE XREF: sub_C57A+57j
				shr	d
				inc	y
				bmi	loc_C5CF


loc_C5D3:							; CODE XREF: sub_C57A+53-j
								; sub_C57A+5Fj
				beq	loc_C5E0

				shl	d
				bcs	loc_C5DB

				dec	y
				bra	loc_C5D3

; ***************************************************************************

loc_C5DB:							; CODE XREF: sub_C57A+18-j
								; sub_C57A+5C-j
				ld	d, #0FFFFh
				setc
; ***************************************************************************
				.db 41h
; ***************************************************************************

loc_C5E0:							; CODE XREF: sub_C57A+B-j
								; sub_C57A:loc_C5D3-j
				clrc
				ret

; End of function sub_C57A

; ***************************************************************************

				; public reset_vector
reset_vector:							; DATA XREF: ROM:FFFEo
				ld	#07h, OMODE		; Mode control Register
				di
				ld	#18h, ASR0P		; ASR0 pos edge	counter	value MSB
				ld	#00h, unk_1D
				ld	#30h, ASR0NL		; ASR0 neg edge	counter	value LSB
				ld	#0F4h, ASR0N		; ASR0 neg edge	counter	value MSB
				ld	#0F9h, TIMER3		; Timer	LSB (bit0~bit2)
				ld	d, #8000h + var_dma_rx_buffer
				st	d, ASR2			; ASR2 edge counter value MSB
				ld	d, #9000h + dmatx_pim2
				st	d, ASR3			; ASR3 edge counter value MSB
				ld	#0FCh, ASR1P		; ASR1 pos edge	counter	value MSB
				ld	#30h, SMRC_SIR		; Serial Master	Register Control
				ld	#0DDh, PORTA		; Port A Data Register
				clr	PORTAL			; Port A Latch
				ld	#0D9h, PORTB		; Port B Data Register
				clr	PBCS			; Port B Control Register
				ld	#03h, PORTD_ASRIN	; Port D Data Register / ASR Input Data
				ld	d, #0107h
				st	d, DDRA			; Port A i/o config
				ld	#0E3h, ASR0PL		; ASR0 pos edge	counter	value LSB
				ld	#3Fh, TAIT		; Timer	ASR Control
				ld	a, PORTD_ASRIN		; Port D Data Register / ASR Input Data
				and	a, #80h
				shr	a
				shr	a
				xor	a, TAIT			; Timer	ASR Control
				st	a, TAIT			; Timer	ASR Control
				ld	#00h, DOUT		; DOUT Data Register
				ld	#00h, DOM		; DOUT Control Register
				setb	bit2, SSD
				ld	a, SSD			; Serial Status	Data Register
				ld	a, SIDR_SODR		; Serial Input/Output Data Register
				clrb	bit3, SSD
				setb	bit1, SSD
				ld	#90h, SIDR_SODR		; Serial Input/Output Data Register
				clr	a
				clr	b
				st	d, IRQL			; Interrupt Request Flag MSB
				st	d, IMASK		; Interrupt Request Mask MSB
				setb	bit3, DOUT
				ld	s, #stack_top

clear_variables:
				clr	a
; START	OF FUNCTION CHUNK FOR sub_C57A
				clr	b
				ld	y, #unk_40

loc_C64A:							; CODE XREF: sub_C57A+D4j
				st	a, [y]
				cmp	y, #serial_diag_mode
				ble	loc_C64A

				ld	y, #var_diag_errors_4

loc_C653:							; CODE XREF: sub_C57A+DDj
				st	d, [y]
				cmp	y, #unk_241
				ble	loc_C653


loc_C659:							; CODE XREF: sub_E1E4+43j
				jsr	serial_diag_init

				setb	bit0, var_flags_46
				setb	bit5, unk_40
				ld	#0FFh, var_4ms_cnt_B1
				ld	#0FFh, unk_D1
				setb	bit3, var_flags_42
				setb	bit2, var_flags_42
				ld	#0FFh, unk_C3
				setb	bit6, var_flags_42
				ld	#00h, unk_41
				ld	a, #10h
				st	a, unk_FB
				ld	#0FFh, var_4ms_cnt_B3
				ld	a, #78h
				st	a, unk_142
				ld	d, #0080h
				st	d, unk_6B
				ld	#80h, unk_60
				ld	#0FFh, unk_AA
				ld	a, #80h
				st	a, unk_116
				ld	d, #0CCCDh
				st	d, unk_1BE
				st	d, unk_1C0
				ld	a, #0FFh
				st	a, unk_1C2
				ld	d, #0000h
				st	d, unk_1C3
				ld	#0FEh, unk_C0
				ld	#0FEh, unk_C1
				ld	a, #0F4h
				st	a, unk_1D7
				setb	bit2, var_ignition_flags
				ld	a, #0FEh
				st	a, unk_152
				ld	a, #0FFh
				st	a, unk_A6
				ld	a, #0FFh
				st	a, unk_155
				st	a, unk_156
				st	a, unk_157
				ld	a, #80h
				st	a, unk_14E
				dec	unk_A9
				ld	a, #0FFh
				st	a, unk_17F
				ld	a, #0F3h
				st	a, unk_18C
				ld	d, #08A4h
				st	d, unk_199
				ld	d, #0400h
				st	d, unk_1A7
				ld	a, var_nv_idle_trim
				st	a, var_idle_trim
				clr	a
				clr	b
				st	d, IRQL			; Interrupt Request Flag MSB
				ld	d, #0008h
				st	d, IMASK		; Interrupt Request Mask MSB
				ei
				clr	a
				st	a, unk_F7
				setb	bit1, SSD
				setc
				rolc	a
				st	a, SIDR_SODR		; Serial Input/Output Data Register

loc_C6F8:							; CODE XREF: sub_C57A:loc_C6F8j
				tbbc	bit1, var_flags_42, loc_C6F8

				jsr	check_io_inputs

				jsr	check_io_inputs

				jsr	copy_dma_tx

				clr	a
				clr	b
				st	d, IRQL			; Interrupt Request Flag MSB
				ld	d, #0004h
				st	d, IMASK		; Interrupt Request Mask MSB
				ei
				jsr	start_dma

				jsr	copy_diag_errors_3_to_4


loc_C714:							; DATA XREF: sub_C57A+C1Do
				tbbs	bit5, var_io_input1, loc_C722 ;	Jump if	in diagnostic check mode

				tbbc	bit6, var_io_input1, loc_C722 ;	Jump forward if	ODB stream not enabled

				setb	bit2, unk_40
				ld	a, var_diag_errors_4
				or	a, #0Ch
				st	a, var_diag_errors_4

loc_C722:							; CODE XREF: sub_C57A:loc_C714-j
								; sub_C57A+19D-j
				nop
				nop
				nop
				clr	a
				clr	b
				st	d, IRQL			; Interrupt Request Flag MSB

loc_C729:							; CODE XREF: sub_C57A+2419j
				clr	unk_AD
				clr	PBCS			; Port B Control Register
				ld	d, #unk_107
				st	d, DDRA			; Port A i/o config
				ld	s, #stack_top
				clrb	bit3, SSD
				ld	#30h, SMRC_SIR		; Serial Master	Register Control
				ld	#0F3h, DOM		; DOUT Control Register
				di
				ld	b, IMASKL		; Interrupt Request Mask LSB
				and	b, #0CEh
				or	b, #0CAh
				ld	a, #11h
				st	d, IMASK		; Interrupt Request Mask MSB
				ld	a, TAIT			; Timer	ASR Control
				and	a, #3Fh
				or	a, #1Fh
				st	a, TAIT			; Timer	ASR Control
				ld	a, unk_1D7
				and	a, #0F4h
				or	a, #74h
				st	a, unk_1D7
				st	a, ASR0N		; ASR0 neg edge	counter	value MSB
				ld	a, TIMER3		; Timer	LSB (bit0~bit2)
				and	a, #0F9h
				or	a, #79h
				st	a, TIMER3		; Timer	LSB (bit0~bit2)
				ei
				ld	#0E3h, ASR0PL		; ASR0 pos edge	counter	value LSB
				ld	#18h, ASR0P		; ASR0 pos edge	counter	value MSB
				ld	#0FCh, ASR1P		; ASR1 pos edge	counter	value MSB
				ld	#30h, ASR0NL		; ASR0 neg edge	counter	value LSB
				ld	#00h, unk_1D
				ld	d, #8000h + var_dma_rx_buffer
				st	d, ASR2			; ASR2 edge counter value MSB
				ld	d, #9000h + dmatx_pim2
				st	d, ASR3			; ASR3 edge counter value MSB
				tbbs	bit7, var_flags_46, loc_C78D

				tbbc	bit0, unk_40, loc_C78A

				tbbc	bit0, var_io_input1, loc_C78A

				tbbs	bit1, var_io_input1, loc_C78D


loc_C78A:							; CODE XREF: sub_C57A+207-j
								; sub_C57A+20A-j
				setb	bit2, SSD
; ***************************************************************************
				.db 8Ch
; ***************************************************************************

loc_C78D:							; CODE XREF: sub_C57A+204-j
								; sub_C57A+20D-j
				clrb	bit2, SSD
				tbs	bit5, RAMST		; Built-in RAM status
				bne	loc_C799

				clr	unk_BB
				clrb	bit2, DOUT
				clrb	bit6, unk_44

loc_C799:							; CODE XREF: sub_C57A+217-j
				tbbs	bit5, IRQLL, loc_C79F	; Interrupt Request Flag LSB

				tbbc	bit5, PORTD_ASRIN, loc_C7A3 ; Port D Data Register / ASR Input Data


loc_C79F:							; CODE XREF: sub_C57A:loc_C799-j
				clrb	bit5, IRQLL
				clr	unk_BA

loc_C7A3:							; CODE XREF: sub_C57A+222-j
				tbbc	bit0, var_io_input1, loc_C7A8

				clr	unk_BC

loc_C7A8:							; CODE XREF: sub_C57A:loc_C7A3-j
				tbbs	bit5, RAMST, loc_C7AE	; Built-in RAM status

				jmp	loc_C84D		; Bad Address

; ***************************************************************************

loc_C7AE:							; CODE XREF: sub_C57A:loc_C7A8-j
				tbs	bit7, RAMST		; Built-in RAM status
				beq	loc_C7DF

				cmp	#5Ah, var_nv_valid
				bne	loc_C7DF

				ld	y, #var_nv_tps

loc_C7BA:							; CODE XREF: sub_C57A+248j
				cmp	y, #nv_table_knock_info
				bcc	loc_C7C6

				ld	d, [y]
				add	a, b
				inc	a
				beq	loc_C7BA

				bra	loc_C7DF

; ***************************************************************************

loc_C7C6:							; CODE XREF: sub_C57A+243-j
				ld	y, #nv_diag_errors_1

loc_C7C9:							; CODE XREF: sub_C57A+257j
				cmp	y, #unk_9E
				bcc	loc_C7D5

				ld	d, [y]
				add	a, b
				inc	a
				beq	loc_C7C9

				bra	loc_C7DF

; ***************************************************************************

loc_C7D5:							; CODE XREF: sub_C57A+252-j
				ld	b, var_nv_tps
				ld	y, #nv_tps_limits
				jsr	y + 02h

				bcc	loc_C7E1


loc_C7DF:							; CODE XREF: sub_C57A+236-j
								; sub_C57A+23B-j ...
				bsr	clear_nv_ram


loc_C7E1:							; CODE XREF: sub_C57A+263-j
				tbbc	bit5, RAMST, loc_C7E6	; Built-in RAM status

				setb	bit0, var_flags_42

loc_C7E6:							; CODE XREF: sub_C57A:loc_C7E1-j
				bra	loc_C84D		; Bad Address

; END OF FUNCTION CHUNK	FOR sub_C57A

; *************** S U B	R O U T	I N E ***************************************


clear_nv_ram:							; CODE XREF: sub_C57A:loc_C7DF-p
								; sub_C57A:loc_D027p ...
				clr	var_nv_valid
				ld	d, #00FFh
				ld	y, #nv_diag_errors_1
				st	d, [y]
				st	d, [y]
				st	d, [y]
				clr	var_error_flags1
				clr	var_error_flags2
				ld	a, var_diag_errors_4
				and	a, #0Ch
				st	a, var_diag_errors_4
				clrb	bit4, var_flags_4D
				clrb	bit3, var_diag_errors_5
				clrb	bit1, var_flags_4D
				clrb	bit4, var_diag_errors_5
				clrb	bit5, var_diag_errors_5
				ld	d, #807Fh
				ld	y, #nv_unk_trim_86

loc_C80D:							; CODE XREF: clear_nv_ram+29j
				st	d, [y]
				cmp	y, #nv_unk_trim_94
				ble	loc_C80D

				ld	d, #00FFh
				st	d, nv_unk_trim_96
				ld	d, #619Eh
				tbbs	bit0, unk_40, loc_C821

				ld	d, #50AFh

loc_C821:							; CODE XREF: clear_nv_ram+33-j
				st	d, nv_unk_trim_98
				ld	d, #6699h
				st	d, var_nv_idle_trim
				st	a, var_idle_trim
				ld	a, unk_9E
				or	a, #01h
				st	a, unk_9E
				clr	a
				st	a, unk_9F
				ld	d, #0AE51h
				st	d, var_nv_tps
				di
				ld	d, #7373h
				st	d, nv_table_knock_info
				st	a, nv_table_knock_info+2
				ei
				ld	d, #5AA5h
				st	d, var_nv_valid
				clrb	bit0, var_flags_42
				ret

; End of function clear_nv_ram

; ***************************************************************************
; START	OF FUNCTION CHUNK FOR sub_C57A

loc_C84D:							; CODE XREF: sub_C57A+231-j
								; sub_C57A:loc_C7E6-j
				ld	a, unk_1D6		; Bad Address
				tbs	bit0, unk_41
				bne	loc_C858

				or	a, #02h
				bra	loc_C85A

; ***************************************************************************

loc_C858:							; CODE XREF: sub_C57A+2D8-j
				and	a, #0FDh

loc_C85A:							; CODE XREF: sub_C57A+2DC-j
				st	a, unk_1D6
				di
				cmp	#3Dh, unk_C3
				bcs	loc_C88E

				clr	a
				clr	b
				st	d, unk_74
				st	d, var_rpm_avg
				st	d, var_rpm_idle_unk_19D
				jsr	init_ne_counters

				clrb	bit0, DOUT
				ld	d, #0002h
				add	d, TIMER		; Timer	MSB (bit11~bit18)
				st	d, CPR0			; Timer	comparison #0 MSB
				clrb	bit4, DOUT
				clrb	bit5, DOUT
				clrb	bit6, DOUT
				clrb	bit7, DOUT
				clr	PORTAL			; Port A Latch
				clrb	bit4, var_limiter_flags
				clrb	bit5, unk_44
				ei
				clr	a
				clr	b
				st	a, unk_160
				bra	loc_C891

; ***************************************************************************

loc_C88E:							; CODE XREF: sub_C57A+2E7-j
				ei
				bsr	calc_rpm


loc_C891:							; CODE XREF: sub_C57A+312-j
				st	d, var_rpm_x_5p12
				jsr	divide_rD_128_saturate

				st	b, var_rpm_div_25
				bra	loc_C8C8

; END OF FUNCTION CHUNK	FOR sub_C57A

; *************** S U B	R O U T	I N E ***************************************


calc_rpm:							; CODE XREF: sub_C57A+315-p
								; sub_EACB+16p
				ld	d, var_ne_sum3
				cmp	a, #03h
				bcc	loc_C8A3

				ld	d, #0300h

loc_C8A3:							; CODE XREF: calc_rpm+4-j
								; DATA XREF: calc_rpm+1Fo
				ld	x, #divide_rD_64

loc_C8A6:							; CODE XREF: calc_rpm+11j
				cmpz	a
				bmi	loc_C8B6

				inc	x
				shl	d
				bra	loc_C8A6

; ***************************************************************************
				.db 0A4h, 84h, 6Ah, 55h, 43h, 34h, 27h,	1Ch, 12h
; ***************************************************************************

loc_C8B6:							; CODE XREF: calc_rpm+D-j
				jsr	divide_rD_16

				ld	y, #loc_C8A3
				push	x
				jsr	sub_C438

				shr	d
				add	a, #40h
				pull	x
				jsr	x + 00h

				shl	d
				ret

; End of function calc_rpm

; ***************************************************************************
; START	OF FUNCTION CHUNK FOR sub_C57A

loc_C8C8:							; CODE XREF: sub_C57A+31E-j
				ld	a, unk_1D6
				cmpb	a, #02h
				bne	loc_C8D1

				bra	loc_C8F2

; ***************************************************************************

loc_C8D1:							; CODE XREF: sub_C57A+353-j
				ld	d, var_rpm_x_5p12
				ld	x, unk_60
				bpz	loc_C8F0

				cmp	a, #09h
				bcs	loc_C8F0

				cmp	a, #19h
				bcc	loc_C8F0

				sub	d, unk_74
				beq	loc_C8F2

				rorc	a
				rorc	b
				jsr	divide_rD_16_signed

				cmp	d, #0000h
				bne	loc_C8EE

				inc	b

loc_C8EE:							; CODE XREF: sub_C57A+371-j
				add	d, unk_74

loc_C8F0:							; CODE XREF: sub_C57A+35B-j
								; sub_C57A+35F-j ...
				st	d, unk_74

loc_C8F2:							; CODE XREF: sub_C57A+355-j
								; sub_C57A+367-j
				bra	loc_C917

; END OF FUNCTION CHUNK	FOR sub_C57A

; *************** S U B	R O U T	I N E ***************************************


sub_C8F4:							; CODE XREF: sub_C57A+C23p
				clrb	bit0, var_diag_errors_5
				ld	d, var_rpm_avg
				sub	d, var_rpm_x_5p12
				bcc	loc_C902

				setb	bit0, var_diag_errors_5
				neg	a
				neg	b
				subc	a, #00h

loc_C902:							; CODE XREF: sub_C8F4+6-j
				jsr	divide_rD_16_saturate

				shr	b
				tbbc	bit0, var_diag_errors_5, loc_C90A

				neg	b

loc_C90A:							; CODE XREF: sub_C8F4+12-j
				add	b, #80h
				st	b, unk_5C
				ld	d, var_rpm_x_5p12
				add	d, var_rpm_avg
				rorc	a
				rorc	b
				st	d, var_rpm_avg
				ret

; End of function sub_C8F4

; ***************************************************************************
; START	OF FUNCTION CHUNK FOR sub_C57A

loc_C917:							; CODE XREF: sub_C57A:loc_C8F2-j
				ld	a, var_rpm_div_25
				cmp	a, #08h
				bcc	loc_C91F

				setb	bit0, var_flags_46

loc_C91F:							; CODE XREF: sub_C57A+3A1-j
				cmp	a, #10h
				bcs	loc_C925

				clrb	bit0, var_flags_46

loc_C925:							; CODE XREF: sub_C57A+3A7-j
				cmp	a, #0Ch
				bcc	loc_C92B

				setb	bit5, unk_40

loc_C92B:							; CODE XREF: sub_C57A+3AD-j
				cmp	a, #14h
				bcs	loc_C931

				clrb	bit5, unk_40

loc_C931:							; CODE XREF: sub_C57A+3B3-j
				tbbc	bit0, var_flags_46, loc_C936

				clr	unk_CB

loc_C936:							; CODE XREF: sub_C57A:loc_C931-j
				cmp	a, #08h
				bcs	loc_C941

				tbbs	bit5, unk_44, loc_C945

				cmp	a, #10h
				bcc	loc_C945


loc_C941:							; CODE XREF: sub_C57A+3BE-j
				clr	var_cnt_startup
				clr	var_cnt_E4

loc_C945:							; CODE XREF: sub_C57A+3C0-j
								; sub_C57A+3C5-j
				tbbc	bit2, var_flags_46, loc_C94B

				setb	bit0, unk_44
; ***************************************************************************
				.db 8Ch
; ***************************************************************************

loc_C94B:							; CODE XREF: sub_C57A:loc_C945-j
				clrb	bit0, unk_44
				tbbc	bit1, var_io_input1, loc_C971

				ld	a, #18h
				cmp	#92h, var_ect		; 25 deg
				bcs	loc_C966

				ld	b, unk_F5
				clr	a
				shl	d
				shl	d
				shl	d
				mov	d, x
				ld	d, var_rpm_x_5p12
				ld	y, #word_C21C
				jsr	map_rD_8_rX_map_interpolate


loc_C966:							; CODE XREF: sub_C57A+3DB-j
				cmp	a, var_4ms_cnt_B1
				bgt	loc_C973

				setb	bit2, var_flags_46
				ld	#0FEh, var_4ms_cnt_B1
				bra	loc_C975

; ***************************************************************************

loc_C971:							; CODE XREF: sub_C57A+3D3-j
				clr	var_4ms_cnt_B1

loc_C973:							; CODE XREF: sub_C57A+3EE-j
				clrb	bit2, var_flags_46

loc_C975:							; CODE XREF: sub_C57A+3F5-j
				bra	loc_C9B8

; END OF FUNCTION CHUNK	FOR sub_C57A

; *************** S U B	R O U T	I N E ***************************************


sub_C977:							; CODE XREF: ROM:FD73p
				tbbc	bit1, var_io_input1, loc_C99C

				tbbs	bit4, unk_47, loc_C99E

				tbbs	bit7, unk_40, loc_C999

				ld	d, var_tps_unk_14A
				jsr	divide_rD_64_saturate

				mov	b, a
				ld	b, unk_FB
				sub	a, b
				ble	loc_C98E

				inc	b
				dec	a

loc_C98E:							; CODE XREF: sub_C977+13-j
				rorc	a
				shra	a
				add	a, b
				cmp	a, #10h
				ble	loc_C997

				ld	a, #10h

loc_C997:							; CODE XREF: sub_C977+1C-j
				st	a, unk_FB

loc_C999:							; CODE XREF: sub_C977+6-j
				setb	bit4, unk_47
; ***************************************************************************
				.db 8Ch
; ***************************************************************************

loc_C99C:							; CODE XREF: sub_C977-j
				clrb	bit4, unk_47

loc_C99E:							; CODE XREF: sub_C977+3-j
				ld	b, unk_FB
				shr	b
				cmp	b, #04h
				bcc	loc_C9A7

				ld	b, #04h

loc_C9A7:							; CODE XREF: sub_C977+2C-j
				shr	b
				shr	b
				cmp	b, var_tps_unk_14A
				bgt	loc_C9B5

				tbs	bit4, unk_40
				beq	locret_C9B7

				clr	var_4ms_cnt_B1
; ***************************************************************************
				.db 8Ch
; ***************************************************************************

loc_C9B5:							; CODE XREF: sub_C977+35-j
				clrb	bit4, unk_40

locret_C9B7:							; CODE XREF: sub_C977+39-j
				ret

; End of function sub_C977

; ***************************************************************************
; START	OF FUNCTION CHUNK FOR sub_C57A

loc_C9B8:							; CODE XREF: sub_C57A:loc_C975-j
				ld	a, unk_1D2
				st	a, var_flags_4E
				tbbs	bit3, var_io_input1, loc_C9C4

				clr	unk_AF
				bra	loc_C9C9

; ***************************************************************************

loc_C9C4:							; CODE XREF: sub_C57A+443-j
				cmp	#26h, var_cnt_startup
				bcc	loc_C9CE


loc_C9C9:							; CODE XREF: sub_C57A+448-j
				tbbc	bit6, var_flags_46, loc_C9E5

				bra	loc_C9DB

; ***************************************************************************

loc_C9CE:							; CODE XREF: sub_C57A+44D-j
				tbbs	bit6, var_flags_46, loc_C9E3

				cmp	#31h, unk_AF
				bcs	loc_C9E5

				cmp	#26h, var_cnt_startup
				bcs	loc_C9E5


loc_C9DB:							; CODE XREF: sub_C57A+452-j
				tbs	bit6, var_flags_46
				beq	loc_C9E1

				clrb	bit6, var_flags_46

loc_C9E1:							; CODE XREF: sub_C57A+463-j
				setb	bit7, var_flags_4E

loc_C9E3:							; CODE XREF: sub_C57A:loc_C9CE-j
				clr	unk_AF

loc_C9E5:							; CODE XREF: sub_C57A:loc_C9C9-j
								; sub_C57A+45A-j ...
				clrb	bit6, unk_40
				setb	bit6, var_flags_42
				clrb	bit1, var_flags_4E
				ld	a, var_flags_4E
				st	a, unk_1D2
				jsr	sub_E3C8

				jsr	sub_E4C5

				jsr	sub_FBB7

				jsr	sub_D271

				ld	a, var_flags_43_copy_1D0
				st	a, var_flags_4E
				tbbc	bit0, var_limiter_flags, loc_CA07

				setb	bit3, unk_44
; ***************************************************************************
				.db 8Ch
; ***************************************************************************

loc_CA07:							; CODE XREF: sub_C57A+487-j
				clrb	bit3, unk_44
				clrb	bit5, var_flags_4E
				clrb	bit0, var_flags_4E
				ld	b, #0Ch
				cmp	#5Ch, var_cnt_startup
				bcc	loc_CA26

				tbbc	bit2, var_flags_46, loc_CA2E

				cmp	#0E1h, var_ect
				bcs	loc_CA2E

				cmp	#02h, var_speed_kph
				bgt	loc_CA2E

				clr	b
				setb	bit0, var_flags_4E
				bra	loc_CA2E

; ***************************************************************************

loc_CA26:							; CODE XREF: sub_C57A+498-j
				tbbs	bit0, var_limiter_flags, loc_CA2C

				tbbs	bit0, unk_44, loc_CA2E


loc_CA2C:							; CODE XREF: sub_C57A:loc_CA26-j
				ld	b, #0Ch

loc_CA2E:							; CODE XREF: sub_C57A+49A-j
								; sub_C57A+4A0-j ...
				ld	a, unk_142
				tbbs	bit0, var_flags_4E, loc_CA3C

				cmp	#19h, var_speed_kph
				bcc	loc_CA42

				tbbs	bit4, var_io_input1, loc_CA42


loc_CA3C:							; CODE XREF: sub_C57A+4B7-j
				cmp	a, #44h
				bcc	loc_CA42

				ld	a, #44h

loc_CA42:							; CODE XREF: sub_C57A+4BD-j
								; sub_C57A+4BF-j ...
				tbbs	bit0, var_limiter_flags, loc_CA6A

				add	a, b
				ld	b, #44h
				tbbs	bit0, var_flags_4E, loc_CA5D

				ld	b, #50h
				cmp	#11h, var_speed_kph
				bcs	loc_CA5D

				cmp	#1Eh, var_speed_kph
				bcc	loc_CA61

				tbbs	bit6, var_flags_46, loc_CA5D

				tbbs	bit4, var_io_input1, loc_CA61


loc_CA5D:							; CODE XREF: sub_C57A+4CE-j
								; sub_C57A+4D6-j ...
				cmp	a, b
				bcc	loc_CA61

				mov	b, a

loc_CA61:							; CODE XREF: sub_C57A+4DB-j
								; sub_C57A+4E0-j ...
				tbbc	bit2, var_flags_46, loc_CA8A

				cmp	a, var_rpm_div_25
				bgt	loc_CA8A

				bra	loc_CA93

; ***************************************************************************

loc_CA6A:							; CODE XREF: sub_C57A:loc_CA42-j
				tbbc	bit2, var_flags_46, loc_CA8A

				cmp	a, var_rpm_div_25
				ble	loc_CA78

				setb	bit5, var_flags_4E
				ld	#66h, unk_60
				bra	loc_CA8A

; ***************************************************************************

loc_CA78:							; CODE XREF: sub_C57A+4F5-j
				cmp	#2Ch, var_rpm_div_25
				bcc	loc_CA93

				cmp	#23h, var_speed_kph
				bcc	loc_CA93

				cmp	#8Bh, unk_5C
				bcs	loc_CA93

				jsr	overrun_end_injection_2


loc_CA8A:							; CODE XREF: sub_C57A:loc_CA61-j
								; sub_C57A+4EC-j ...
				jsr	sub_CD14

				clr	unk_C8
				clrb	bit0, var_limiter_flags
				bra	loc_CA98

; ***************************************************************************

loc_CA93:							; CODE XREF: sub_C57A+4EE-j
								; sub_C57A+501-j ...
				setb	bit0, var_limiter_flags
				ld	#80h, unk_60

loc_CA98:							; CODE XREF: sub_C57A+517-j
				ld	a, unk_60
				bmi	loc_CAB1

				tbbc	bit2, var_flags_46, loc_CAB1

				cmp	#0DCh, var_ect
				bcs	loc_CAB1

				cmp	#05h, var_speed_kph
				bcs	loc_CAB1

				cmp	#87h, unk_5C
				ble	loc_CAB4

				jsr	overrun_end_injection


loc_CAB1:							; CODE XREF: sub_C57A+520-j
								; sub_C57A+522-j ...
				ld	#80h, unk_60

loc_CAB4:							; CODE XREF: sub_C57A+532-j
				bra	loc_CAD4

; END OF FUNCTION CHUNK	FOR sub_C57A

; *************** S U B	R O U T	I N E ***************************************


sub_CAB6:							; CODE XREF: sub_C57A+C26p
				ld	a, unk_60
				add	a, #02h
				bpz	loc_CABE

				ld	a, #80h

loc_CABE:							; CODE XREF: sub_CAB6+4-j
				st	a, unk_60
				ret

; End of function sub_CAB6


; *************** S U B	R O U T	I N E ***************************************


sub_CAC1:							; CODE XREF: sub_C57A+1D7Cp
				ld	y, #table_ect_unk_C110
				jsr	table_ect_fixed4_interpolate

				tbbc	bit6, var_flags_46, loc_CAD0

				cmp	a, #3Ch
				bcc	loc_CAD0

				ld	a, #3Ch

loc_CAD0:							; CODE XREF: sub_CAC1+6-j
								; sub_CAC1+B-j
				st	a, unk_142
				ret

; End of function sub_CAC1

; ***************************************************************************
; START	OF FUNCTION CHUNK FOR sub_C57A

loc_CAD4:							; CODE XREF: sub_C57A:loc_CAB4-j
				jsr	sub_EEA1

				ld	d, var_inj_pw_inj1
				cmp	d, #00AFh
				ble	loc_CAE1

				clr	unk_D0

loc_CAE1:							; CODE XREF: sub_C57A+563-j
				ld	a, #40h
				tbbc	bit1, var_limiter_flags, loc_CAE8

				ld	a, #3Ch

loc_CAE8:							; CODE XREF: sub_C57A+569-j
				cmp	a, var_rpm_div_25
				bgt	loc_CAFB

				ld	a, unk_60
				bpz	loc_CAFB

				tbbs	bit0, var_limiter_flags, loc_CAFB

				ld	x, var_inj_pw_inj1
				cmp	x, #0120h
				bcs	loc_CB03


loc_CAFB:							; CODE XREF: sub_C57A+570-j
								; sub_C57A+574-j ...
				clr	unk_E5
				clrb	bit1, var_flags_4E
				clrb	bit1, var_limiter_flags
				bra	loc_CB36

; ***************************************************************************

loc_CB03:							; CODE XREF: sub_C57A+57F-j
				cmp	x, #00E1h
				bcc	loc_CB0A

				setb	bit1, var_flags_4E

loc_CB0A:							; CODE XREF: sub_C57A+58C-j
				cmp	x, #0120h
				bcs	loc_CB11

				clrb	bit1, var_flags_4E

loc_CB11:							; CODE XREF: sub_C57A+593-j
				cmp	#0Ah, var_speed_kph
				bcs	loc_CB19

				tbbs	bit1, var_flags_4E, loc_CB1B


loc_CB19:							; CODE XREF: sub_C57A+59A-j
				clr	unk_E5

loc_CB1B:							; CODE XREF: sub_C57A+59C-j
				ld	b, var_rpm_div_25
				ld	y, #table_rpm_unk_C116
				jsr	table_rB_fixed_32_interpolate

				cmp	a, unk_D0
				ble	loc_CB34

				ld	a, #05h
				cmp	#78h, var_rpm_div_25
				bcc	loc_CB30

				ld	a, #14h

loc_CB30:							; CODE XREF: sub_C57A+5B2-j
				cmp	a, unk_E5
				bgt	loc_CB36


loc_CB34:							; CODE XREF: sub_C57A+5AB-j
				setb	bit1, var_limiter_flags

loc_CB36:							; CODE XREF: sub_C57A+587-j
								; sub_C57A+5B8-j
				cmp	#0Ah, var_speed_kph
				bcc	loc_CB41

				cmp	#3Ch, var_rpm_div_25
				bcc	loc_CB45

; ***************************************************************************
				.db 8Ch
; ***************************************************************************

loc_CB41:							; CODE XREF: sub_C57A+5BF-j
				clrb	bit3, var_flags_4E
				clrb	bit4, var_flags_4E

loc_CB45:							; CODE XREF: sub_C57A+5C4-j
				tbbs	bit6, var_limiter_flags, loc_CB69

				cmp	#0DCh, var_ect
				bcs	loc_CB69

				cmp	#00h, var_speed_kph
				bne	loc_CB69

				tbbs	bit3, var_error_flags1,	loc_CB69

				ld	b, var_rpm_x_5p12
				cmp	b, #18h
				bcs	loc_CB69

				cmp	b, #64h
				bcc	loc_CB69

				ld	y, #unk_C1AA
				jsr	table_rB_fixed_32_interpolate

				cmp	a, var_pim2
				ble	loc_CB6D


loc_CB69:							; CODE XREF: sub_C57A:loc_CB45-j
								; sub_C57A+5D1-j ...
				clr	unk_C9
				bra	loc_CB76

; ***************************************************************************

loc_CB6D:							; CODE XREF: sub_C57A+5ED-j
				cmp	#0F4h, unk_C9
				bcs	loc_CB76

				setb	bit4, var_flags_4E
				setb	bit3, var_flags_4E

loc_CB76:							; CODE XREF: sub_C57A+5F1-j
								; sub_C57A+5F6-j
				tbbs	bit0, unk_40, loc_CB9B

				ld	d, #3C46h
				ld	x, var_ect
				cmp	x, #0F300h
				bcs	loc_CB86

				ld	d, #2832h

loc_CB86:							; CODE XREF: sub_C57A+607-j
				st	d, var_temp_w
				cmp	#0DCh, var_ect
				bcs	loc_CB9B

				tbbs	bit2, var_flags_46, loc_CB9B

				cmp	#0Ah, var_speed_kph
				bcc	loc_CB9B

				tbbs	bit4, var_flags_4E, loc_CB9B

				tbbs	bit6, var_flags_42, loc_CBA3


loc_CB9B:							; CODE XREF: sub_C57A:loc_CB76-j
								; sub_C57A+611-j ...
				clr	a
				st	a, unk_68

loc_CB9E:							; CODE XREF: sub_C57A+636j
				jsr	reset_rev_limiter

				bra	loc_CBD9

; ***************************************************************************

loc_CBA3:							; CODE XREF: sub_C57A+61E-j
				ld	b, var_rpm_x_5p12
				ld	a, unk_68
				cmp	a, #0FFh
				bcc	loc_CBB5

				ld	a, #94h
				cmp	a, b
				ble	loc_CBBD

				tbbc	bit6, var_limiter_flags, loc_CB9E

				bra	loc_CBC7

; ***************************************************************************

loc_CBB5:							; CODE XREF: sub_C57A+62F-j
				ld	a, var_rpm_avg
				cmp	b, unk_79
				bcs	loc_CBBD

				setb	bit2, var_flags_4E

loc_CBBD:							; CODE XREF: sub_C57A+634-j
								; sub_C57A+63F-j
				tbs	bit6, var_limiter_flags
				bne	loc_CBC7

				clr	unk_C7
				ld	b, #00h
				bra	loc_CBCA

; ***************************************************************************

loc_CBC7:							; CODE XREF: sub_C57A+639-j
								; sub_C57A+645-j
				ld	d, var_rpm_limit

loc_CBCA:							; CODE XREF: sub_C57A+64B-j
				cmp	a, var_temp_w
				bcc	loc_CBD0

				ld	a, var_temp_w

loc_CBD0:							; CODE XREF: sub_C57A+652-j
				cmp	b, #1Eh
				ble	loc_CBD6

				ld	b, #1Eh

loc_CBD6:							; CODE XREF: sub_C57A+658-j
				st	d, var_rpm_limit

loc_CBD9:							; CODE XREF: sub_C57A+627-j
				tbbc	bit2, var_limiter_flags, loc_CBE5

				sub	a, unk_144
				cmp	a, #1Eh
				bcc	loc_CBE5

				ld	a, #1Eh

loc_CBE5:							; CODE XREF: sub_C57A:loc_CBD9-j
								; sub_C57A+667-j
				cmp	a, var_rpm_x_5p12
				bgt	loc_CBEE

				setb	bit2, var_limiter_flags
				setb	bit2, var_flags_4E
; ***************************************************************************
				.db 8Ch
; ***************************************************************************

loc_CBEE:							; CODE XREF: sub_C57A+66D-j
				clrb	bit2, var_limiter_flags
				cmp	#3Dh, unk_C7
				bcs	loc_CC3D

				clr	unk_C7
				tbbc	bit2, var_flags_4E, loc_CC11

				tbbc	bit6, var_limiter_flags, loc_CC14

				ld	d, var_rpm_limit
				sub	a, #01h
				bcc	loc_CC06

				ld	a, var_temp_w

loc_CC06:							; CODE XREF: sub_C57A+688-j
				add	b, #01h
				bcc	loc_CC0C

				ld	b, #1Eh

loc_CC0C:							; CODE XREF: sub_C57A+68E-j
				st	d, var_rpm_limit
				bra	loc_CC3B

; ***************************************************************************

loc_CC11:							; CODE XREF: sub_C57A+67D-j
				jsr	reset_rev_limiter


loc_CC14:							; CODE XREF: sub_C57A+680-j
				ld	a, unk_79
				cmp	a, var_rpm_x_5p12
				ble	loc_CC21

				ld	a, unk_68
				beq	loc_CC1F

				dec	a

loc_CC1F:							; CODE XREF: sub_C57A+6A2-j
				bra	loc_CC39

; ***************************************************************************

loc_CC21:							; CODE XREF: sub_C57A+69E-j
				ld	y, #unk_C1B0
				ld	b, var_rpm_x_5p12
				jsr	table_rB_fixed_16_interpolate

				ld	x, var_ect
				cmp	x, #0F5C0h
				bcs	loc_CC33

				shl	a
				bcs	loc_CC37


loc_CC33:							; CODE XREF: sub_C57A+6B4-j
				add	a, unk_68
				bcc	loc_CC39


loc_CC37:							; CODE XREF: sub_C57A+6B7-j
				ld	a, #0FFh

loc_CC39:							; CODE XREF: sub_C57A:loc_CC1F-j
								; sub_C57A+6BB-j
				st	a, unk_68

loc_CC3B:							; CODE XREF: sub_C57A+695-j
				clrb	bit2, var_flags_4E

loc_CC3D:							; CODE XREF: sub_C57A+679-j
				bra	check_clear_speed_limiter

; END OF FUNCTION CHUNK	FOR sub_C57A

; *************** S U B	R O U T	I N E ***************************************


reset_rev_limiter:						; CODE XREF: sub_C57A:loc_CB9E-p
								; sub_C57A:loc_CC11-p
				clrb	bit6, var_limiter_flags
				ld	d, #9400h
				st	d, var_rpm_limit
				ret

; End of function reset_rev_limiter

; ***************************************************************************
; START	OF FUNCTION CHUNK FOR sub_C57A

check_clear_speed_limiter:					; CODE XREF: sub_C57A:loc_CC3D-j
				jsr	sub_EE1D

				tbbc	bit3, var_limiter_flags, loc_CC5F

				cmp	#0B4h, var_speed_kph
				bcc	loc_CC58

				cmp	#08h, unk_DB
				bcc	loc_CC5D


loc_CC58:							; CODE XREF: sub_C57A+6D7-j
				cmp	#28h, var_rpm_x_5p12
				bcc	loc_CC61


loc_CC5D:							; CODE XREF: sub_C57A+6DC-j
				clrb	bit3, var_limiter_flags

loc_CC5F:							; CODE XREF: sub_C57A+6D1-j
				clr	unk_DB

loc_CC61:							; CODE XREF: sub_C57A+6E1-j
				bra	loc_CC7D

; END OF FUNCTION CHUNK	FOR sub_C57A

; *************** S U B	R O U T	I N E ***************************************


check_set_speed_limiter:					; CODE XREF: iv6_4ms_process+74p
				clr	a
				cmp	#0B4h, var_speed_kph
				bcs	loc_CC6F

				ld	a, unk_6E
				inc	a
				bne	loc_CC6F

				dec	a

loc_CC6F:							; CODE XREF: check_set_speed_limiter+4-j
								; check_set_speed_limiter+9-j
				st	a, unk_6E
				cmp	a, #06h
				bcs	locret_CC7C

				cmp	#50h, var_rpm_x_5p12
				bcs	locret_CC7C

				setb	bit3, var_limiter_flags

locret_CC7C:							; CODE XREF: check_set_speed_limiter+10-j
								; check_set_speed_limiter+15-j
				ret

; End of function check_set_speed_limiter

; ***************************************************************************
; START	OF FUNCTION CHUNK FOR sub_C57A

loc_CC7D:							; CODE XREF: sub_C57A:loc_CC61-j
				jsr	sub_EE08

				bra	loc_CCA7

; END OF FUNCTION CHUNK	FOR sub_C57A

; *************** S U B	R O U T	I N E ***************************************


check_boost_limit:						; CODE XREF: ROM:loc_FBD6p
				ld	y, #table_boost_limit
				ld	d, var_rpm_x_5p12
				jsr	table_rD_fixed128_interpolate

				tbbc	bit7, var_limiter_flags, loc_CC8F

				sub	a, #0Dh

loc_CC8F:							; CODE XREF: check_boost_limit+8-j
				cmp	a, var_pim2
				ble	loc_CC95

				clr	var_4ms_boost_cnt

loc_CC95:							; CODE XREF: check_boost_limit+F-j
				ld	y, #table_boost_limit_time
				ld	d, var_rpm_x_5p12
				jsr	table_rD_fixed128_interpolate

				cmp	a, var_4ms_boost_cnt
				bgt	loc_CCA4

				setb	bit7, var_limiter_flags
; ***************************************************************************
				.db 8Ch
; ***************************************************************************

loc_CCA4:							; CODE XREF: check_boost_limit+1D-j
				clrb	bit7, var_limiter_flags
				ret

; End of function check_boost_limit

; ***************************************************************************
; START	OF FUNCTION CHUNK FOR sub_C57A

loc_CCA7:							; CODE XREF: sub_C57A+706-j
				tbbc	bit7, var_limiter_flags, loc_CCB3

				cmp	#18h, var_4ms_boost_cut_cnt
				bcs	loc_CCB5

				setb	bit7, var_flags_4E
				bra	loc_CCB7

; ***************************************************************************

loc_CCB3:							; CODE XREF: sub_C57A:loc_CCA7-j
				clr	var_4ms_boost_cut_cnt

loc_CCB5:							; CODE XREF: sub_C57A+733-j
				clrb	bit7, var_flags_4E

loc_CCB7:							; CODE XREF: sub_C57A+737-j
				ld	a, var_flags_4E
				st	a, var_flags_43_copy_1D0
				tbbs	bit0, var_io_input1, loc_CCC1

				clr	var_4ms_cnt_starter

loc_CCC1:							; CODE XREF: sub_C57A+742-j
				tbbc	bit0, var_flags_46, loc_CCDD

				tbbs	bit1, unk_40, loc_CCDD

				cmp	#0C4h, var_ect
				bcc	loc_CCDF

				cmp	#46h, var_adc_battery
				bcs	loc_CCDF

				cmp	#0Ch, var_4ms_cnt_starter
				bcs	loc_CCDF

				ld	d, var_inj_pw_inj1
				shr	d
				jsr	injectors_batch_update


loc_CCDD:							; CODE XREF: sub_C57A:loc_CCC1-j
								; sub_C57A+74A-j
				setb	bit1, unk_40

loc_CCDF:							; CODE XREF: sub_C57A+750-j
								; sub_C57A+755-j ...
				bra	loc_CD12

; END OF FUNCTION CHUNK	FOR sub_C57A

; *************** S U B	R O U T	I N E ***************************************


injector_cold_start:						; CODE XREF: iv6_ne_processp
				tbs	bit4, var_flags_42
				bne	locret_CD11

				tbbc	bit0, var_flags_46, loc_CD0F

				tbbs	bit1, unk_40, loc_CD0F

				cmp	#0B3h, var_ect		; 41 deg
				bcs	locret_CD11

				ld	d, var_ect
				cmp	d, #0F5C0h		; 120 deg
				bcs	loc_CCFC

				cmp	#3Dh, var_4ms_cnt_starter
				bcs	locret_CD11


loc_CCFC:							; CODE XREF: injector_cold_start+14-j
				cmp	#0E0h, var_tha		; 76 deg
				bcc	locret_CD11

				ld	d, #04E2h		; Start	injector pulse
				cmp	#0DCh, var_ect		; 71 deg
				bcc	loc_CD0C

				ld	d, #09C4h		; Cold start injector pulse

loc_CD0C:							; CODE XREF: injector_cold_start+26-j
				jsr	injectors_batch_update


loc_CD0F:							; CODE XREF: injector_cold_start+4-j
								; injector_cold_start+7-j
				setb	bit1, unk_40

locret_CD11:							; CODE XREF: injector_cold_start+2-j
								; injector_cold_start+D-j ...
				ret

; End of function injector_cold_start

; ***************************************************************************
; START	OF FUNCTION CHUNK FOR sub_C57A

loc_CD12:							; CODE XREF: sub_C57A:loc_CCDF-j
				bra	loc_CD37

; END OF FUNCTION CHUNK	FOR sub_C57A

; *************** S U B	R O U T	I N E ***************************************


sub_CD14:							; CODE XREF: sub_C57A:loc_CA8A-p
				tbbs	bit0, var_flags_46, locret_CD36

				tbbc	bit0, unk_44, locret_CD36

				tbbs	bit2, var_flags_46, locret_CD36

				tbbc	bit0, var_limiter_flags, loc_CD2A

				ld	y, #byte_C19B
				ld	b, var_rpm_div_25
				jsr	table_rB_fixed_32_interpolate

				bra	loc_CD30

; ***************************************************************************

loc_CD2A:							; CODE XREF: sub_CD14+9-j
				ld	y, #unk_C1A1
				jsr	table_ect_pair_interpolate


loc_CD30:							; CODE XREF: sub_CD14+14-j
				jsr	divide_rD_64

				jsr	injectors_batch_update


locret_CD36:							; CODE XREF: sub_CD14-j
								; sub_CD14+3-j ...
				ret

; End of function sub_CD14

; ***************************************************************************
; START	OF FUNCTION CHUNK FOR sub_C57A

loc_CD37:							; CODE XREF: sub_C57A:loc_CD12-j
				bra	loc_CD63

; END OF FUNCTION CHUNK	FOR sub_C57A

; *************** S U B	R O U T	I N E ***************************************


async_throttle_inject:						; CODE XREF: ROM:FD79p
				ld	a, var_tps_delta	; Get TPS delta
				bpz	loc_CD3F		; Jump if positive or 0

				clrb	bit3, unk_40		; Clear	async throttle flag

loc_CD3F:							; CODE XREF: async_throttle_inject+2-j
				cmp	a, #0Eh			; Check	if delta is less than 14
				blta	locret_CD62		; Jump if so, it's not worth injecting fuel

				cmp	#0A0h, var_rpm_div_25	; Check	if RPM is greater than 4000rpm
				bcc	locret_CD62		; Jump is so, not worth	injecting fuel

				cmp	#0Eh, var_tps		; Check	if TPS is not open enough
				bcs	locret_CD62		; Jump is so, not worth	injecting fuel

				tbbs	bit0, var_flags_46, locret_CD62	; Test and set async throttle flag

				tbs	bit3, unk_40		; Jump if flag already set
				bne	locret_CD62

				ld	y, #table_ect_inj_throttle_pump
				jsr	table_ect_pair_interpolate

				shr	d
				shr	d
				shr	d
				shr	d
				shr	d
				jsr	injectors_batch_update


locret_CD62:							; CODE XREF: async_throttle_inject+8-j
								; async_throttle_inject+D-j ...
				ret

; End of function async_throttle_inject

; ***************************************************************************
; START	OF FUNCTION CHUNK FOR sub_C57A

loc_CD63:							; CODE XREF: sub_C57A:loc_CD37-j
				bra	loc_CD76

; END OF FUNCTION CHUNK	FOR sub_C57A

; *************** S U B	R O U T	I N E ***************************************


overrun_end_injection_2:					; CODE XREF: sub_C57A+50D-p
				ld	d, #00FAh
				bra	loc_CD72

; End of function overrun_end_injection_2


; *************** S U B	R O U T	I N E ***************************************
overrun_end_injection:		cmp	#8Bh, unk_5C
				bcs	locret_CD75
				ld	d, #00FAh
loc_CD72:							; CODE XREF: overrun_end_injection_2+3-j
				jsr	injectors_batch_update


locret_CD75:							; CODE XREF: overrun_end_injection+3-j
				ret

; End of function overrun_end_injection

; ***************************************************************************
; START	OF FUNCTION CHUNK FOR sub_C57A

loc_CD76:							; CODE XREF: sub_C57A:loc_CD63-j
				ld	a, unk_1CB
				st	a, var_flags_4E
				ld	a, #80h
				tbbs	bit2, unk_44, loc_CD87

				clrb	bit0, var_flags_4E
				st	a, unk_116
				bra	loc_CDC6

; ***************************************************************************

loc_CD87:							; CODE XREF: sub_C57A+803-j
				cmp	#8Ch, var_rpm_x_5p12
				bcc	loc_CDC1

				cmp	#0Ah, var_tps
				bcs	loc_CDC1

				tbbc	bit2, var_flags_4D, loc_CDC1

				cmp	#0E4h, var_ect
				ble	loc_CDC4

				cmp	#50h, var_rpm_x_5p12
				bcs	loc_CDC4

				tbbs	bit0, var_flags_4E, loc_CDC4

				ld	y, #unk_C1C9
				ld	d, var_tps
				jsr	sub_C3D3

				cmp	a, unk_CE
				bcc	loc_CDC4

				ld	a, unk_231
				cmp	a, #04h
				bcs	loc_CDC4

				clrb	bit1, var_flags_4E
				ld	y, #map_fuel_scale_rpm
				mul	a, #14h
				mov	d, x
				ld	d, var_rpm_x_5p12
				jsr	map_rD_16_rX_map_interpolate


loc_CDC1:							; CODE XREF: sub_C57A+810-j
								; sub_C57A+815-j ...
				st	a, unk_116

loc_CDC4:							; CODE XREF: sub_C57A+81D-j
								; sub_C57A+822-j ...
				setb	bit0, var_flags_4E

loc_CDC6:							; CODE XREF: sub_C57A+80B-j
				ld	a, unk_116
				cmp	a, #80h
				bne	loc_CDD3

				tbs	bit1, var_flags_4E
				bne	loc_CDD3

				clr	unk_CE

loc_CDD3:							; CODE XREF: sub_C57A+851-j
								; sub_C57A+855-j
				bra	loc_CE18

; END OF FUNCTION CHUNK	FOR sub_C57A

; *************** S U B	R O U T	I N E ***************************************


sub_CDD5:							; CODE XREF: iv6_ne_process+36Dp
				ld	a, unk_116
				bmi	locret_CDE7

				add	a, #13h
				cmp	a, #80h
				bcs	loc_CDE4

				ld	a, #80h
				clr	unk_CE

loc_CDE4:							; CODE XREF: sub_CDD5+9-j
				st	a, unk_116

locret_CDE7:							; CODE XREF: sub_CDD5+3-j
				ret

; End of function sub_CDD5


; *************** S U B	R O U T	I N E ***************************************


sub_CDE8:							; CODE XREF: ROM:FD76p
				ld	a, var_tps_delta
				cmp	a, #0F0h
				blta	loc_CDF5

				cmp	a, #0F4h
				blta	loc_CDF7

				clrb	bit2, unk_44
; ***************************************************************************
				.db 8Ch
; ***************************************************************************

loc_CDF5:							; CODE XREF: sub_CDE8+4-j
				setb	bit2, unk_44

loc_CDF7:							; CODE XREF: sub_CDE8+8-j
				mov	a, b
				sub	a, unk_117
				bvc	loc_CE04

				bcs	loc_CE02

				ld	a, #80h
; ***************************************************************************
				.db 8Ch
; ***************************************************************************

loc_CE02:							; CODE XREF: sub_CDE8+15-j
				ld	a, #7Fh

loc_CE04:							; CODE XREF: sub_CDE8+13-j
				st	a, unk_118
				st	b, unk_117
				cmp	a, #0F4h
				blta	loc_CE15

				cmp	a, #0F8h
				blta	locret_CE17

				clrb	bit2, var_flags_4D
; ***************************************************************************
				.db 8Ch
; ***************************************************************************

loc_CE15:							; CODE XREF: sub_CDE8+24-j
				setb	bit2, var_flags_4D

locret_CE17:							; CODE XREF: sub_CDE8+28-j
				ret

; End of function sub_CDE8

; ***************************************************************************
; START	OF FUNCTION CHUNK FOR sub_C57A

loc_CE18:							; CODE XREF: sub_C57A:loc_CDD3-j
				cmp	#0DFh, var_ect
				bcc	loc_CE25

				cmp	#0DAh, var_ect
				bcc	loc_CE27

				clrb	bit2, var_flags_4E
; ***************************************************************************
				.db 8Ch
; ***************************************************************************

loc_CE25:							; CODE XREF: sub_C57A+8A1-j
				setb	bit2, var_flags_4E

loc_CE27:							; CODE XREF: sub_C57A+8A6-j
				tbbs	bit2, var_flags_46, loc_CE2C

				clr	unk_D1

loc_CE2C:							; CODE XREF: sub_C57A:loc_CE27-j
				cmp	#1Fh, unk_D1
				bcc	loc_CE36

				cmp	#52h, var_tps
				bcs	loc_CE38


loc_CE36:							; CODE XREF: sub_C57A+8B5-j
				clrb	bit3, var_flags_4E

loc_CE38:							; CODE XREF: sub_C57A+8BA-j
				clr	b
				tbbs	bit0, var_io_input1, loc_CE76

				tbbs	bit0, var_flags_46, loc_CE76

				tbbc	bit2, var_flags_4E, loc_CE76

				tbbs	bit2, var_flags_46, loc_CE76

				cmp	#19h, var_speed_kph
				bcs	loc_CE76

				ld	a, var_limiter_flags
				cmpb	a, #9Fh
				bne	loc_CE76

				cmp	#0FAh, var_speed_kph
				bcs	loc_CE79

				cmp	#2Ch, var_rpm_x_5p12
				bcs	loc_CE79

				cmp	#0F6h, var_tps_delta
				bgta	loc_CE79

				cmp	#48h, var_tps
				bgt	loc_CE79

				ld	a, unk_202
				cmp	a, #61h
				ble	loc_CE79

				tbs	bit3, var_flags_4E
				bne	loc_CE79

				ld	y, #unk_C1D2
				jsr	table_rpm_pair_interpolate

				mov	a, b

loc_CE76:							; CODE XREF: sub_C57A+8BF-j
								; sub_C57A+8C2-j ...
				st	b, unk_119

loc_CE79:							; CODE XREF: sub_C57A+8D9-j
								; sub_C57A+8DE-j ...
				ld	a, var_tps
				ld	y, #unk_C1DD
				jsr	table_rA_pair_interpolate

				mul	a, unk_119
				st	a, unk_11A
				di
				ld	a, unk_1D5
				mov	a, b
				and	b, #0FEh
				st	b, unk_1D5
				ei
				cmpb	a, #01h
				beq	loc_CEA1

				ld	b, unk_119
				sub	b, #13h
				bcc	loc_CE9E

				clr	b

loc_CE9E:							; CODE XREF: sub_C57A+921-j
				st	b, unk_119

loc_CEA1:							; CODE XREF: sub_C57A+91A-j
				ld	a, unk_1D4
				st	a, var_flags_4F
				ld	a, var_adc_lambda
				bmi	loc_CEAC

				clr	unk_B7

loc_CEAC:							; CODE XREF: sub_C57A+92E-j
				tbbs	bit0, var_flags_46, loc_CEBD

				tbbs	bit5, var_error_flags2,	loc_CEBD

				tbbs	bit6, var_error_flags2,	loc_CEBD

				cmp	#31h, unk_B7
				bcs	loc_CEBF

				setb	bit0, var_flags_4F
; ***************************************************************************
				.db 8Ch
; ***************************************************************************

loc_CEBD:							; CODE XREF: sub_C57A:loc_CEAC-j
								; sub_C57A+935-j ...
				clrb	bit0, var_flags_4F

loc_CEBF:							; CODE XREF: sub_C57A+93E-j
				clrb	bit5, var_flags_4F
				ld	a, var_limiter_flags
				and	a, #9Fh
				beq	check_open_or_closed_loop

				clr	unk_CC
; ***************************************************************************
				.db 8Ch
; ***************************************************************************

check_open_or_closed_loop:					; CODE XREF: sub_C57A+94B-j
				clr	var_cnt_CD
				tbbs	bit6, var_io_input1, open_loop_CEFD	; Force open loop when TE2 connected to E1

				tbbs	bit0, var_flags_46, open_loop_CEFD

				ld	a, unk_23C
				cmpb	a, #40h
				bne	open_loop_CEFD

				cmp	#1Fh, var_cnt_CD
				bcc	open_loop_CEFD

				cmp	#0C4h, var_ect
				bcs	open_loop_CEFD

				ld	d, var_inj_pw_inj1
				cmp	d, #00AFh
				ble	open_loop_CEFD

				ld	a, unk_60
				bpz	open_loop_CEFD

				tbbs	bit6, var_limiter_flags, open_loop_CEFD

				tbbs	bit2, var_diag_errors_5, open_loop_CEFD

				tbbs	bit3, var_flags_4D, open_loop_CEFD

				setb	bit5, var_flags_4F
				tbbs	bit0, var_flags_4F, loc_CF02

; If we	get here, the ECU is running in	open loop mode
; due to a number of reasons

open_loop_CEFD:							; CODE XREF: sub_C57A+952-j
								; sub_C57A+955-j ...
				clrb	bit1, var_flags_46
				jmp	loc_CFFB

; ***************************************************************************
; If we	get here, the ECU is running in	closed loop mode

loc_CF02:							; CODE XREF: sub_C57A+980-j
				setb	bit1, var_flags_46
				di
				ld	a, var_adc_lambda
				ld	b, unk_44
				st	d, var_temp_w
				clrb	bit4, unk_44
				ei
				tbbc	bit2, PORTA, loc_CF24	; Port A Data Register

				clrb	bit4, var_flags_4F
				ld	y, #unk_C1F6
				cmp	#1Eh, var_speed_kph
				bcc	loc_CF20

				cmp	#2Fh, var_pim2
				bcs	loc_CF34


loc_CF20:							; CODE XREF: sub_C57A+99F-j
				inc	y
				inc	y
				bra	loc_CF34

; ***************************************************************************

loc_CF24:							; CODE XREF: sub_C57A+994-j
				ld	y, #unk_C1F2
				tbbc	bit3, var_flags_4F, loc_CF32

				inc	y
				inc	y
				tbbc	bit4, var_flags_4F, loc_CF32

				ld	y, #unk_11B

loc_CF32:							; CODE XREF: sub_C57A+9AD-j
								; sub_C57A+9B2-j
				setb	bit4, var_flags_4F

loc_CF34:							; CODE XREF: sub_C57A+9A4-j
								; sub_C57A+9A8-j
				ld	d, [y]
				st	d, unk_11B
				ld	x, var_temp_w
				bpz	loc_CF3D

				mov	b, a

loc_CF3D:							; CODE XREF: sub_C57A+9C0-j
				st	a, var_temp_7A
				ld	y, #unk_C1FA
				cmp	#39h, var_pim2
				bcs	loc_CF4A

				ld	y, #unk_C206

loc_CF4A:							; CODE XREF: sub_C57A+9CB-j
				tbbs	bit4, var_flags_4F, loc_CF66

				inc	y
				inc	y
				push	y
				ld	b, var_rpm_div_25
				jsr	table_rB_fixed_32_interpolate

				st	a, unk_11D
				ld	a, #05h
				pull	y
				add	y, a
				ld	b, var_rpm_div_25
				jsr	table_rB_fixed_32_interpolate

				st	a, unk_11E
				bra	loc_CF69

; ***************************************************************************

loc_CF66:							; CODE XREF: sub_C57A:loc_CF4A-j
				tbbc	bit3, var_flags_4F, loc_CF6C


loc_CF69:							; CODE XREF: sub_C57A+9EA-j
				ld	y, #unk_11D

loc_CF6C:							; CODE XREF: sub_C57A:loc_CF66-j
				ld	d, [y]
				st	d, unk_11D
				ld	x, var_temp_w
				bpz	loc_CF75

				mov	b, a

loc_CF75:							; CODE XREF: sub_C57A+9F8-j
				st	a, var_temp_7B
				setb	bit3, var_flags_4F
				ld	a, #10h
				cmpb	a, unk_79
				beq	loc_CFCC

				jsr	sub_DDDC

				jsr	sub_D133

				ld	a, unk_1D2
				or	a, #01h
				st	a, unk_1D2
				clr	var_temp_7B
				tbbc	bit4, var_flags_4F, loc_CFD2

				ld	x, #unk_C1F2
				ld	y, #unk_11B
				ld	b, #05h
				ld	a, var_temp_w
				bpz	loc_CFA2

				ld	b, #05h
				inc	x
				inc	y

loc_CFA2:							; CODE XREF: sub_C57A+A22-j
				ld	a, y + 00h
				sub	a, b
				bcs	loc_CFAB

				cmp	a, x + 00h
				bcc	loc_CFAD


loc_CFAB:							; CODE XREF: sub_C57A+A2B-j
				ld	a, x + 00h

loc_CFAD:							; CODE XREF: sub_C57A+A2F-j
				st	a, [y]
				ld	y, #unk_C1FA
				ld	x, #unk_11D
				ld	b, #0A1h
				ld	a, var_temp_w
				bpz	loc_CFBE

				ld	b, #0A1h
				inc	x
				inc	y

loc_CFBE:							; CODE XREF: sub_C57A+A3E-j
				ld	a, x + 00h
				sub	a, b
				bcs	loc_CFC7

				cmp	a, y + 00h
				bcc	loc_CFC8


loc_CFC7:							; CODE XREF: sub_C57A+A47-j
				ld	a, [y]

loc_CFC8:							; CODE XREF: sub_C57A+A4B-j
				st	a, x + 00h
				bra	loc_CFD2

; ***************************************************************************

loc_CFCC:							; CODE XREF: sub_C57A+A03-j
				clr	var_temp_7A
				tbs	bit5, unk_41
				bne	loc_CFF9


loc_CFD2:							; CODE XREF: sub_C57A+A15-j
								; sub_C57A+A50-j
				ld	d, unk_62
				ld	x, var_temp_w
				bpz	loc_CFE0

				sub	d, var_temp_7A
				bcc	loc_CFE7

				clr	a
				clr	b
				bra	loc_CFE7

; ***************************************************************************

loc_CFE0:							; CODE XREF: sub_C57A+A5C-j
				add	d, var_temp_7A
				bcc	loc_CFE7

				ld	d, #0FFFFh

loc_CFE7:							; CODE XREF: sub_C57A+A60-j
								; sub_C57A+A64-j ...
				tbbs	bit0, var_limiter_flags, loc_CFED

				tbbc	bit1, var_limiter_flags, loc_CFF2


loc_CFED:							; CODE XREF: sub_C57A:loc_CFE7-j
				cmp	#1Fh, var_cnt_CD
				bcs	loc_D00E


loc_CFF2:							; CODE XREF: sub_C57A+A70-j
				ld	y, #ram_62_limits
				jsr	y + 3Dh

				st	d, unk_62

loc_CFF9:							; CODE XREF: sub_C57A+A56-j
				bra	loc_D010

; ***************************************************************************

loc_CFFB:							; CODE XREF: sub_C57A+985-j
				ld	d, #8000h
				st	d, unk_62
				clrb	bit4, unk_44
				setb	bit5, unk_41
				ld	a, unk_1D2
				and	a, #0FEh
				st	a, unk_1D2
				clrb	bit4, var_flags_4F

loc_D00E:							; CODE XREF: sub_C57A+A76-j
				clrb	bit3, var_flags_4F

loc_D010:							; CODE XREF: sub_C57A:loc_CFF9-j
				ld	y, #nv_unk_trim_86-1
				ld	x, #nv_86_limits

loc_D016:							; CODE XREF: sub_C57A+AA9j
				ld	d, [y]
				inc	x
				inc	x
				xch	x, y
				jsr	clamp_rB

				xch	x, y
				bcs	loc_D027

				cmp	y, #nv_unk_trim_95
				bcs	loc_D016

				bra	loc_D02A

; ***************************************************************************

loc_D027:							; CODE XREF: sub_C57A+AA4-j
				jsr	clear_nv_ram


loc_D02A:							; CODE XREF: sub_C57A+AAB-j
				clrb	bit2, var_flags_4F
				tbbc	bit2, var_flags_46, loc_D041

				cmp	#28h, var_rpm_div_25
				bcc	loc_D055

				cmp	#14h, var_rpm_div_25
				bcs	loc_D055

				cmp	#18h, var_pim2
				bcs	loc_D055

				clr	a
				bra	loc_D066

; ***************************************************************************

loc_D041:							; CODE XREF: sub_C57A+AB2-j
				cmp	#80h, var_rpm_div_25
				bcc	loc_D055

				cmp	#1Eh, var_rpm_div_25
				bcs	loc_D055

				ld	d, var_pim2
				cmp	a, #61h
				bcc	loc_D055

				cmp	a, #18h
				bcc	loc_D05B


loc_D055:							; CODE XREF: sub_C57A+AB8-j
								; sub_C57A+ABD-j ...
				jmp	loc_D119

; END OF FUNCTION CHUNK	FOR sub_C57A
; ***************************************************************************
word_D058:			.dw 031Fh			; DATA XREF: sub_C57A:loc_D05Bo
								; sub_D14D:loc_D159o
				.db 06h
; ***************************************************************************
; START	OF FUNCTION CHUNK FOR sub_C57A

loc_D05B:							; CODE XREF: sub_C57A+AD9-j
				ld	y, #word_D058
				jsr	divide_rD_8

				jsr	table_rD_clamp

				inc	a
				shl	a

loc_D066:							; CODE XREF: sub_C57A+AC5-j
				ld	x, #nv_unk_trim_86
				add	x, a
				xch	a, var_unk_trim_67
				cmp	a, var_unk_trim_67
				beq	loc_D072

				clr	unk_69

loc_D072:							; CODE XREF: sub_C57A+AF4-j
				tbbs	bit0, unk_40, loc_D055

				tbbc	bit1, var_flags_46, loc_D055

				cmp	#0E4h, var_ect
				ble	loc_D055

				tbbs	bit3, var_error_flags1,	loc_D055

				ld	a, unk_22B
				or	a, unk_22C
				or	a, unk_22D
				or	a, unk_22A
				or	a, unk_230
				bne	loc_D055

				cmp	#93h, var_adc_battery
				bcs	loc_D055

				tbbs	bit5, var_io_input1, loc_D055

				ld	a, unk_1CC
				cmpb	a, #04h
				bne	loc_D055

				cmpb	a, #20h
				beq	loc_D0A8

				cmpb	a, #01h
				beq	loc_D055


loc_D0A8:							; CODE XREF: sub_C57A+B28-j
				setb	bit2, var_flags_4F
				tbbc	bit1, var_flags_4F, loc_D115

				ld	a, #06h
				tbbs	bit2, var_flags_46, loc_D0B4

				ld	a, #03h

loc_D0B4:							; CODE XREF: sub_C57A+B35-j
				cmp	a, unk_69
				bgt	loc_D115

				ld	b, #01h
				cmp	#8Ah, unk_64
				bcc	loc_D0C5

				neg	b
				cmp	#76h, unk_64
				bgt	loc_D115


loc_D0C5:							; CODE XREF: sub_C57A+B43-j
				add	b, x + 00h
				push	b
				mov	x, d
				add	d, #table_ect_idle_C302
				mov	d, y
				pull	b
				jsr	clamp_rB

				jsr	write_rB_nv_ram

				clrb	bit0, var_diag_errors_5
				ld	b, nv_unk_trim_86
				sub	b, #5Ch
				bcc	loc_D0DF

				neg	b
				setb	bit0, var_diag_errors_5

loc_D0DF:							; CODE XREF: sub_C57A+B60-j
				clr	a
				div	d, #05h
				st	b, var_temp_w
				xch	x, y
				ld	x, #nv_unk_trim_94
				ld	#06h, unk_79

loc_D0EB:							; CODE XREF: sub_C57A+B98j
				ld	a, unk_79
				mul	a, var_temp_w
				sub	b, var_temp_w
				subc	a, #00h
				tbbc	bit0, var_diag_errors_5, loc_D0F9

				jsr	negate_rD


loc_D0F9:							; CODE XREF: sub_C57A+B79-j
				add	d, #0023h
				st	d, var_temp_7A
				ld	b, nv_unk_trim_86
				clr	a
				sub	d, var_temp_7A
				bmi	loc_D10E

				jsr	clamp_rD_FF

				cmp	b, x + 00h
				ble	loc_D10E

				bsr	write_rB_nv_ram


loc_D10E:							; CODE XREF: sub_C57A+B89-j
								; sub_C57A+B90-j
				dec	x
				dec	x
				dec	unk_79
				bpz	loc_D0EB

				xch	x, y

loc_D115:							; CODE XREF: sub_C57A+B30-j
								; sub_C57A+B3C-j ...
				ld	a, x + 00h
				bra	loc_D120

; ***************************************************************************

loc_D119:							; CODE XREF: sub_C57A:loc_D055-j
				ld	#0FFh, var_unk_trim_67
				clr	unk_69
				ld	a, #80h

loc_D120:							; CODE XREF: sub_C57A+B9D-j
				tbbs	bit1, var_flags_46, loc_D12B

				ld	a, #80h
				st	a, unk_64
				st	a, unk_61
				ld	a, #00h

loc_D12B:							; CODE XREF: sub_C57A:loc_D120-j
				st	a, unk_214
				clrb	bit1, var_flags_4F
				jmp	loc_D189

; END OF FUNCTION CHUNK	FOR sub_C57A

; *************** S U B	R O U T	I N E ***************************************


sub_D133:							; CODE XREF: sub_C57A+A08-p
				ld	d, unk_61
				st	b, unk_61
				add	a, b
				rorc	a
				st	a, unk_64
				setb	bit1, var_flags_4F
				ld	d, #6902h
				jsr	increment_counters

				ret

; End of function sub_D133


; *************** S U B	R O U T	I N E ***************************************


write_rB_nv_ram:						; CODE XREF: sub_C57A+B57-p
								; sub_C57A+B92-p ...
				ld	a, x + 00h
				sub	a, b
				add	a, x + 01h
				xch	a, b
				st	d, x + 00h
				ret

; End of function write_rB_nv_ram


; *************** S U B	R O U T	I N E ***************************************


sub_D14D:							; CODE XREF: sub_E3C8+28p
				ld	b, #80h
				tbbc	bit0, var_flags_42, locret_D188

				tbbc	bit2, var_flags_46, loc_D159

				ld	b, nv_unk_trim_86
				bra	locret_D188

; ***************************************************************************

loc_D159:							; CODE XREF: sub_D14D+5-j
				ld	y, #word_D058
				ld	d, var_pim2
				sub	d, #0409h
				bcc	loc_D165

				clr	a
				clr	b

loc_D165:							; CODE XREF: sub_D14D+14-j
				jsr	divide_rD_8

				cmp	d, #081Fh
				ble	loc_D171

				add	d, #081Fh
				shr	d

loc_D171:							; CODE XREF: sub_D14D+1E-j
				jsr	table_rD_clamp

				push	b
				shl	a
				ld	y, #word_88
				add	y, a
				ld	a, y + 00h
				ld	b, y + 02h
				mov	d, y
				pull	b
				push	y
				mov	s, x
				xch	x, y
				jsr	sub_C43B

				pull	y
				mov	a, b

locret_D188:							; CODE XREF: sub_D14D+2-j
								; sub_D14D+A-j
				ret

; End of function sub_D14D

; ***************************************************************************
; START	OF FUNCTION CHUNK FOR sub_C57A

loc_D189:							; CODE XREF: sub_C57A+BB6-j
				ld	a, var_flags_4E
				st	a, unk_1CB
				ld	a, var_flags_4F
				st	a, unk_1D4
				tbs	bit6, unk_41
				bne	loc_D1A9

				ld	d, #loc_C714
				jsr	increment_counters

				jsr	sub_C8F4

				jsr	sub_CAB6

				jsr	sub_EB7B

				jsr	sub_DDF3


loc_D1A9:							; CODE XREF: sub_C57A+C1B-j
				cmp	#7Ah, unk_C4
				bcs	loc_D1B8

				clr	unk_C4
				ld	d, #0E405h
				jsr	increment_counters

				inc	unk_E9

loc_D1B8:							; CODE XREF: sub_C57A+C32-j
				tbs	bit2, unk_41
				beq	loc_D1BF

				jmp	loc_D27E

; ***************************************************************************

loc_D1BF:							; CODE XREF: sub_C57A+C40-j
				ld	a, var_limiter_flags
				and	a, #9Fh
				bne	loc_D1D4

				ld	d, unk_121
				cmp	d, #0FFE7h
				blta	loc_D1D4

				ld	a, unk_23C
				cmpb	a, #40h
				beq	loc_D1D6


loc_D1D4:							; CODE XREF: sub_C57A+C49-j
								; sub_C57A+C51-j
				clr	unk_CF

loc_D1D6:							; CODE XREF: sub_C57A+C58-j
				ld	a, unk_6B
				bne	loc_D1E8

				ld	d, #0F0Ch
				cmp	#1Eh, var_rpm_div_25
				bcs	loc_D1E3

				mov	b, a

loc_D1E3:							; CODE XREF: sub_C57A+C66-j
				cmp	a, unk_140
				bgta	loc_D1EA


loc_D1E8:							; CODE XREF: sub_C57A+C5E-j
				inc	unk_6B

loc_D1EA:							; CODE XREF: sub_C57A+C6C-j
				tbbs	bit1, var_flags_46, loc_D1F0

				jmp	loc_D268

; ***************************************************************************

loc_D1F0:							; CODE XREF: sub_C57A:loc_D1EA-j
				ld	d, var_ect
				cmp	d, #0E4C0h
				bcs	loc_D268

				cmp	d, #0EF80h
				bcc	loc_D268

				ld	a, unk_22B
				or	a, unk_230
				bne	loc_D268

				cmp	#80h, var_rpm_div_25
				bcc	loc_D268

				tbbs	bit1, var_io_input1, loc_D268

				ld	a, unk_140
				cmp	a, #0FEh
				blta	loc_D268

				cmp	#93h, var_adc_battery
				bcs	loc_D268

				cmp	#1Fh, unk_CF
				bcs	loc_D268

				tbbs	bit2, var_error_flags2,	loc_D268

				ld	a, unk_1CC
				cmpb	a, #04h
				bne	loc_D268

				cmpb	a, #20h
				beq	loc_D22F

				cmpb	a, #01h
				beq	loc_D268


loc_D22F:							; CODE XREF: sub_C57A+CAF-j
				cmp	#06h, unk_6B
				ble	loc_D27E

				ld	a, #01h
				ld	b, var_adc_lambda
				bpz	loc_D23B

				neg	a

loc_D23B:							; CODE XREF: sub_C57A+CBE-j
				add	a, unk_6C
				st	a, unk_6C
				cmp	#11h, unk_6B
				bcs	loc_D27E

				tbbs	bit5, var_limiter_flags, loc_D268

				ld	d, nv_unk_trim_96
				tbbs	bit0, var_flags_42, loc_D24F

				ld	d, #00FFh

loc_D24F:							; CODE XREF: sub_C57A+CCF-j
				cmp	#84h, unk_6C
				bcc	loc_D260

				cmp	#7Ch, unk_6C
				bgt	loc_D268

				cmpz	a
				beq	loc_D268

				dec	a
				inc	b
				bra	loc_D266

; ***************************************************************************

loc_D260:							; CODE XREF: sub_C57A+CD8-j
				cmp	a, #40h
				beq	loc_D268

				inc	a
				dec	b

loc_D266:							; CODE XREF: sub_C57A+CE4-j
				st	d, nv_unk_trim_96

loc_D268:							; CODE XREF: sub_C57A+C73-j
								; sub_C57A+C7B-j ...
				ld	d, #0080h
				st	d, unk_6B
				clrb	bit5, var_limiter_flags
				bra	loc_D27E

; END OF FUNCTION CHUNK	FOR sub_C57A

; *************** S U B	R O U T	I N E ***************************************


sub_D271:							; CODE XREF: sub_C57A+47F-p
				ld	b, nv_unk_trim_96
				ld	y, #nv_96_limits
				jsr	y + 1Eh

				bcc	locret_D27D

				jsr	clear_nv_ram


locret_D27D:							; CODE XREF: sub_D271+7-j
				ret

; End of function sub_D271

; ***************************************************************************
; START	OF FUNCTION CHUNK FOR sub_C57A

loc_D27E:							; CODE XREF: sub_C57A+C42-j
								; sub_C57A+CB8-j ...
				jsr	sub_E996

				jsr	sub_E7D9

				ld	a, unk_1D2
				st	a, var_flags_4E
				ld	a, unk_1D3
				st	a, var_flags_4F
				clrb	bit2, var_flags_4F
				tbbs	bit7, var_io_input1, loc_D296

				clrb	bit3, var_flags_4F
; ***************************************************************************
				.db 8Ch
; ***************************************************************************

loc_D296:							; CODE XREF: sub_C57A+D16-j
				setb	bit3, var_flags_4F
				tbbs	bit0, var_io_input2, loc_D29E

				clrb	bit1, var_flags_4F
; ***************************************************************************
				.db 8Ch
; ***************************************************************************

loc_D29E:							; CODE XREF: sub_C57A+D1E-j
				setb	bit1, var_flags_4F
				tbbs	bit5, var_io_input1, loc_D2A6

				clrb	bit5, var_flags_4F
; ***************************************************************************
				.db 8Ch
; ***************************************************************************

loc_D2A6:							; CODE XREF: sub_C57A+D26-j
				setb	bit5, var_flags_4F
				tbbs	bit1, var_io_input2, loc_D2AE

				clrb	bit4, var_flags_4F
; ***************************************************************************
				.db 8Ch
; ***************************************************************************

loc_D2AE:							; CODE XREF: sub_C57A+D2E-j
				setb	bit4, var_flags_4F
				tbbs	bit0, var_io_input1, loc_D2B6

				clrb	bit0, var_flags_4F
; ***************************************************************************
				.db 8Ch
; ***************************************************************************

loc_D2B6:							; CODE XREF: sub_C57A+D36-j
				setb	bit0, var_flags_4F
				tbbs	bit0, var_limiter_flags, loc_D2BD

				clr	unk_D6

loc_D2BD:							; CODE XREF: sub_C57A+D3E-j
				ld	b, var_nv_idle_trim
				ld	y, #idle_trim_limits
				jsr	y + 10h

				bcc	loc_D2C9

				jsr	clear_nv_ram


loc_D2C9:							; CODE XREF: sub_C57A+D4A-j
				tbbs	bit0, var_flags_46, loc_D2E3

				cmp	#0E4h, var_ect
				ble	loc_D2E3

				cmp	#02h, var_speed_kph
				bcc	loc_D2E3

				ld	a, var_flags_43_copy_1D0
				cmpb	a, #08h
				bne	loc_D2E3

				tbbs	bit5, var_flags_4F, loc_D2E3

				setb	bit2, var_flags_4E
; ***************************************************************************
				.db 8Ch
; ***************************************************************************

loc_D2E3:							; CODE XREF: sub_C57A:loc_D2C9-j
								; sub_C57A+D55-j ...
				clrb	bit2, var_flags_4E
				tbbc	bit2, var_flags_46, loc_D2F1

				tbbs	bit1, var_flags_4E, loc_D2F1

				tbbs	bit7, var_flags_4E, loc_D2F1

				tbbc	bit0, var_flags_4F, loc_D2F3


loc_D2F1:							; CODE XREF: sub_C57A+D6B-j
								; sub_C57A+D6E-j ...
				clr	var_cnt_D5

loc_D2F3:							; CODE XREF: sub_C57A+D74-j
				tbbc	bit0, var_flags_46, loc_D307

				clr	unk_D7
				ld	a, var_nv_idle_trim
				tbbs	bit0, var_flags_42, loc_D2FF

				ld	a, #66h

loc_D2FF:							; CODE XREF: sub_C57A+D80-j
				mul	a, #10h
				add	d, #00F6h
				st	d, unk_193

loc_D307:							; CODE XREF: sub_C57A:loc_D2F3-j
				tbbs	bit0, var_flags_46, loc_D314

				cmp	#28h, var_speed_kph
				bcc	loc_D314

				cmp	#0A0h, var_rpm_div_25
				bcs	loc_D31A


loc_D314:							; CODE XREF: sub_C57A:loc_D307-j
								; sub_C57A+D93-j
				ld	d, #08A4h
				st	d, unk_199

loc_D31A:							; CODE XREF: sub_C57A+D98-j
				bra	loc_D326

; END OF FUNCTION CHUNK	FOR sub_C57A

; *************** S U B	R O U T	I N E ***************************************


sub_D31C:							; CODE XREF: sub_C57A+1D82p
				ld	y, #table_ect_idle_C302
				jsr	table_ect_pair_interpolate

				st	a, unk_189
				ret

; End of function sub_D31C

; ***************************************************************************
; START	OF FUNCTION CHUNK FOR sub_C57A

loc_D326:							; CODE XREF: sub_C57A:loc_D31A-j
				tbs	bit1, unk_44
				bne	loc_D34B

				jsr	sub_D463

				bra	loc_D34B

; END OF FUNCTION CHUNK	FOR sub_C57A

; *************** S U B	R O U T	I N E ***************************************


sub_D32F:							; CODE XREF: int_4ms_watchdog+1Cp
				di
				clrb	bit1, DOM
				ld	d, var_iscv_unk_190
				beq	loc_D33F

				setb	bit1, DOUT
				add	d, TIMER		; Timer	MSB (bit11~bit18)
				st	d, CPR1			; Timer	comparison #1 MSB
				setb	bit1, DOM

loc_D33F:							; CODE XREF: sub_D32F+6-j
				clrb	bit1, DOUT
				ei
				tbbs	bit1, var_diag_errors_5, loc_D348

				setb	bit0, PORTD_ASRIN
; ***************************************************************************
				.db  8Ch ; 
; ***************************************************************************

loc_D348:							; CODE XREF: sub_D32F+13-j
				clrb	bit0, PORTD_ASRIN
				ret

; End of function sub_D32F

; ***************************************************************************
; START	OF FUNCTION CHUNK FOR sub_C57A

loc_D34B:							; CODE XREF: sub_C57A+DAE-j
								; sub_C57A+DB3-j
				tbbc	bit0, unk_40, loc_D351

				jmp	loc_D460

; ***************************************************************************

loc_D351:							; CODE XREF: sub_C57A:loc_D34B-j
				tbbs	bit7, var_flags_4E, loc_D357

				tbbs	bit5, var_flags_4F, loc_D359


loc_D357:							; CODE XREF: sub_C57A:loc_D351-j
				clr	unk_E3

loc_D359:							; CODE XREF: sub_C57A+DDA-j
				clr	a
				clr	b
				cmp	#3Dh, unk_C3
				bcs	loc_D363

				jmp	loc_D40F

; ***************************************************************************

loc_D363:							; CODE XREF: sub_C57A+DE4-j
				tbbc	bit7, var_flags_46, loc_D36C

				ld	d, #0200h
				jmp	loc_D40F

; ***************************************************************************

loc_D36C:							; CODE XREF: sub_C57A:loc_D363-j
				tbbc	bit5, var_flags_4F, loc_D3B4

				cmp	#0D2h, var_ect
				bcs	loc_D3B4

				tbbc	bit2, var_flags_46, loc_D3B4

				ld	d, #0200h
				tbbs	bit6, var_flags_46, loc_D395

				ld	d, #0200h
				cmp	#26h, unk_E3
				bcc	loc_D388

				jmp	loc_D40F

; ***************************************************************************

loc_D388:							; CODE XREF: sub_C57A+E09-j
				ld	b, var_nv_idle_trim
				tbbs	bit0, var_flags_42, loc_D38F

				ld	b, #66h

loc_D38F:							; CODE XREF: sub_C57A+E10-j
				clr	a
				shl	d
				shl	d
				jmp	loc_D40F

; ***************************************************************************

loc_D395:							; CODE XREF: sub_C57A+E00-j
				cmp	#17h, unk_E3
				bcc	loc_D3A0

				jsr	sub_D423

				jmp	loc_D41A

; ***************************************************************************

loc_D3A0:							; CODE XREF: sub_C57A+E1E-j
				cmp	#99h, unk_E3
				bcs	loc_D40F

				jsr	sub_D42F

				sub	d, #0200h
				bcs	loc_D3AF

				clr	a
				clr	b

loc_D3AF:							; CODE XREF: sub_C57A+E31-j
				jsr	negate_rD

				bra	loc_D41A

; ***************************************************************************

loc_D3B4:							; CODE XREF: sub_C57A:loc_D36C-j
								; sub_C57A+DF8-j ...
				cmp	#3Dh, var_cnt_startup
				bcs	loc_D3DA

				tbbs	bit2, var_flags_46, loc_D3DA

				cmp	#0D2h, var_ect
				bcs	loc_D3DA

				ld	x, #6150h
				ld	b, unk_13E
				jsr	mult_rBrX2

				tbbc	bit7, var_flags_4F, loc_D3D0

				sub	d, #0A3Eh

loc_D3D0:							; CODE XREF: sub_C57A+E50-j
				cmp	d, var_pim2
				bgt	loc_D3DA

				setb	bit7, var_flags_4F
				clr	a
				clr	b
				bra	loc_D40F

; ***************************************************************************

loc_D3DA:							; CODE XREF: sub_C57A+E3D-j
								; sub_C57A+E3F-j ...
				clrb	bit7, var_flags_4F
				bsr	sub_D423

				push	d
				bsr	sub_D42F

				sub	d, unk_195
				bcs	loc_D3E8

				clr	a
				clr	b

loc_D3E8:							; CODE XREF: sub_C57A+E6A-j
				jsr	negate_rD

				mov	s, x
				tbbc	bit6, var_flags_46, loc_D409

				push	a
				ld	a, unk_23C
				cmpb	a, #02h
				pull	a
				bne	loc_D409

				tbbs	bit1, var_diag_errors_5, loc_D405

				ld	y, unk_195
				cmp	y, #0200h
				bgt	loc_D417

				bra	loc_D409

; ***************************************************************************

loc_D405:							; CODE XREF: sub_C57A+E7E-j
				cmp	d, x + 00h
				bcc	loc_D417


loc_D409:							; CODE XREF: sub_C57A+E72-j
								; sub_C57A+E7C-j ...
				ld	d, unk_195
				bsr	sub_D43B

				pull	x

loc_D40F:							; CODE XREF: sub_C57A+DE6-j
								; sub_C57A+DEF-j ...
				di
				tbbs	bit6, var_flags_4F, loc_D41B

				clrb	bit1, var_diag_errors_5
				bra	loc_D41D

; ***************************************************************************

loc_D417:							; CODE XREF: sub_C57A+E87-j
								; sub_C57A+E8D-j
				bsr	sub_D43B

				pull	x

loc_D41A:							; CODE XREF: sub_C57A+E23-j
								; sub_C57A+E38-j
				di

loc_D41B:							; CODE XREF: sub_C57A+E96-j
				setb	bit1, var_diag_errors_5

loc_D41D:							; CODE XREF: sub_C57A+E9B-j
				st	d, var_iscv_unk_190
				ei
				bra	loc_D460

; END OF FUNCTION CHUNK	FOR sub_C57A

; *************** S U B	R O U T	I N E ***************************************


sub_D423:							; CODE XREF: sub_C57A+E20-p
								; sub_C57A+E62-p
				ld	b, var_adc_battery
				ld	y, #unk_C366
				jsr	table_rB_fixed_32_interpolate

				jsr	divide_rD_64

				ret

; End of function sub_D423


; *************** S U B	R O U T	I N E ***************************************


sub_D42F:							; CODE XREF: sub_C57A+E2B-p
								; sub_C57A+E65-p
				ld	b, var_adc_battery
				ld	y, #byte_C36C
				jsr	table_rB_fixed_32_interpolate

				jsr	divide_rD_64

				ret

; End of function sub_D42F


; *************** S U B	R O U T	I N E ***************************************


sub_D43B:							; CODE XREF: sub_C57A+E92-p
								; sub_C57A:loc_D417-p
				cmp	d, x + 00h
				bcs	loc_D453

				mov	d, x
				shr	d
				shr	d
				cmpz	a
				bne	loc_D44A

				cmp	b, unk_18C
				bcs	loc_D451


loc_D44A:							; CODE XREF: sub_D43B+8-j
				ld	b, unk_18C
				clr	a
				shl	d
				shl	d
; ***************************************************************************
				.db 41h
; ***************************************************************************

loc_D451:							; CODE XREF: sub_D43B+D-j
				mov	x, d
; ***************************************************************************
				.db 8Ch
; ***************************************************************************

loc_D453:							; CODE XREF: sub_D43B+2-j
				ld	d, x + 00h
				ret

; End of function sub_D43B


; *************** S U B	R O U T	I N E ***************************************


sub_D456:							; CODE XREF: sub_C57A+1D8Ap
				ld	y, #table_ect_C357
				jsr	table_ect_pair_interpolate

				st	a, unk_18C
				ret

; End of function sub_D456

; ***************************************************************************
; START	OF FUNCTION CHUNK FOR sub_C57A

loc_D460:							; CODE XREF: sub_C57A+DD4-j
								; sub_C57A+EA7-j
				jmp	loc_D8BF

; END OF FUNCTION CHUNK	FOR sub_C57A

; *************** S U B	R O U T	I N E ***************************************


sub_D463:							; CODE XREF: sub_C57A+DB0-p

; FUNCTION CHUNK AT D5A9 SIZE 00000316 BYTES

				cmp	#3Dh, var_cnt_startup
				bcc	loc_D484

				ld	y, #table_ect_idle_flare
				jsr	table_ect_pair_interpolate

				push	d
				ld	y, #table_tha_idle_flare
				ld	a, var_tha
				jsr	table_rA_pair_interpolate

				mov	s, x
				cmp	d, x + 00h
				bcc	loc_D47E

				ld	d, x + 00h

loc_D47E:							; CODE XREF: sub_D463+17-j
				pull	x
				jsr	divide_rD_16

				bra	loc_D48E

; ***************************************************************************

loc_D484:							; CODE XREF: sub_D463+3-j
				ld	d, var_iscv_startup_flare
				sub	d, #0001h
				bcc	loc_D48E

				clr	a
				clr	b

loc_D48E:							; CODE XREF: sub_D463+1F-j
								; sub_D463+27-j
				st	d, var_iscv_startup_flare
				cmp	#0Ch, var_4ms_cnt_B1
				bcc	loc_D4BC

				cmp	#05h, var_speed_kph
				bcs	loc_D4BC

				cmp	#50h, var_rpm_div_25
				bcc	loc_D4BC

				cmp	#8Ah, unk_5C
				bcs	loc_D4BC

				setb	bit4, var_flags_4E
				cmp	#0DCh, var_ect
				bcs	loc_D4BE

				ld	b, var_pim2
				ld	y, #unk_C32B
				jsr	table_rB_fixed_16_interpolate

				jsr	divide_rD_64

				st	d, unk_18A
				bra	loc_D4D0

; ***************************************************************************

loc_D4BC:							; CODE XREF: sub_D463+31-j
								; sub_D463+36-j	...
				clrb	bit4, var_flags_4E

loc_D4BE:							; CODE XREF: sub_D463+47-j
				tbbs	bit4, var_flags_4E, loc_D4D0

				ld	d, unk_18A
				beq	loc_D4D0

				sub	d, #0008h
				bcc	loc_D4CD

				clr	a
				clr	b

loc_D4CD:							; CODE XREF: sub_D463+66-j
				st	d, unk_18A

loc_D4D0:							; CODE XREF: sub_D463+57-j
								; sub_D463:loc_D4BE-j ...
				cmp	#3Dh, var_cnt_startup
				bcc	loc_D4DA

				ld	d, #0300h
				bra	loc_D4E4

; ***************************************************************************

loc_D4DA:							; CODE XREF: sub_D463+70-j
				ld	d, unk_1A1
				sub	d, #0004h
				bcc	loc_D4E4

				clr	a
				clr	b

loc_D4E4:							; CODE XREF: sub_D463+75-j
								; sub_D463+7D-j
				st	d, unk_1A1
				cmp	#0Fh, var_cnt_startup
				bgt	loc_D4F8

				ld	a, unk_230
				cmp	a, #0Dh
				bcs	loc_D4F8

				ld	d, #0200h
				bra	loc_D4FF

; ***************************************************************************

loc_D4F8:							; CODE XREF: sub_D463+87-j
								; sub_D463+8E-j
				cmp	#3Ch, var_cnt_E4
				bcs	loc_D502

				clr	a
				clr	b

loc_D4FF:							; CODE XREF: sub_D463+93-j
				st	d, unk_1A3

loc_D502:							; CODE XREF: sub_D463+98-j
				clr	a
				clr	b
				tbbc	bit6, var_flags_46, loc_D535

				ld	x, #byte_C353
				tbbc	bit1, var_flags_4F, loc_D510

				ld	x, #byte_C355

loc_D510:							; CODE XREF: sub_D463+A7-j
				jsr	inc_rX_if

				ld	d, var_iscv_unk_1A5
				tbbc	bit4, var_flags_4F, loc_D520

				add	d, #0002h
				bcs	loc_D52F

				bra	loc_D527

; ***************************************************************************

loc_D520:							; CODE XREF: sub_D463+B3-j
				sub	d, #0002h
				bcc	loc_D527

				clr	a
				clr	b

loc_D527:							; CODE XREF: sub_D463+BB-j
								; sub_D463+C0-j
				mov	d, y
				jsr	divide_rD_16_saturate

				cmp	b, x + 00h
				bcs	loc_D534


loc_D52F:							; CODE XREF: sub_D463+B9-j
				ld	a, #10h
				mul	a, x + 00h
; ***************************************************************************
				.db 41h
; ***************************************************************************

loc_D534:							; CODE XREF: sub_D463+CA-j
				mov	y, d

loc_D535:							; CODE XREF: sub_D463+A1-j
				st	d, var_iscv_unk_1A5
				ld	x, #idle_trim
				bsr	inc_rX_if

				ld	a, x + 00h
				tbbc	bit6, var_flags_46, loc_D568

				clrb	bit0, var_diag_errors_5
				ld	x, #idle_trim_els
				tbbc	bit1, var_flags_4F, loc_D54D

				ld	x, #idle_trim_eco

loc_D54D:							; CODE XREF: sub_D463+E4-j
				bsr	inc_rX_if

				sub	a, x + 00h
				bcs	loc_D556

				setb	bit0, var_diag_errors_5
; ***************************************************************************
				.db 41h
; ***************************************************************************

loc_D556:							; CODE XREF: sub_D463+EE-j
				neg	a
				mul	a, #10h
				jsr	check_knock_sensor_err_flag

				add	d, var_iscv_unk_1A5
				bpz	loc_D563

				clr	a
				clr	b

loc_D563:							; CODE XREF: sub_D463+FC-j
				st	d, unk_19F
				ld	a, x + 00h

loc_D568:							; CODE XREF: sub_D463+DC-j
				mul	a, #10h
				add	d, var_iscv_unk_1A5
				add	d, unk_1A1
				add	d, unk_1A3
				st	d, var_temp_w
				ld	y, #unk_C372
				tbbc	bit6, var_io_input2, loc_D57C

				inc	y

loc_D57C:							; CODE XREF: sub_D463+115-j
				tbbc	bit7, var_io_input2, loc_D581

				inc	y
				inc	y

loc_D581:							; CODE XREF: sub_D463:loc_D57C-j
				ld	a, y + 00h
				mul	a, #10h
				add	d, var_temp_w
				st	d, var_temp_w
				cmp	d, unk_18D
				beq	loc_D590

				clr	unk_D8

loc_D590:							; CODE XREF: sub_D463+129-j
				st	d, unk_18D
				ld	d, var_rpm_x_5p12
				sub	d, unk_18D
				bcc	loc_D59C

				clr	a
				clr	b

loc_D59C:							; CODE XREF: sub_D463+135-j
				jsr	divide_rD_16_saturate

				st	b, unk_18F
				bra	loc_D5A9

; End of function sub_D463


; *************** S U B	R O U T	I N E ***************************************


inc_rX_if:							; CODE XREF: sub_D463:loc_D510-p
								; sub_D463+D8-p	...
				tbbc	bit3, var_flags_4F, locret_D5A8

				inc	x

locret_D5A8:							; CODE XREF: inc_rX_if-j
				ret

; End of function inc_rX_if

; ***************************************************************************
; START	OF FUNCTION CHUNK FOR sub_D463

loc_D5A9:							; CODE XREF: sub_D463+13F-j
				tbbs	bit6, var_flags_46, loc_D5CE

				tbbc	bit2, var_flags_4E, loc_D5CE

				cmp	#5Ch, var_cnt_D5
				bcs	loc_D5CE

				ld	y, #table_iscv_rpm_C338
				ld	b, unk_18F

loc_D5BA:							; CODE XREF: sub_D463+15Aj
				inc	y
				cmp	b, y + 00h
				bgt	loc_D5BA

				ld	b, y + 05h
				clr	a
				add	d, unk_193
				sub	d, #0080h
				bcc	loc_D5E8

				clr	a
				clr	b
				bra	loc_D5E8

; ***************************************************************************

loc_D5CE:							; CODE XREF: sub_D463:loc_D5A9-j
								; sub_D463+149-j ...
				clr	unk_D8
				clr	unk_D7
				tbbs	bit0, var_flags_46, loc_D5E6

				ld	a, var_nv_idle_trim
				tbbs	bit0, var_flags_42, loc_D5DC

				ld	a, #66h

loc_D5DC:							; CODE XREF: sub_D463+174-j
				mul	a, #10h
				cmp	d, unk_193
				ble	loc_D5E6

				st	d, unk_193

loc_D5E6:							; CODE XREF: sub_D463+16F-j
								; sub_D463+17E-j
				bra	loc_D60A

; ***************************************************************************

loc_D5E8:							; CODE XREF: sub_D463+165-j
								; sub_D463+169-j
				st	d, var_temp_w
				ld	a, var_nv_idle_trim
				tbbs	bit0, var_flags_42, loc_D5F1

				ld	a, #66h

loc_D5F1:							; CODE XREF: sub_D463+189-j
				mul	a, #10h
				sub	d, #0033h
				mov	d, x
				add	d, #017Bh
				cmp	d, var_temp_w
				ble	loc_D607

				clr	unk_D7
				mov	x, d
				cmp	d, var_temp_w
				bcc	loc_D607

				ld	d, var_temp_w

loc_D607:							; CODE XREF: sub_D463+199-j
								; sub_D463+1A0-j
				st	d, unk_193

loc_D60A:							; CODE XREF: sub_D463:loc_D5E6-j
				tbbc	bit6, var_flags_46, loc_D639

				ld	y, #unk_C335
				jsr	table_ect_fixed4_interpolate

				st	a, var_temp_w
				ld	y, #unk_C331
				clr	a
				ld	b, unk_23C
				cmpb	b, #01h
				bne	loc_D622

				add	a, #02h

loc_D622:							; CODE XREF: sub_D463+1BB-j
				add	y, a
				ld	d, unk_19F
				shr	d
				shr	d
				cmpz	a
				bne	loc_D62F

				jsr	sub_C43B

; ***************************************************************************
				.db 8Ch
; ***************************************************************************

loc_D62F:							; CODE XREF: sub_D463+1C6-j
				ld	a, y + 01h
				sub	a, var_temp_w
				bcc	loc_D636

				clr	a

loc_D636:							; CODE XREF: sub_D463+1D0-j
				st	a, unk_198

loc_D639:							; CODE XREF: sub_D463:loc_D60A-j
				tbbc	bit6, var_flags_46, loc_D65A

				tbbc	bit2, var_flags_4E, loc_D65A

				cmp	#5Ch, var_cnt_D5
				bcs	loc_D65A

				ld	y, #table_iscv_rpm_c342
				ld	b, unk_18F

loc_D64A:							; CODE XREF: sub_D463+1EAj
				inc	y
				cmp	b, y + 00h
				bgt	loc_D64A

				ld	b, y + 05h
				clr	a
				add	d, unk_199
				sub	d, #0080h
				bra	loc_D65D

; ***************************************************************************

loc_D65A:							; CODE XREF: sub_D463:loc_D639-j
								; sub_D463+1D9-j ...
				ld	d, unk_199

loc_D65D:							; CODE XREF: sub_D463+1F5-j
				cmp	d, #0A66h
				bcc	loc_D683

				mov	d, x
				ld	a, unk_198
				mul	a, #10h
				sub	d, #08A4h
				bcs	loc_D66F

				clr	a
				clr	b

loc_D66F:							; CODE XREF: sub_D463+208-j
				jsr	negate_rD

				cmp	d, #0400h
				bcc	loc_D67A

				ld	d, #0400h

loc_D67A:							; CODE XREF: sub_D463+212-j
				st	d, var_temp_w
				cmp	x, var_temp_w
				ble	loc_D686

				mov	x, d
				bra	loc_D686

; ***************************************************************************

loc_D683:							; CODE XREF: sub_D463+1FD-j
				ld	d, #0A66h

loc_D686:							; CODE XREF: sub_D463+21B-j
								; sub_D463+21E-j
				st	d, unk_199
				ld	a, unk_192
				inc	a
				st	a, unk_192
				tbbc	bit0, var_flags_42, loc_D6AA

				cmp	#66h, var_nv_idle_trim
				bcc	loc_D6AA

				ld	d, unk_18D
				add	d, #0700h
				tbbc	bit6, var_flags_42, loc_D6A6

				sub	d, #0100h
				bcs	loc_D6AA


loc_D6A6:							; CODE XREF: sub_D463+23B-j
				cmp	d, unk_74
				bgt	loc_D6AC


loc_D6AA:							; CODE XREF: sub_D463+22D-j
								; sub_D463+233-j ...
				clr	unk_D7

loc_D6AC:							; CODE XREF: sub_D463+245-j
				cmp	#5Ch, unk_D7
				bcs	loc_D6C4

				ld	a, unk_9E
				or	a, #01h
				st	a, unk_9E
				ld	b, #66h
				st	b, var_idle_trim
				ld	x, #009Ah
				jsr	write_rB_nv_ram

				clr	unk_D7

loc_D6C4:							; CODE XREF: sub_D463+24C-j
				tbbs	bit7, var_flags_46, loc_D6E3

				cmp	#0E8h, var_ect
				bcs	loc_D6E3

				ld	a, unk_22B
				or	a, unk_230
				bne	loc_D6E3

				cmp	#93h, var_adc_battery
				bcs	loc_D6E3

				ld	d, unk_1A3
				bne	loc_D6E3

				ld	d, var_iscv_startup_flare
				beq	loc_D6E5


loc_D6E3:							; CODE XREF: sub_D463:loc_D6C4-j
								; sub_D463+267-j ...
				clr	unk_D8

loc_D6E5:							; CODE XREF: sub_D463+27E-j
				cmp	#5Ch, unk_D8
				bcs	loc_D715

				ld	d, unk_18D
				add	d, #0800h
				sub	d, unk_74
				bcc	loc_D6F7

				jsr	negate_rD


loc_D6F7:							; CODE XREF: sub_D463+28F-j
				cmp	d, #0060h
				bgt	loc_D715

				ld	a, var_nv_idle_trim
				tbbs	bit0, var_flags_42, loc_D703

				ld	a, #66h

loc_D703:							; CODE XREF: sub_D463+29B-j
				mul	a, #10h
				add	d, #007Bh
				cmp	d, unk_193
				bcs	loc_D715

				sub	d, #0048h
				cmp	d, unk_193
				ble	loc_D717


loc_D715:							; CODE XREF: sub_D463+285-j
								; sub_D463+297-j ...
				clr	unk_DC

loc_D717:							; CODE XREF: sub_D463+2B0-j
				tbbc	bit5, var_flags_4F, loc_D722

				ld	a, unk_9E
				or	a, #01h
				st	a, unk_9E
				bra	loc_D72D

; ***************************************************************************

loc_D722:							; CODE XREF: sub_D463:loc_D717-j
				cmp	#99h, unk_DC
				bcs	loc_D72D

				ld	a, unk_9E
				and	a, #0FEh
				st	a, unk_9E

loc_D72D:							; CODE XREF: sub_D463+2BD-j
								; sub_D463+2C2-j
				ld	a, unk_9E
				ld	b, var_nv_idle_trim
				tbbs	bit0, var_flags_42, loc_D738

				and	a, #0FEh
				ld	b, #66h

loc_D738:							; CODE XREF: sub_D463+2CE-j
				cmp	#11h, var_speed_kph
				bcc	loc_D74D

				cmpb	a, #01h
				bne	loc_D74D

				ld	b, var_idle_trim
				ld	y, #idle_trim_limits
				jsr	y + 10h

				bcc	loc_D750

				ld	b, #66h

loc_D74D:							; CODE XREF: sub_D463+2D8-j
								; sub_D463+2DC-j
				st	b, var_idle_trim

loc_D750:							; CODE XREF: sub_D463+2E6-j
				cmp	#5Ch, unk_D8
				bcs	loc_D7A6

				ld	b, unk_192
				beq	loc_D764

				shl	b
				shl	b
				bne	loc_D7A6

				ld	a, unk_9E
				cmpb	a, #01h
				beq	loc_D7A6


loc_D764:							; CODE XREF: sub_D463+2F5-j
				ld	a, var_nv_idle_trim
				mul	a, #10h
				mov	d, x
				ld	a, unk_18F
				ld	b, var_nv_idle_trim
				cmp	x, unk_193
				beq	loc_D78A

				bcs	loc_D780

				cmp	a, #7Ah
				bcs	loc_D78A

				sub	b, #01h
				bcc	loc_D78A

				clr	b
				bra	loc_D78A

; ***************************************************************************

loc_D780:							; CODE XREF: sub_D463+310-j
				cmp	a, #86h
				bgt	loc_D78A

				add	b, #01h
				bcc	loc_D78A

				ld	b, #0FFh

loc_D78A:							; CODE XREF: sub_D463+30E-j
								; sub_D463+314-j ...
				ld	a, var_idle_trim
				add	a, #08h
				st	a, var_temp_w
				sub	a, #0Bh
				st	a, unk_79
				ld	y, #var_temp_w
				jsr	clamp_rB

				ld	y, #idle_trim_limits
				jsr	y + 10h

				ld	x, #var_nv_idle_trim
				jsr	write_rB_nv_ram


loc_D7A6:							; CODE XREF: sub_D463+2F0-j
								; sub_D463+2F9-j ...
				ld	d, var_rpm_x_5p12
				sub	d, var_rpm_idle_unk_19D
				beq	loc_D7BE

				rorc	a
				rorc	b
				jsr	divide_rD_4_signed

				cmp	d, #0000h
				bne	loc_D7B8

				inc	b

loc_D7B8:							; CODE XREF: sub_D463+352-j
				add	d, var_rpm_idle_unk_19D
				st	d, var_rpm_idle_unk_19D

loc_D7BE:							; CODE XREF: sub_D463+348-j
				ld	x, var_rpm_x_5p12
				cmp	#02h, var_speed_kph
				bcs	loc_D7E0

				cmp	#14h, var_rpm_x_5p12
				bcc	loc_D7DB

				cmp	#0Dh, var_rpm_x_5p12
				bcs	loc_D7E0

				ld	d, var_rpm_idle_unk_19D
				sub	d, var_rpm_x_5p12
				bcs	loc_D7DB

				cmp	d, #0200h
				bcc	loc_D7E0


loc_D7DB:							; CODE XREF: sub_D463+365-j
								; sub_D463+371-j
				ld	d, #0400h
				bra	loc_D7F4

; ***************************************************************************

loc_D7E0:							; CODE XREF: sub_D463+360-j
								; sub_D463+36A-j ...
				mov	x, d
				add	d, #0100h
				sub	d, unk_19B
				bcc	loc_D7EB

				clr	a
				clr	b

loc_D7EB:							; CODE XREF: sub_D463+384-j
				shl	d
				bcs	loc_D7F1

				shl	d
				bcc	loc_D7F4


loc_D7F1:							; CODE XREF: sub_D463+389-j
				ld	d, #0FFFFh

loc_D7F4:							; CODE XREF: sub_D463+37B-j
								; sub_D463+38C-j
				st	x, unk_19B
				mov	d, x
				ld	a, #50h
				cmp	#3Dh, var_cnt_startup
				bcs	loc_D822

				tbbc	bit2, var_flags_46, loc_D822

				ld	d, #0800h
				tbbc	bit2, var_flags_4E, loc_D810

				tbbc	bit0, var_flags_4E, loc_D810

				ld	a, unk_18F
				mul	a, #10h

loc_D810:							; CODE XREF: sub_D463+3A2-j
								; sub_D463+3A5-j
				ld	y, #table_idle_C2DD
				jsr	map_rD_rX_interpolate

				tbbc	bit2, var_flags_4E, loc_D81C

				tbbs	bit0, var_flags_4E, loc_D822


loc_D81C:							; CODE XREF: sub_D463+3B3-j
				cmp	a, #50h
				bcc	loc_D822

				ld	a, #50h

loc_D822:							; CODE XREF: sub_D463+39A-j
								; sub_D463+39C-j ...
				st	a, unk_197
				tbbc	bit6, var_flags_46, loc_D841

				ld	b, var_nv_idle_trim
				tbbs	bit0, var_flags_42, loc_D82F

				ld	b, #66h

loc_D82F:							; CODE XREF: sub_D463+3C7-j
				clr	a
				add	b, unk_198
				addc	a, #00h
				shl	d
				shl	d
				shl	d
				shl	d
				add	d, unk_199
				sub	d, #0800h
				bra	loc_D844

; ***************************************************************************

loc_D841:							; CODE XREF: sub_D463+3C2-j
				ld	d, unk_193

loc_D844:							; CODE XREF: sub_D463+3DC-j
				add	d, var_iscv_startup_flare
				shr	d
				st	d, var_temp_w
				clr	a
				clr	b
				tbbs	bit4, var_flags_4F, loc_D852

				tbbc	bit3, var_flags_4F, loc_D866


loc_D852:							; CODE XREF: sub_D463+3E9-j
				ld	y, #unk_C329
				tbbc	bit6, var_flags_46, loc_D859

				inc	y

loc_D859:							; CODE XREF: sub_D463+3F2-j
				tbbc	bit6, unk_40, loc_D863

				inc	y
				inc	y
				tbbs	bit6, var_flags_42, loc_D863

				inc	y
				inc	y

loc_D863:							; CODE XREF: sub_D463:loc_D859-j
								; sub_D463+3FB-j
				ld	b, y + 00h
				shl	d

loc_D866:							; CODE XREF: sub_D463+3EC-j
				add	d, var_temp_w
				st	d, var_temp_w
				ld	b, unk_189
				clr	a
				shl	d
				shl	d
				add	d, unk_18A
				shl	d
				add	d, var_temp_w
				mov	d, x
				mov	x, d
				shr	d
				add	b, unk_197
				addc	a, #00h
				sub	d, #0050h
				cmp	#0E4h, var_ect
				bcc	loc_D88E

				tbbc	bit3, var_flags_4E, loc_D893

				cmp	#0DFh, var_ect
				bcs	loc_D893


loc_D88E:							; CODE XREF: sub_D463+421-j
				cmp	#1Fh, unk_D6
				bcc	loc_D896


loc_D893:							; CODE XREF: sub_D463+423-j
								; sub_D463+429-j
				jmp	loc_D8B7

; ***************************************************************************

loc_D896:							; CODE XREF: sub_D463+42E-j
				setb	bit3, var_flags_4E
				st	d, var_temp_w
				cmp	#78h, var_rpm_div_25
				bcc	loc_D8A7

				cmp	#70h, var_rpm_div_25
				bcc	loc_D8A9

				clrb	bit6, var_flags_4F
; ***************************************************************************
				.db 8Ch
; ***************************************************************************

loc_D8A7:							; CODE XREF: sub_D463+43A-j
				setb	bit6, var_flags_4F

loc_D8A9:							; CODE XREF: sub_D463+43F-j
				ld	b, var_rpm_div_25
				ld	y, #table_rpm_c2fc
				jsr	table_rB_fixed_16_interpolate

				mov	a, b
				clr	a
				add	d, var_temp_w
				bra	loc_D8BB

; ***************************************************************************

loc_D8B7:							; CODE XREF: sub_D463:loc_D893-j
				clrb	bit3, var_flags_4E
				clrb	bit6, var_flags_4F

loc_D8BB:							; CODE XREF: sub_D463+452-j
				st	d, unk_195
				ret

; END OF FUNCTION CHUNK	FOR sub_D463
; ***************************************************************************
; START	OF FUNCTION CHUNK FOR sub_C57A

loc_D8BF:							; CODE XREF: sub_C57A:loc_D460-j
				clrb	bit1, var_flags_4E
				clrb	bit7, var_flags_4E
				ld	a, var_flags_4E
				st	a, unk_1D2
				ld	a, var_flags_4F
				st	a, unk_1D3
				ld	a, unk_1CC
				st	a, var_flags_4E
				tbbc	bit6, var_flags_4E, loc_D8E2

				tbbs	bit5, var_flags_4E, loc_D8E2

				cmp	#8Ah, unk_64
				bgt	loc_D8E2

				cmp	#76h, unk_64
				bcc	loc_D8E4


loc_D8E2:							; CODE XREF: sub_C57A+1358-j
								; sub_C57A+135B-j ...
				clr	unk_6A

loc_D8E4:							; CODE XREF: sub_C57A+1366-j
				ld	a, unk_1D6
				ld	b, var_ect
				cmp	b, #0E6h
				bcc	loc_D8F4

				cmp	b, #0E3h
				bcc	loc_D8F6

				and	a, #0FEh
; ***************************************************************************
				.db 8Ch
; ***************************************************************************

loc_D8F4:							; CODE XREF: sub_C57A+1371-j
				or	a, #01h

loc_D8F6:							; CODE XREF: sub_C57A+1375-j
				st	a, unk_1D6
				cmp	#1Eh, var_cnt_E4
				bcs	loc_D922

				tbbs	bit5, var_io_input1, loc_D922

				cmpb	a, #01h
				beq	loc_D922

				ld	a, unk_22B
				or	a, unk_22A
				or	a, unk_230
				bne	loc_D922

				tbbs	bit7, unk_40, loc_D922

				tbbs	bit1, var_flags_46, loc_D92A

				ld	a, unk_23C
				cmpb	a, #40h
				beq	loc_D922

				jsr	sub_DB2E

				bra	loc_D925

; ***************************************************************************

loc_D922:							; CODE XREF: sub_C57A+1382-j
								; sub_C57A+1384-j ...
				jsr	sub_DB28


loc_D925:							; CODE XREF: sub_C57A+13A6-j
				clrb	bit1, var_flags_4E
				jmp	loc_DC84

; ***************************************************************************

loc_D92A:							; CODE XREF: sub_C57A+1399-j
				setb	bit1, var_flags_4E
				cmp	#18h, unk_B4
				bcc	loc_D934

				jmp	loc_D9AC

; ***************************************************************************

loc_D934:							; CODE XREF: sub_C57A+13B5-j
				clr	unk_B4
				ld	d, dmarx_unk_220
				st	d, var_temp_w
				ld	d, unk_222
				st	d, var_temp_7A
				ld	d, unk_1B6
				tbbc	bit0, var_flags_4E, loc_D94C

				tbbc	bit3, var_flags_4E, loc_D94C

				ld	d, unk_1B8

loc_D94C:							; CODE XREF: sub_C57A+13C9-j
								; sub_C57A+13CC-j
				ld	x, #1EB8h
				jsr	mult_rDrX

				ld	x, unk_224
				jsr	mult_rDrX

				mov	x, d
				sub	d, var_temp_7A
				ble	loc_D97F

				mov	d, x
				ld	a, #0C8h
				jsr	mult_rArX

				ld	d, var_temp_w
				jsr	sub_C57A

				cmp	d, #00C8h
				bcs	loc_D976

				ld	d, var_temp_w
				add	d, var_temp_7A
				mov	d, x
				ld	b, #0C8h
				bra	loc_D982

; ***************************************************************************

loc_D976:							; CODE XREF: sub_C57A+13F1-j
				push	b
				tbbs	bit0, var_flags_4E, loc_D996

				ld	d, unk_1B6
				bra	loc_D992

; ***************************************************************************

loc_D97F:							; CODE XREF: sub_C57A+13E1-j
				clr	b
				ld	x, var_temp_7A

loc_D982:							; CODE XREF: sub_C57A+13FA-j
				push	b
				push	x
				ld	d, unk_224
				ld	x, #1EB8h
				jsr	mult_rDrX

				mov	x, d
				pull	x
				jsr	sub_C57A


loc_D992:							; CODE XREF: sub_C57A+1403-j
				st	d, unk_1B8
				mov	d, x

loc_D996:							; CODE XREF: sub_C57A+13FD-j
				pull	a
				st	a, unk_1B5
				cmp	a, #0C8h
				bcs	loc_D9AC

				tbbs	bit0, var_flags_4E, loc_D9AC

				st	x, unk_1B6
				setb	bit4, var_flags_4E
				jsr	loc_DB3F

				st	d, unk_1BC

loc_D9AC:							; CODE XREF: sub_C57A+13B7-j
								; sub_C57A+1422-j ...
				cmp	#7Ah, unk_B5
				bcc	loc_D9B3

				bra	loc_D9FC

; ***************************************************************************

loc_D9B3:							; CODE XREF: sub_C57A+1435-j
				clr	unk_B5
				tbbs	bit0, var_flags_4E, loc_D9FC

				tbbc	bit5, var_flags_4E, loc_D9FC

				ld	d, unk_1B6
				ld	x, var_adc_lambda
				bmi	loc_D9D5

				cmp	#76h, unk_62
				ble	loc_D9E9

				mov	d, x
				ld	a, unk_1B5
				cmp	a, #0C8h
				bcc	loc_D9EA

				mov	x, d
				add	d, #000Ch
				bra	loc_D9E1

; ***************************************************************************

loc_D9D5:							; CODE XREF: sub_C57A+1446-j
				cmp	#66h, unk_62
				bcc	loc_D9E9

				sub	d, #0002h
				bcc	loc_D9E1

				clr	a
				clr	b

loc_D9E1:							; CODE XREF: sub_C57A+1459-j
								; sub_C57A+1463-j
				ld	y, #word_C3A2
				jsr	y + 1Dh

				st	d, unk_1B6

loc_D9E9:							; CODE XREF: sub_C57A+144B-j
								; sub_C57A+145E-j
				mov	d, x

loc_D9EA:							; CODE XREF: sub_C57A+1453-j
				ld	a, unk_1B5
				cmp	a, #0C8h
				bcc	loc_D9F4

				st	x, unk_1B8

loc_D9F4:							; CODE XREF: sub_C57A+1475-j
				cmp	x, #004Dh
				bcs	loc_D9FC

				jsr	sub_DC4A


loc_D9FC:							; CODE XREF: sub_C57A+1437-j
								; sub_C57A+143B-j ...
				jmp	loc_DC84

; END OF FUNCTION CHUNK	FOR sub_C57A
; ***************************************************************************

loc_D9FF:							; CODE XREF: sub_C57A+1D92p
				cmp	#14h, var_rpm_x_5p12
				bcc	loc_DA0C

				cmp	#16h, var_pim2
				bcs	loc_DA0C

				tbbs	bit2, var_flags_46, loc_DA0E


loc_DA0C:							; CODE XREF: ROM:DA02-j
								; ROM:DA07-j
				clr	unk_DE

loc_DA0E:							; CODE XREF: ROM:DA09-j
				tbbc	bit2, var_flags_4E, loc_DA18

				cmp	#40h, unk_DE
				bcs	loc_DA18

				clrb	bit0, var_flags_4E

loc_DA18:							; CODE XREF: ROM:loc_DA0E-j
								; ROM:DA14-j
				tbbs	bit0, var_flags_4E, loc_DA5B

				tbbc	bit1, var_flags_4E, loc_DA3D

				cmp	#14h, var_rpm_x_5p12
				bcc	loc_DA30

				cmp	#16h, var_pim2
				bcs	loc_DA30

				tbbc	bit2, var_flags_46, loc_DA30

				setb	bit6, var_flags_4E
				jmp	loc_DAD0

; ***************************************************************************

loc_DA30:							; CODE XREF: ROM:DA21-j
								; ROM:DA26-j ...
				ld	d, unk_1B6
				cmp	d, #0080h
				bcc	loc_DA49

				tbbs	bit5, var_flags_4E, loc_DA44

				bra	loc_DA56

; ***************************************************************************

loc_DA3D:							; CODE XREF: ROM:DA1B-j
				ld	a, unk_23C
				cmpb	a, #40h
				bne	loc_DA56


loc_DA44:							; CODE XREF: ROM:DA38-j
				jsr	sub_DB15

				bra	loc_DA56

; ***************************************************************************

loc_DA49:							; CODE XREF: ROM:DA36-j
				setb	bit0, var_flags_4E
				jsr	sub_DC4A

				cmp	d, #0C7AEh
				ble	loc_DA56

				jsr	sub_DB13


loc_DA56:							; CODE XREF: ROM:DA3B-j
								; ROM:DA42-j ...
				clrb	bit6, var_flags_4E
				jmp	locret_DB10

; ***************************************************************************

loc_DA5B:							; CODE XREF: ROM:loc_DA18-j
				clrb	bit6, var_flags_4E
				ld	d, unk_1BC
				clrb	bit7, var_flags_4E
				cmp	#0B3h, unk_64
				bcc	loc_DA77

				cmp	#4Dh, unk_64
				bgt	loc_DA56

				setb	bit7, var_flags_4E
				sub	d, #07AEh
				bcc	loc_DA7F

				clr	a
				clr	b
				bra	loc_DA7F

; ***************************************************************************

loc_DA77:							; CODE XREF: ROM:DA65-j
				add	d, #07AEh
				bcc	loc_DA7F

				ld	d, #0FFFFh

loc_DA7F:							; CODE XREF: ROM:DA71-j
								; ROM:DA75-j ...
				st	d, unk_1BC
				ld	d, unk_62
				tbbs	bit7, var_flags_4E, loc_DAA3

				cmp	d, #295Ch
				bcc	loc_DA91

				ld	d, #1A00h
				bra	loc_DA94

; ***************************************************************************

loc_DA91:							; CODE XREF: ROM:DA8A-j
				sub	d, #0F5Ch

loc_DA94:							; CODE XREF: ROM:DA8F-j
				st	d, unk_62
				ld	a, unk_64
				cmp	a, #29h
				bcc	loc_DA9F

				ld	a, #1Ah
; ***************************************************************************
				.db 8Ch
; ***************************************************************************

loc_DA9F:							; CODE XREF: ROM:DA9A-j
				sub	a, #0Fh
				bra	loc_DABD

; ***************************************************************************

loc_DAA3:							; CODE XREF: ROM:DA84-j
				cmp	d, #0D6A4h
				bcs	loc_DAAD

				ld	d, #0E600h
				bra	loc_DAB0

; ***************************************************************************

loc_DAAD:							; CODE XREF: ROM:DAA6-j
				add	d, #0F5Ch

loc_DAB0:							; CODE XREF: ROM:DAAB-j
				st	d, unk_62
				ld	a, unk_64
				cmp	a, #0D7h
				bcs	loc_DABB

				ld	a, #0E6h
; ***************************************************************************
				.db 8Ch
; ***************************************************************************

loc_DABB:							; CODE XREF: ROM:DAB6-j
				add	a, #0Fh

loc_DABD:							; CODE XREF: ROM:DAA1-j
				st	a, unk_64
				jsr	sub_DC4A

				tbbs	bit7, var_flags_4E, loc_DACD

				cmp	d, #0C7AEh
				ble	loc_DACD

				jsr	sub_DB13


loc_DACD:							; CODE XREF: ROM:DAC2-j
								; ROM:DAC8-j
				jmp	locret_DB10

; ***************************************************************************

loc_DAD0:							; CODE XREF: ROM:DA2D-j
				tbbs	bit5, var_flags_4E, loc_DADD

				jsr	sub_DB11

				cmp	#03h, unk_6A
				bcs	locret_DB10

				setb	bit5, var_flags_4E

loc_DADD:							; CODE XREF: ROM:loc_DAD0-j
				ld	d, unk_1BC
				ld	x, var_adc_lambda
				bmi	loc_DAF3

				cmp	#85h, unk_62
				ble	loc_DB02

				add	d, #0010h
				bcc	loc_DB02

				ld	d, #0FFFFh
				bra	loc_DB02

; ***************************************************************************

loc_DAF3:							; CODE XREF: ROM:DAE2-j
				cmp	#76h, unk_62
				bcc	loc_DB02

				tbbs	bit3, var_flags_4E, loc_DB02

				sub	d, #0010h
				bcc	loc_DB02

				clr	a
				clr	b

loc_DB02:							; CODE XREF: ROM:DAE7-j
								; ROM:DAEC-j ...
				st	d, unk_1BC
				ld	d, unk_1B6
				cmp	d, #004Dh
				bcs	locret_DB10

				jsr	sub_DC4A


locret_DB10:							; CODE XREF: ROM:DA58-j
								; ROM:loc_DACD-j ...
				ret


; *************** S U B	R O U T	I N E ***************************************


sub_DB11:							; CODE XREF: ROM:DAD3-p
				clrb	bit2, var_flags_4E
; End of function sub_DB11


; *************** S U B	R O U T	I N E ***************************************


sub_DB13:							; CODE XREF: ROM:DA53-p
								; ROM:DACA-p
				clrb	bit0, var_flags_4E
; End of function sub_DB13


; *************** S U B	R O U T	I N E ***************************************


sub_DB15:							; CODE XREF: ROM:loc_DA44-p
				ld	d, #0CCCDh
				st	d, unk_1BA
				clrb	bit5, var_flags_4E
				clr	a
				clr	b
				st	d, unk_1B6
				ld	d, #0CCCDh
				st	d, unk_1BC
; End of function sub_DB15


; *************** S U B	R O U T	I N E ***************************************


sub_DB28:							; CODE XREF: sub_C57A:loc_D922-p
				clr	a
				st	a, unk_1B5
				bra	loc_DB33

; End of function sub_DB28


; *************** S U B	R O U T	I N E ***************************************


sub_DB2E:							; CODE XREF: sub_C57A+13A3-p
				ld	a, #0C8h
				st	a, unk_1B5

loc_DB33:							; CODE XREF: sub_DB28+4-j
				clr	a
				clr	b
				st	d, unk_1B8
				ld	d, #0CCCDh
				st	d, unk_1BE
				ret

; End of function sub_DB2E

; ***************************************************************************

loc_DB3F:							; CODE XREF: sub_C57A+142C-p
								; sub_E3C8+46p
				clrb	bit0, var_diag_errors_5
				ld	x, unk_1B8
				tbbs	bit4, var_flags_4E, loc_DB51

				cmp	x, unk_1B6
				bne	loc_DB51

				ld	d, unk_1BC
				bra	loc_DB7D

; ***************************************************************************

loc_DB51:							; CODE XREF: ROM:DB44-j
								; ROM:DB4A-j
				ld	d, unk_1BA
				sub	d, #0CCCDh
				bcc	loc_DB5C

				jsr	set_knock_sensor_err_flag


loc_DB5C:							; CODE XREF: ROM:DB57-j
				jsr	mult_rDrX

				tbbs	bit0, var_diag_errors_5, loc_DB6C

				add	d, #0CCCDh
				bcc	loc_DB77

				ld	d, #0FFFFh
				bra	loc_DB77

; ***************************************************************************

loc_DB6C:							; CODE XREF: ROM:DB5F-j
				sub	d, #0CCCDh
				bcs	loc_DB73

				clr	a
				clr	b

loc_DB73:							; CODE XREF: ROM:DB6F-j
				neg	a
				neg	b
				subc	a, #00h

loc_DB77:							; CODE XREF: ROM:DB65-j
								; ROM:DB6A-j
				tbbc	bit4, var_flags_4E, loc_DB7D

				jmp	loc_DC47

; ***************************************************************************

loc_DB7D:							; CODE XREF: ROM:DB4F-j
								; ROM:loc_DB77-j
				cmp	d, unk_1C3
				ble	loc_DB90

				tbbc	bit0, var_flags_4E, loc_DBD4

				tbbc	bit1, var_flags_4E, loc_DBD4

				ld	x, unk_1BC
				cmp	x, unk_1C3
				bgt	loc_DBC3


loc_DB90:							; CODE XREF: ROM:DB80-j
				setb	bit3, var_flags_4E
				ld	d, unk_1C3
				push	d
				sub	d, #0CCCDh
				neg	a
				neg	b
				subc	a, #00h
				mov	d, x
				ld	d, #0CCCDh
				sub	d, unk_1BA
				bgt	loc_DBAB

				ld	d, unk_1B6
				bra	loc_DBB6

; ***************************************************************************

loc_DBAB:							; CODE XREF: ROM:DBA4-j
				jsr	sub_C57A

				ld	y, #word_C3A2
				jsr	y + 1Dh

				st	d, unk_1B8

loc_DBB6:							; CODE XREF: ROM:DBA9-j
				pull	x
				tbbs	bit0, var_flags_4E, loc_DBC0

				st	d, unk_1B6
				st	x, unk_1BC

loc_DBC0:							; CODE XREF: ROM:DBB7-j
				mov	x, d
				bra	loc_DBD6

; ***************************************************************************

loc_DBC3:							; CODE XREF: ROM:DB8E-j
				mov	d, x
				ld	a, unk_1B5
				beq	loc_DBD3

				cmp	a, #0C8h
				bcc	loc_DBD3

				ld	d, unk_1B6
				st	d, unk_1B8

loc_DBD3:							; CODE XREF: ROM:DBC7-j
								; ROM:DBCB-j
				mov	x, d

loc_DBD4:							; CODE XREF: ROM:DB82-j
								; ROM:DB85-j
				clrb	bit3, var_flags_4E

loc_DBD6:							; CODE XREF: ROM:DBC1-j
				st	d, unk_1BE
				mov	d, x
				di
				ld	a, unk_1D5
				mov	a, b
				and	b, #0FDh
				st	b, unk_1D5
				ei
				ld	b, unk_1C2
				cmpb	a, #02h
				beq	loc_DC09

				tbbc	bit0, var_flags_4E, loc_DC04

				ld	a, unk_1B5
				beq	loc_DBFD

				tbbc	bit1, var_flags_4E, loc_DC04

				add	b, #01h
				bcc	loc_DC06

				bra	loc_DC04

; ***************************************************************************

loc_DBFD:							; CODE XREF: ROM:DBF2-j
				cmp	x, #0CCCDh
				bne	loc_DC04

				clr	b
; ***************************************************************************
				.db 8Ch
; ***************************************************************************

loc_DC04:							; CODE XREF: ROM:DBEC-j
								; ROM:DBF4-j ...
				ld	b, #0FFh

loc_DC06:							; CODE XREF: ROM:DBF9-j
				st	b, unk_1C2

loc_DC09:							; CODE XREF: ROM:DBEA-j
				clrb	bit0, var_diag_errors_5
				cmpz	b
				beq	loc_DC42+1

				cmp	b, #64h
				bcc	loc_DC42+1

				clr	a
				add	d, #0001h
				mov	d, x
				ld	b, #80h
				jsr	mult_rBrX2

				ld	d, unk_1BE
				sub	d, #0CCCDh
				bcc	loc_DC27

				jsr	set_knock_sensor_err_flag


loc_DC27:							; CODE XREF: ROM:DC22-j
				jsr	mult_rDrX

				tbbs	bit0, var_diag_errors_5, loc_DC37

				add	d, #0CCCDh
				bcc	loc_DC44

				ld	d, #0FFFFh
				bra	loc_DC44

; ***************************************************************************

loc_DC37:							; CODE XREF: ROM:DC2A-j
				sub	d, #0CCCDh
				bcs	loc_DC3E

				clr	a
				clr	b

loc_DC3E:							; CODE XREF: ROM:DC3A-j
				neg	a
				neg	b
				subc	a, #00h

loc_DC42:							; CODE XREF: ROM:DC0C-j
								; ROM:DC10-j
				brn	#3Ch

loc_DC44:							; CODE XREF: ROM:DC30-j
								; ROM:DC35-j
				st	d, unk_1C0

loc_DC47:							; CODE XREF: ROM:DB7A-j
				clrb	bit4, var_flags_4E
				ret


; *************** S U B	R O U T	I N E ***************************************


sub_DC4A:							; CODE XREF: sub_C57A+147F-p
								; ROM:DA4B-p ...
				clrb	bit0, var_diag_errors_5
				ld	d, unk_1BC
				sub	d, #0CCCDh
				bcc	loc_DC57

				jsr	set_knock_sensor_err_flag


loc_DC57:							; CODE XREF: sub_DC4A+8-j
				mov	d, x
				ld	d, unk_1B6
				jsr	sub_C57A

				tbbs	bit0, var_diag_errors_5, loc_DC6B

				add	d, #0CCCDh
				bcc	loc_DC76

				ld	d, #0FFFFh
				bra	loc_DC76

; ***************************************************************************

loc_DC6B:							; CODE XREF: sub_DC4A+14-j
				sub	d, #0CCCDh
				bcs	loc_DC72

				clr	a
				clr	b

loc_DC72:							; CODE XREF: sub_DC4A+24-j
				neg	a
				neg	b
				subc	a, #00h

loc_DC76:							; CODE XREF: sub_DC4A+1A-j
								; sub_DC4A+1F-j
				st	d, unk_1BA
				cmp	d, #0C7AEh
				bgt	loc_DC81

				setb	bit2, var_flags_4E
; ***************************************************************************
				.db 8Ch
; ***************************************************************************

loc_DC81:							; CODE XREF: sub_DC4A+32-j
				clrb	bit2, var_flags_4E
				ret

; End of function sub_DC4A

; ***************************************************************************
; START	OF FUNCTION CHUNK FOR sub_C57A

loc_DC84:							; CODE XREF: sub_C57A+13AD-j
								; sub_C57A:loc_D9FC-j
				ld	a, var_flags_4E
				st	a, unk_1CC
				clr	a
				st	a, unk_160
				ld	a, unk_1CA
				st	a, var_flags_4E
				cmp	#8Dh, var_adc_battery
				bgt	loc_DC99

				setb	bit0, var_flags_4E

loc_DC99:							; CODE XREF: sub_C57A+171B-j
				tbbs	bit0, var_io_input1, loc_DCA0

				clrb	bit0, var_flags_4E
				clr	unk_DF

loc_DCA0:							; CODE XREF: sub_C57A:loc_DC99-j
				cmp	#1Fh, unk_DF
				bcs	loc_DCAA

				tbbc	bit0, var_flags_4E, loc_DCAA

				setb	bit0, var_error_flags1

loc_DCAA:							; CODE XREF: sub_C57A+1729-j
								; sub_C57A+172B-j
				bra	loc_DCBA

; END OF FUNCTION CHUNK	FOR sub_C57A

; *************** S U B	R O U T	I N E ***************************************


sub_DCAC:							; CODE XREF: iv6_ne_process+3p
				tbbs	bit2, unk_40, loc_DCB1

				clrb	bit1, var_error_flags1

loc_DCB1:							; CODE XREF: sub_DCAC-j
				ld	b, unk_A2
				bmi	locret_DCB9

				clr	unk_DF
				clrb	bit0, var_error_flags1

locret_DCB9:							; CODE XREF: sub_DCAC+7-j
				ret

; End of function sub_DCAC

; ***************************************************************************
; START	OF FUNCTION CHUNK FOR sub_C57A

loc_DCBA:							; CODE XREF: sub_C57A:loc_DCAA-j
				ld	a, var_flags_4E
				st	a, unk_1CA
				tbbc	bit0, var_io_input1, loc_DCC4

				clrb	bit7, var_flags_4D

loc_DCC4:							; CODE XREF: sub_C57A+1745-j
				cmp	#14h, var_rpm_x_5p12
				bcs	loc_DCD3

				cmp	#07h, unk_C3
				bcs	loc_DCD3

				tbbc	bit7, var_flags_4D, loc_DCD3

				setb	bit1, var_error_flags1

loc_DCD3:							; CODE XREF: sub_C57A+174D-j
								; sub_C57A+1752-j ...
				bra	loc_DCDB

; END OF FUNCTION CHUNK	FOR sub_C57A

; *************** S U B	R O U T	I N E ***************************************


sub_DCD5:							; CODE XREF: int_vector_9_ignition+22p
				tbbs	bit0, var_io_input1, locret_DCDA

				setb	bit7, var_flags_4D

locret_DCDA:							; CODE XREF: sub_DCD5-j
				ret

; End of function sub_DCD5

; ***************************************************************************
; START	OF FUNCTION CHUNK FOR sub_C57A

loc_DCDB:							; CODE XREF: sub_C57A:loc_DCD3-j
				tbbc	bit1, PORTA, loc_DCE6	; Port A Data Register

				tbbs	bit6, var_flags_4D, loc_DCE8

				setb	bit6, var_flags_4D
				clr	unk_BE
; ***************************************************************************
				.db 8Ch
; ***************************************************************************

loc_DCE6:							; CODE XREF: sub_C57A:loc_DCDB-j
				clrb	bit6, var_flags_4D

loc_DCE8:							; CODE XREF: sub_C57A+1764-j
				jmp	loc_E091

; END OF FUNCTION CHUNK	FOR sub_C57A
; ***************************************************************************

loc_DCEB:							; CODE XREF: sub_C57A+1D9Ap
				ld	a, unk_23C
				cmpb	a, #08h
				beq	loc_DCF5

				setb	bit7, var_error_flags2
; ***************************************************************************
				.db 8Ch
; ***************************************************************************

loc_DCF5:							; CODE XREF: ROM:DCF0-j
				clrb	bit7, var_error_flags2
				cmpb	a, #10h
				beq	loc_DCFE

				setb	bit2, var_error_flags2
; ***************************************************************************
				.db 8Ch
; ***************************************************************************

loc_DCFE:							; CODE XREF: ROM:DCF9-j
				clrb	bit2, var_error_flags2
				tbbs	bit6, var_io_input1, loc_DD22

				tbbc	bit2, unk_40, loc_DD18

				clrb	bit2, unk_40
				tbbs	bit3, var_diag_errors_5, loc_DD0E

				tbbc	bit1, var_flags_4D, loc_DD18


loc_DD0E:							; CODE XREF: ROM:DD08-j
				clrb	bit1, var_flags_4D
				ld	d, var_error_flags1
				and	a, #0C5h
				and	b, #85h
				st	d, var_error_flags1

loc_DD18:							; CODE XREF: ROM:DD03-j
								; ROM:DD0B-j
				clrb	bit3, var_diag_errors_5
				ld	a, var_diag_errors_4
				and	a, #70h
				st	a, var_diag_errors_4
				clrb	bit5, var_diag_errors_5

loc_DD22:							; CODE XREF: ROM:DD00-j
				tbbc	bit6, var_io_input1, loc_DD3A

				ld	d, var_inj_pw_inj1
				add	d, var_inj_battery_adjust
				jsr	divide_rD_32_saturate

				st	b, unk_211
				ld	d, var_iscv_unk_190
				jsr	divide_rD_4_saturate

				st	b, unk_213

loc_DD3A:							; CODE XREF: ROM:loc_DD22-j
				ld	a, unk_1CA
				st	a, var_flags_4E
				ld	a, unk_1D4
				st	a, var_flags_4F
				tbbc	bit2, var_flags_4F, loc_DD8A

				cmp	#1Eh, var_rpm_x_5p12
				bcs	loc_DD8A

				cmp	#64h, var_speed_kph
				bcc	loc_DD8A

				cmp	#2Dh, var_pim2
				bcs	loc_DD8A

				ld	b, nv_diag_errors_3
				cmpb	b, #40h
				bne	loc_DD8A

				ld	b, nv_diag_errors_1
				cmpb	b, #08h
				bne	loc_DD8A

				ld	b, nv_diag_errors_1
				cmpb	b, #40h
				bne	loc_DD8A

				ld	b, nv_diag_errors_1
				cmpb	b, #20h
				bne	loc_DD8A

				ld	b, nv_diag_errors_2
				cmpb	b, #40h
				bne	loc_DD8A

				tbbc	bit7, var_flags_4F, loc_DD8A

				ld	x, unk_17F
				cmp	x, #0131h
				bcc	loc_DD8A

				ld	a, var_adc_o2_heater
				cmp	a, #48h
				bcs	loc_DD8A

				cmp	a, #8Fh
				bcs	loc_DD8C


loc_DD8A:							; CODE XREF: ROM:DD44-j
								; ROM:DD4A-j ...
				clr	unk_E6

loc_DD8C:							; CODE XREF: ROM:DD88-j
				cmp	#3Ch, unk_E6
				bcs	loc_DD9E

				setb	bit5, var_error_flags2
				tbbc	bit2, unk_40, loc_DD9E

				ld	b, var_diag_errors_4
				or	b, #20h
				st	b, var_diag_errors_4
				setb	bit3, var_diag_errors_5

loc_DD9E:							; CODE XREF: ROM:DD8F-j
								; ROM:DD93-j
				tbbc	bit1, var_flags_46, loc_DDD2

				ld	b, unk_17D
				cmp	#0Ah, unk_E7
				bcc	loc_DDC4

				ld	a, var_adc_o2_heater
				cmp	a, #48h
				bcc	loc_DDB2

				setb	bit1, var_flags_4E

loc_DDB2:							; CODE XREF: ROM:DDAE-j
				cmp	a, #8Fh
				bcs	loc_DDDA

				tbbc	bit1, var_flags_4E, loc_DDDA

				inc	b
				bne	loc_DDBD

				dec	b

loc_DDBD:							; CODE XREF: ROM:DDBA-j
				st	b, unk_17D
				clrb	bit1, var_flags_4E
				bra	loc_DDDA

; ***************************************************************************

loc_DDC4:							; CODE XREF: ROM:DDA7-j
				cmp	b, #04h
				bcs	loc_DDD2

				tbbs	bit2, unk_40, loc_DDD2

				ld	a, #0DFh
				jsr	sub_DF2C

				clrb	bit5, var_error_flags2

loc_DDD2:							; CODE XREF: ROM:loc_DD9E-j
								; ROM:DDC6-j ...
				clr	b
				st	b, unk_17D
				clrb	bit1, var_flags_4E
				clr	unk_E7

loc_DDDA:							; CODE XREF: ROM:DDB4-j
								; ROM:DDB6-j ...
				bra	loc_DDFD


; *************** S U B	R O U T	I N E ***************************************


sub_DDDC:							; CODE XREF: sub_C57A+A05-p
				clrb	bit7, var_flags_4F
				ld	x, unk_17F
				cmp	x, #0003h
				bcs	loc_DDED

				cmp	x, #0131h
				bcc	loc_DDED

				setb	bit7, var_flags_4F

loc_DDED:							; CODE XREF: sub_DDDC+8-j
								; sub_DDDC+D-j
				clr	a
				clr	b
				st	d, unk_17F
				ret

; End of function sub_DDDC


; *************** S U B	R O U T	I N E ***************************************


sub_DDF3:							; CODE XREF: sub_C57A+C2C-p
				ld	x, unk_17F
				inc	x
				beq	locret_DDFC

				st	x, unk_17F

locret_DDFC:							; CODE XREF: sub_DDF3+4-j
				ret

; End of function sub_DDF3

; ***************************************************************************

loc_DDFD:							; CODE XREF: ROM:loc_DDDA-j
				ld	a, var_flags_4E
				st	a, unk_1CA
				tbbs	bit6, unk_40, loc_DE43

				ld	a, var_speed_kph
				bne	loc_DE2D

				cmp	#28h, var_rpm_x_5p12
				bcs	loc_DE2F

				cmp	#64h, var_rpm_x_5p12
				bcc	loc_DE2F

				cmp	#3Ah, var_pim2
				bcs	loc_DE2F

				cmp	#0E4h, var_ect
				ble	loc_DE2F

				tbbs	bit6, var_limiter_flags, loc_DE2F

				ld	a, nv_diag_errors_1
				cmpb	a, #08h
				bne	loc_DE2F

				ld	a, nv_diag_errors_1
				cmpb	a, #20h
				beq	loc_DE31

; ***************************************************************************
				.db 8Ch
; ***************************************************************************

loc_DE2D:							; CODE XREF: ROM:DE07-j
				clrb	bit6, var_error_flags1

loc_DE2F:							; CODE XREF: ROM:DE0C-j
								; ROM:DE11-j ...
				clr	unk_E0

loc_DE31:							; CODE XREF: ROM:DE2A-j
				cmp	#7Ah, unk_E0
				bcs	loc_DE38

				setb	bit6, var_error_flags1

loc_DE38:							; CODE XREF: ROM:DE34-j
				cmp	#05h, var_speed_kph
				bcs	loc_DE43

				ld	a, var_diag_errors_4
				and	a, #0FBh
				st	a, var_diag_errors_4

loc_DE43:							; CODE XREF: ROM:DE02-j
								; ROM:DE3B-j
				tbbc	bit5, var_flags_4F, loc_DE65

				cmp	#1Eh, var_rpm_x_5p12
				bcs	loc_DE65

				cmp	#64h, var_speed_kph
				bcc	loc_DE65

				cmp	#0DCh, var_ect
				bcs	loc_DE65

				ld	a, nv_diag_errors_1
				cmpb	a, #40h
				bne	loc_DE65

				ld	a, nv_diag_errors_1
				cmpb	a, #08h
				bne	loc_DE65

				ld	a, var_adc_lambda
				bpz	loc_DE67


loc_DE65:							; CODE XREF: ROM:loc_DE43-j
								; ROM:DE49-j ...
				clr	unk_E8

loc_DE67:							; CODE XREF: ROM:DE63-j
				cmp	#5Ah, unk_E8
				bcs	loc_DE79

				setb	bit6, var_error_flags2
				tbbc	bit2, unk_40, loc_DE79

				ld	a, var_diag_errors_4
				or	a, #40h
				st	a, var_diag_errors_4
				setb	bit3, var_diag_errors_5

loc_DE79:							; CODE XREF: ROM:DE6A-j
								; ROM:DE6E-j
				ld	a, var_adc_lambda
				bpz	loc_DE87

				tbbs	bit2, unk_40, loc_DE87

				clrb	bit6, var_error_flags2
				ld	a, #0BFh
				jsr	sub_DF2C


loc_DE87:							; CODE XREF: ROM:DE7B-j
								; ROM:DE7D-j
				tbbc	bit2, unk_40, loc_DEA1

				tbbc	bit5, var_io_input1, loc_DEA1

				tbbs	bit0, var_io_input1, loc_DEA1

				cmp	#5Ch, var_cnt_startup
				bcs	loc_DE98

				tbbc	bit1, var_io_input1, loc_DE9E


loc_DE98:							; CODE XREF: ROM:DE93-j
				tbbs	bit3, var_io_input1, loc_DE9E

				tbbs	bit6, var_flags_42, loc_DEA1


loc_DE9E:							; CODE XREF: ROM:DE95-j
								; ROM:loc_DE98-j
				setb	bit5, var_diag_errors_5
; ***************************************************************************
				.db 8Ch
; ***************************************************************************

loc_DEA1:							; CODE XREF: ROM:loc_DE87-j
								; ROM:DE8A-j ...
				clrb	bit5, var_diag_errors_5
				tbbc	bit0, var_io_input1, loc_DEAC

				ld	a, var_diag_errors_4
				and	a, #0F7h
				st	a, var_diag_errors_4

loc_DEAC:							; CODE XREF: ROM:DEA3-j
				ld	a, var_flags_43_copy_1D0
				st	a, var_flags_4E
				di
				ld	d, var_error_flags1
				tbbc	bit5, RAMST, loc_DEBC	; Built-in RAM status

				cmp	#7Ah, unk_BB
				bgt	loc_DEC1


loc_DEBC:							; CODE XREF: ROM:DEB4-j
				clrb	bit4, var_flags_4D
				clr	a
				bra	loc_DEE2

; ***************************************************************************

loc_DEC1:							; CODE XREF: ROM:DEBA-j
				tbbs	bit5, IRQLL, loc_DED4	; Interrupt Request Flag LSB

				tbbs	bit5, PORTD_ASRIN, loc_DED4 ; Port D Data Register / ASR Input Data

				cmp	#7Ah, unk_BA
				ble	loc_DED4

				tbbs	bit0, var_io_input1, loc_DED4

				cmp	#7Ah, unk_BC
				bgt	loc_DEE8


loc_DED4:							; CODE XREF: ROM:loc_DEC1-j
								; ROM:DEC4-j ...
				and	a, #85h
				clrb	bit7, var_flags_4E
				clrb	bit4, var_diag_errors_5
				push	a
				ld	a, unk_6D
				and	a, #0FEh
				st	a, unk_6D
				pull	a

loc_DEE2:							; CODE XREF: ROM:DEBF-j
				and	b, #01h
				st	d, var_error_flags1
				clrb	bit3, var_diag_errors_5

loc_DEE8:							; CODE XREF: ROM:DED2-j
				st	d, var_temp_w
				tbbc	bit3, var_diag_errors_5, loc_DEEF

				setb	bit1, var_flags_4D

loc_DEEF:							; CODE XREF: ROM:DEEA-j
				ei
				jsr	sub_F6DB

				push	a
				mov	b, a
				and	b, #97h
				ld	x, #nv_diag_errors_2
				or	b, x + 00h
				and	a, var_diag_errors_4
				and	a, #60h
				st	a, var_temp_7A
				or	b, var_temp_7A
				jsr	write_rB_nv_ram

				pull	b
				and	b, #0FFh
				ld	x, #nv_diag_errors_1
				or	b, x + 00h
				jsr	write_rB_nv_ram

				ld	b, unk_79
				and	b, #60h
				or	b, nv_diag_errors_3
				tbbc	bit7, var_flags_4E, loc_DF1D

				or	b, #01h

loc_DF1D:							; CODE XREF: ROM:DF18-j
				ld	x, #nv_diag_errors_3
				jsr	write_rB_nv_ram

				bra	loc_DF3A


; *************** S U B	R O U T	I N E ***************************************


copy_diag_errors_3_to_4:					; CODE XREF: sub_C57A+197-p
				ld	a, nv_diag_errors_3
				and	a, #60h
				st	a, var_diag_errors_4
				ret

; End of function copy_diag_errors_3_to_4


; *************** S U B	R O U T	I N E ***************************************


sub_DF2C:							; CODE XREF: ROM:DDCD-p
								; ROM:DE84-p
				mov	a, b
				and	a, var_diag_errors_4
				st	a, var_diag_errors_4
				ld	x, #nv_diag_errors_3
				and	b, x + 00h
				jsr	write_rB_nv_ram

				ret

; End of function sub_DF2C

; ***************************************************************************

loc_DF3A:							; CODE XREF: ROM:DF23-j
				ld	a, var_flags_4E
				st	a, var_flags_43_copy_1D0
				clr	a
				jsr	sub_E027

				beq	loc_DF48

				setb	bit4, var_flags_46
; ***************************************************************************
				.db 8Ch
; ***************************************************************************

loc_DF48:							; CODE XREF: ROM:DF43-j
				clrb	bit4, var_flags_46
				tbbs	bit5, RAMST, loc_DF50	; Built-in RAM status

				jmp	loc_E00F

; ***************************************************************************

loc_DF50:							; CODE XREF: ROM:DF4A-j
				tbbs	bit5, var_io_input1, loc_DF56

				tbbc	bit0, var_flags_4D, loc_DFC0


loc_DF56:							; CODE XREF: ROM:loc_DF50-j
				ld	a, unk_A9
				inc	a
				beq	loc_DF81

				ld	b, unk_17B
				inc	b
				bne	loc_DF8F

				ld	a, unk_A8
				beq	loc_DF81

				dec	a
				beq	loc_DF74

				ld	b, #78h
				cmpb	a, #0Fh
				bne	loc_DFBC

				mul	a, #10h
				ld	b, #69h
				bra	loc_DFBC

; ***************************************************************************

loc_DF74:							; CODE XREF: ROM:DF66-j
				st	a, unk_A8
				ld	a, unk_A9
				jsr	sub_E027

				beq	loc_DF8A

				ld	b, #5Ah
				bra	loc_DFAE

; ***************************************************************************

loc_DF81:							; CODE XREF: ROM:DF59-j
								; ROM:DF63-j
				jsr	sub_E027

				bne	loc_DF8A

				ld	b, #7Ch
				bra	loc_DFAC

; ***************************************************************************

loc_DF8A:							; CODE XREF: ROM:DF7B-j
								; ROM:DF84-j
				clr	a
				ld	b, #3Bh
				bra	loc_DFAE

; ***************************************************************************

loc_DF8F:							; CODE XREF: ROM:DF5F-j
				bvs	loc_DF94

				jmp	loc_E01B

; ***************************************************************************

loc_DF94:							; CODE XREF: ROM:loc_DF8F-j
				ld	a, unk_A8
				bne	loc_DFBA

				st	a, unk_17B
				tbbc	bit5, var_io_input1, loc_DFC0

				setb	bit0, var_flags_4D
				ld	a, unk_A9
				bmi	loc_DFAA

				bne	loc_DFB2

				bsr	sub_E027

				bne	loc_DFB2


loc_DFAA:							; CODE XREF: ROM:DFA2-j
				ld	b, #0FCh

loc_DFAC:							; CODE XREF: ROM:DF88-j
				ld	a, #80h

loc_DFAE:							; CODE XREF: ROM:DF7F-j
								; ROM:DF8D-j
				st	a, unk_A9
				bra	loc_E01B

; ***************************************************************************

loc_DFB2:							; CODE XREF: ROM:DFA4-j
								; ROM:DFA8-j
				st	a, unk_A9
				ld	y, #table_diag-3
				add	y, a
				ld	a, y + 02h

loc_DFBA:							; CODE XREF: ROM:DF96-j
				ld	b, #0F8h

loc_DFBC:							; CODE XREF: ROM:DF6C-j
								; ROM:DF72-j
				st	a, unk_A8
				bra	loc_E01B

; ***************************************************************************

loc_DFC0:							; CODE XREF: ROM:DF53-j
								; ROM:DF9B-j
				tbbc	bit2, unk_40, loc_DFE1

				tbbc	bit0, var_flags_46, loc_DFE1

				ld	b, unk_17B
				cmp	b, #7Eh
				bcc	loc_DFCF

				ld	b, #7Fh

loc_DFCF:							; CODE XREF: ROM:DFCB-j
				cmp	b, #0FEh
				bgea	loc_DFD5

				ld	b, #0FFh

loc_DFD5:							; CODE XREF: ROM:DFD1-j
				inc	b
				beq	loc_DFDD

				bvc	loc_DFDF

				ld	b, #0FEh
; ***************************************************************************
				.db 8Ch
; ***************************************************************************

loc_DFDD:							; CODE XREF: ROM:DFD6-j
				ld	b, #7Eh

loc_DFDF:							; CODE XREF: ROM:DFD8-j
				bra	loc_E014

; ***************************************************************************

loc_DFE1:							; CODE XREF: ROM:loc_DFC0-j
								; ROM:DFC3-j
				tbbc	bit2, unk_40, loc_DFE9

				ld	b, #0FEh
				tbbs	bit1, var_flags_4D, loc_E014


loc_DFE9:							; CODE XREF: ROM:loc_DFE1-j
				ld	b, #0B4h
				ld	a, var_temp_w
				and	a, #0EFh
				bne	loc_E014

				ld	a, unk_79
				and	a, #81h
				bne	loc_E014

				ld	a, var_flags_43_copy_1D0
				cmpb	a, #80h
				bne	loc_E014

				ld	a, unk_6D
				cmpb	a, #01h
				bne	loc_E014

				tbbs	bit4, var_diag_errors_5, loc_E014

				ld	b, unk_17B
				inc	b
				bpz	loc_E00F

				bvc	loc_E014


loc_E00F:							; CODE XREF: ROM:DF4D-j
								; ROM:E00B-j
				clr	b
				tbbc	bit0, var_flags_46, loc_E014

				dec	b

loc_E014:							; CODE XREF: ROM:loc_DFDF-j
								; ROM:DFE6-j ...
				clrb	bit0, var_flags_4D
				ld	#0FFh, unk_A9
				clr	unk_A8

loc_E01B:							; CODE XREF: ROM:DF91-j
								; ROM:DFB0-j ...
				st	b, unk_17B
				bpz	loc_E023

				clrb	bit1, PORTD_ASRIN
; ***************************************************************************
				.db 8Ch
; ***************************************************************************

loc_E023:							; CODE XREF: ROM:E01E-j
				setb	bit1, PORTD_ASRIN
				bra	locret_E090


; *************** S U B	R O U T	I N E ***************************************


sub_E027:							; CODE XREF: ROM:DF40-p
								; ROM:DF78-p ...
				ld	y, #table_diag-3
				add	a, #03h
				add	y, a
				cmp	a, #3Fh
				bgt	loc_E04E

				ld	x, #0000h
				ld	b, y + 00h
				add	x, b
				ld	b, y + 01h
				cmpb	b, x + 00h
				beq	sub_E027


loc_E03D:							; CODE XREF: sub_E027+25j
				cmp	a, #3Fh
				bcc	loc_E04F

				ld	b, y + 02h
				cmp	b, y + 05h
				bne	loc_E04F

				add	a, #03h
				inc	y
				inc	y
				inc	y
				bra	loc_E03D

; ***************************************************************************

loc_E04E:							; CODE XREF: sub_E027+8-j
				clr	a

loc_E04F:							; CODE XREF: sub_E027+18-j
								; sub_E027+1E-j
				cmpz	a
				ret

; End of function sub_E027

; ***************************************************************************
table_diag:			.db nv_diag_errors_1		; DATA XREF: ROM:DFB4-t
								; sub_E027-t
				.db 01h
				.db 21h
				.db nv_diag_errors_1
				.db 80h
				.db 21h
				.db nv_diag_errors_1
				.db 02h
				.db 31h
				.db nv_diag_errors_1
				.db 04h
				.db 41h
				.db unk_6D
				.db 01h
				.db 61h
				.db nv_diag_errors_2
				.db 20h
				.db 12h
				.db nv_diag_errors_2
				.db 04h
				.db 12h
				.db nv_diag_errors_1
				.db 08h
				.db 22h
				.db nv_diag_errors_2
				.db 10h
				.db 32h
				.db nv_diag_errors_1
				.db 10h
				.db 42h
				.db nv_diag_errors_2
				.db 40h
				.db 52h
				.db nv_diag_errors_1
				.db 20h
				.db 13h
				.db nv_diag_errors_3
				.db 01h
				.db 43h
				.db nv_diag_errors_2
				.db 02h
				.db 14h
				.db nv_diag_errors_1
				.db 40h
				.db 24h
				.db var_diag_errors_4
				.db 04h
				.db 24h
				.db var_diag_errors_4
				.db 08h
				.db 34h
				.db var_diag_errors_5
				.db 20h
				.db 15h
				.db nv_diag_errors_2
				.db 01h
				.db 25h
				.db var_diag_errors_5
				.db 10h
				.db 35h
				.db nv_diag_errors_2
				.db 80h
				.db 45h
; ***************************************************************************

locret_E090:							; CODE XREF: ROM:E025-j
				ret

; ***************************************************************************
; START	OF FUNCTION CHUNK FOR sub_C57A

loc_E091:							; CODE XREF: sub_C57A:loc_DCE8-j
				jmp	loc_E2D7

; END OF FUNCTION CHUNK	FOR sub_C57A

; *************** S U B	R O U T	I N E ***************************************


sub_E094:							; CODE XREF: sub_C57A+1D9Dp

; FUNCTION CHUNK AT E22A SIZE 000000AD BYTES

				tbbc	bit5, var_io_input1, loc_E0B2

				tbbc	bit0, var_io_input1, loc_E0B4

				tbbc	bit3, var_io_input1, loc_E0B4

				ld	a, var_tps_raw
				cmp	a, #9Ah
				bcs	loc_E0B4

				ld	d, var_rpm_x_5p12
				bne	loc_E0B4

				cmp	#0B4h, var_speed_kph
				bcs	loc_E0B4

				tbbs	bit1, var_io_input1, loc_E0B7

				bra	loc_E0B4

; ***************************************************************************

loc_E0B2:							; CODE XREF: sub_E094-j
				clrb	bit0, unk_40

loc_E0B4:							; CODE XREF: sub_E094+3-j
								; sub_E094+6-j ...
				jmp	loc_E22A

; ***************************************************************************

loc_E0B7:							; CODE XREF: sub_E094+19-j
				clr	a
				ld	b, #04h
				st	d, IMASK		; Interrupt Request Mask MSB
				clr	DOM			; DOUT Control Register

loc_E0BE:							; CODE XREF: sub_E094+7Cj
				tbbs	bit7, var_io_input1, loc_E0DB

				tbbs	bit4, var_io_input1, loc_E0C7

				jmp	loc_E112

; ***************************************************************************

loc_E0C7:							; CODE XREF: sub_E094+2D-j
				ld	a, #0Ah
				st	a, unk_21D
				ld	b, #15h
				or	b, #0C0h
				st	b, unk_21E
				ld	#01h, PORTD_ASRIN	; Port D Data Register / ASR Input Data
				ld	#0Dh, DOUT		; DOUT Data Register
				bra	loc_E101

; ***************************************************************************

loc_E0DB:							; CODE XREF: sub_E094:loc_E0BE-j
				ld	a, #15h
				tbbc	bit5, PORTD_ASRIN, loc_E0E2 ; Port D Data Register / ASR Input Data

				xor	a, #01h

loc_E0E2:							; CODE XREF: sub_E094+49-j
				tbbs	bit7, PORTB, loc_E0E7	; Port B Data Register

				xor	a, #04h

loc_E0E7:							; CODE XREF: sub_E094:loc_E0E2-j
				st	a, unk_21D
				ld	a, #0Ah
				or	a, #0A0h
				tbbc	bit1, var_io_input2, loc_E0F3

				xor	a, #04h

loc_E0F3:							; CODE XREF: sub_E094+5A-j
				tbbc	bit0, var_io_input2, loc_E0F8

				xor	a, #08h

loc_E0F8:							; CODE XREF: sub_E094:loc_E0F3-j
				st	a, unk_21E
				ld	#02h, PORTD_ASRIN	; Port D Data Register / ASR Input Data
				ld	#0Eh, DOUT		; DOUT Data Register

loc_E101:							; CODE XREF: sub_E094+45-j
				ld	x, #0F9C8h

loc_E104:							; CODE XREF: sub_E094+71j
				inc	x
				bne	loc_E104

				jsr	sub_E1C9

				ld	x, #0F9C0h

loc_E10D:							; CODE XREF: sub_E094+7Aj
				inc	x
				bne	loc_E10D

				bra	loc_E0BE

; ***************************************************************************

loc_E112:							; CODE XREF: sub_E094+30-j
				di
				clr	a
				clr	b
				st	d, IMASK		; Interrupt Request Mask MSB
				ld	a, #80h
				st	a, unk_21E
				ld	x, #0F9C8h

loc_E11F:							; CODE XREF: sub_E094+8Cj
				inc	x
				bne	loc_E11F

				jsr	sub_E1C9

				ld	x, #0F9C0h

loc_E128:							; CODE XREF: sub_E094+95j
				inc	x
				bne	loc_E128

				jsr	sub_E1E4

				ld	x, #0F9C0h

loc_E131:							; CODE XREF: sub_E094+9Ej
				inc	x
				bne	loc_E131

				ld	#04h, PORTB		; Port B Data Register
				ld	#08h, DOUT		; DOUT Data Register
				div	d, #00h
				div	d, #00h
				clrb	bit2, DOM
				setb	bit2, DOUT
				ld	b, #2Fh

loc_E144:							; CODE XREF: sub_E094+B1j
				dec	b
				bne	loc_E144

				inc	b
				ld	#03h, PORTB		; Port B Data Register
				tbbc	bit5, PORTB, loc_E154	; Port B Data Register

				tbbs	bit4, PORTB, loc_E154	; Port B Data Register

				tbbs	bit3, PORTB, loc_E156	; Port B Data Register


loc_E154:							; CODE XREF: sub_E094+B7-j
								; sub_E094+BA-j
				bra	loc_E1A5

; ***************************************************************************

loc_E156:							; CODE XREF: sub_E094+BD-j
								; sub_E094+132j
				clrb	bit1, PORTD_ASRIN
				clr	a

loc_E159:							; CODE XREF: sub_E094+E2j
				mov	a, b
				ld	y, #unk_40

loc_E15D:							; CODE XREF: sub_E094+CEj
				st	a, [y]
				inc	a
				cmp	y, #var_nv_tps
				bcs	loc_E15D

				ld	y, #unk_40

loc_E167:							; CODE XREF: sub_E094+DBj
				ld	a, [y]
				cmp	a, b
				bne	loc_E1A4

				inc	b
				cmp	y, #var_nv_tps
				bcs	loc_E167

				jsr	sub_E1E4

				inc	b
				mov	b, a
				bne	loc_E159

				ld	x, #rom_start
				clr	a
				clr	b

loc_E17D:							; CODE XREF: sub_E094+F9j
				ld	y, #0100h

loc_E180:							; CODE XREF: sub_E094+F1j
				add	d, x + 00h
				inc	x
				inc	x
				dec	y
				bne	loc_E180

				jsr	sub_E1E4

				cmp	x, #0000h
				bne	loc_E17D

				cmp	d, #0AA55h
				bne	loc_E1A4

				tbbs	bit5, PORTB, loc_E1A5	; Port B Data Register

				tbbc	bit4, PORTB, loc_E1A5	; Port B Data Register

				tbbs	bit3, PORTB, loc_E1A5	; Port B Data Register

				shl	b
				setb	bit1, PORTD_ASRIN
				ld	a, #19h
				bra	loc_E1B7

; ***************************************************************************

loc_E1A4:							; CODE XREF: sub_E094+D5-j
								; sub_E094+FE-j
				clr	b

loc_E1A5:							; CODE XREF: sub_E094:loc_E154-j
								; sub_E094+100-j ...
				tbs	bit1, PORTD_ASRIN	; Port D Data Register / ASR Input Data
				beq	loc_E1AB

				clrb	bit1, PORTD_ASRIN

loc_E1AB:							; CODE XREF: sub_E094+113-j
				ld	a, #7Dh
				cmpz	b
				beq	loc_E1B7

				cmp	b, #0FFh
				bne	loc_E1B6

				ld	a, #5Eh

loc_E1B6:							; CODE XREF: sub_E094+11E-j
				shl	a

loc_E1B7:							; CODE XREF: sub_E094+10E-j
								; sub_E094+11A-j ...
				ld	x, #0F7B5h

loc_E1BA:							; CODE XREF: sub_E094+127j
				inc	x
				bne	loc_E1BA

				bsr	sub_E1E4

				dec	a
				bne	loc_E1B7

				cmp	b, #0AAh
				bne	loc_E1A5

				jmp	loc_E156

; End of function sub_E094


; *************** S U B	R O U T	I N E ***************************************


sub_E1C9:							; CODE XREF: sub_E094+73-p
								; sub_E094+8E-p
				push	d
				tbs	bit0, PORTA		; Port A Data Register
				beq	loc_E1D0

				clrb	bit0, PORTA

loc_E1D0:							; CODE XREF: sub_E1C9+3-j
				jsr	check_io_inputs

				jsr	start_dma

				tbbc	bit0, var_io_input1, loc_E1F7

				tbbc	bit3, var_io_input1, loc_E1F7

				tbbs	bit6, PORTB, loc_E1F7	; Port B Data Register

				tbbs	bit2, PORTA, loc_E1F7	; Port A Data Register

				pull	d
				ret

; End of function sub_E1C9


; *************** S U B	R O U T	I N E ***************************************


sub_E1E4:							; CODE XREF: sub_E094+97-p
								; sub_E094+DD-p	...
				tbs	bit0, PORTA		; Port A Data Register
				beq	loc_E1EA

				clrb	bit0, PORTA

loc_E1EA:							; CODE XREF: sub_E1E4+2-j
				tbbc	bit1, PORTA, loc_E1F7	; Port A Data Register

				tbbs	bit4, PORTA, loc_E1F7	; Port A Data Register

				tbbs	bit6, PORTB, loc_E1F7	; Port B Data Register

				tbbs	bit2, PORTA, loc_E1F7	; Port A Data Register

				ret

; ***************************************************************************

loc_E1F7:							; CODE XREF: sub_E1C9+D-j
								; sub_E1C9+10-j	...
				ld	x, #0F9C0h

loc_E1FA:							; CODE XREF: sub_E1E4+17j
				inc	x
				bne	loc_E1FA

				tbs	bit0, PORTA		; Port A Data Register
				beq	loc_E203

				clrb	bit0, PORTA

loc_E203:							; CODE XREF: sub_E1E4+1B-j
				ld	x, #0F9C0h

loc_E206:							; CODE XREF: sub_E1E4+23j
				inc	x
				bne	loc_E206

				ld	y, #unk_40
				clr	a
				clr	b
				st	d, IRQL			; Interrupt Request Flag MSB

loc_E210:							; CODE XREF: sub_E1E4+30j
				st	d, [y]
				cmp	y, #stack_top
				ble	loc_E210

				ld	s, #stack_top
				ld	#0DDh, PORTA		; Port A Data Register
				ld	#0D9h, PORTB		; Port B Data Register
				ld	#03h, PORTD_ASRIN	; Port D Data Register / ASR Input Data
				ld	#08h, DOUT		; DOUT Data Register
				setb	bit0, unk_40
				jmp	loc_C659

; End of function sub_E1E4

; ***************************************************************************
; START	OF FUNCTION CHUNK FOR sub_E094

loc_E22A:							; CODE XREF: sub_E094:loc_E0B4-j
				tbbs	bit0, unk_40, loc_E230

				jmp	locret_E2D6

; ***************************************************************************

loc_E230:							; CODE XREF: sub_E094:loc_E22A-j
				ld	a, #09h
				or	a, #0E0h
				st	a, unk_21E
				clr	a
				tbbs	bit1, var_io_input1, loc_E251

				tbbc	bit6, var_io_input2, loc_E240

				or	a, #01h

loc_E240:							; CODE XREF: sub_E094+1A7-j
				tbbc	bit7, var_io_input2, loc_E245

				or	a, #02h

loc_E245:							; CODE XREF: sub_E094:loc_E240-j
				tbbc	bit3, var_io_input2, loc_E24A

				or	a, #04h

loc_E24A:							; CODE XREF: sub_E094:loc_E245-j
				tbbc	bit2, var_io_input2, loc_E24F

				or	a, #08h

loc_E24F:							; CODE XREF: sub_E094:loc_E24A-j
				bra	loc_E268

; ***************************************************************************

loc_E251:							; CODE XREF: sub_E094+1A4-j
				tbbc	bit4, var_io_input2, loc_E256

				or	a, #01h

loc_E256:							; CODE XREF: sub_E094:loc_E251-j
				tbbc	bit5, var_io_input2, loc_E25B

				or	a, #02h

loc_E25B:							; CODE XREF: sub_E094:loc_E256-j
				tbbc	bit2, var_io_input1, loc_E260

				or	a, #04h

loc_E260:							; CODE XREF: sub_E094:loc_E25B-j
				ld	b, SMRC_SIR		; Serial Master	Register Control
				cmpb	b, #02h
				beq	loc_E268

				or	a, #08h

loc_E268:							; CODE XREF: sub_E094:loc_E24F-j
								; sub_E094+1D0-j
				ld	b, var_ect
				cmp	b, #18h
				bcs	loc_E2CC

				ld	a, unk_23F
				cmp	b, #26h
				bcs	loc_E2D1

				ld	a, unk_23E
				cmp	b, #3Ah
				bcs	loc_E2CE

				ld	a, unk_1C9
				tbbc	bit0, var_io_input1, loc_E291

				ld	a, unk_1C8
				tbbc	bit1, var_io_input1, loc_E291

				ld	a, unk_1C7
				tbbc	bit3, var_io_input1, loc_E291

				ld	a, unk_1C6

loc_E291:							; CODE XREF: sub_E094+1EB-j
								; sub_E094+1F1-j ...
				cmp	b, #6Bh
				bcs	loc_E2D1

				ld	a, var_tha
				tbbc	bit1, var_io_input1, loc_E29D

				ld	a, unk_228

loc_E29D:							; CODE XREF: sub_E094+203-j
				cmp	b, #92h
				bcs	loc_E2D1

				ld	a, var_tps_raw
				cmp	b, #0A9h
				bcs	loc_E2D1

				ld	a, var_adc_o2_heater
				cmp	b, #0BCh
				bcs	loc_E2D1

				ld	a, #98h
				cmp	b, #0CBh
				bcs	loc_E2D1

				ld	a, var_speed_kph
				cmp	b, #0DCh
				bcs	loc_E2D1

				ld	a, unk_FC
				cmp	b, #0EAh
				bcs	loc_E2D1

				ld	a, var_tham
				cmp	b, #0F3h
				bcs	loc_E2D1

				ld	a, var_adc_unk_14C
				bra	loc_E2D1

; ***************************************************************************

loc_E2CC:							; CODE XREF: sub_E094+1D8-j
				add	a, #08h

loc_E2CE:							; CODE XREF: sub_E094+1E6-j
				shl	a
				shl	a
				shl	a

loc_E2D1:							; CODE XREF: sub_E094+1DF-j
								; sub_E094+1FF-j ...
				mul	a, #04h
				st	d, var_iscv_unk_190

locret_E2D6:							; CODE XREF: sub_E094+199-j
				ret

; END OF FUNCTION CHUNK	FOR sub_E094
; ***************************************************************************
; START	OF FUNCTION CHUNK FOR sub_C57A

loc_E2D7:							; CODE XREF: sub_C57A:loc_E091-j
				tbs	bit7, unk_41
				beq	loc_E2DE

				jmp	loc_E31A

; ***************************************************************************

loc_E2DE:							; CODE XREF: sub_C57A+1D5F-j
				ld	d, #0DB07h
				jsr	increment_counters

				ld	a, unk_E2
				inc	a
				st	a, unk_E2
				cmpb	a, #01h
				bne	loc_E2F3

				ld	d, #0E301h
				jsr	increment_counters


loc_E2F3:							; CODE XREF: sub_C57A+1D71-j
				jsr	sub_E3A9

				jsr	sub_CAC1

				jsr	sub_EB8E

				jsr	sub_D31C

				ld	a, unk_1D2
				st	a, var_flags_4E
				jsr	sub_D456

				ld	a, unk_1CC
				st	a, var_flags_4E
				jsr	loc_D9FF

				ld	a, var_flags_4E
				st	a, unk_1CC
				jsr	loc_DCEB

				jsr	sub_E094


loc_E31A:							; CODE XREF: sub_C57A+1D61-j
				jsr	sub_E3C8

				jsr	sub_E4C5

				tbbs	bit0, var_flags_46, loc_E326

				jmp	loc_E3C6

; ***************************************************************************

loc_E326:							; CODE XREF: sub_C57A+1DA6-j
				ld	y, #table_ect_C0DB
				jsr	table_ect_pair_interpolate

				st	d, var_temp_7A
				ld	d, var_rpm_x_5p12
				ld	y, #table_rpm_C0F6
				jsr	j_table_rD_fixed_interpolate

				push	a
				ld	y, #table_ect_C102
				jsr	table_ect_fixed_32_interpolate

				pull	b
				cmp	a, b
				bcc	loc_E342

				mov	a, b

loc_E342:							; CODE XREF: sub_C57A+1DC5-j
				tbbs	bit0, unk_40, loc_E34D

				ld	a, unk_9F
				cmp	a, #7Ah
				bcs	loc_E34D

				ld	b, #1Ah

loc_E34D:							; CODE XREF: sub_C57A:loc_E342-j
								; sub_C57A+1DCF-j
				clr	a
				ld	x, var_temp_7A
				jsr	mult_rDrX

				st	d, var_temp_7A
				ld	b, var_adc_battery
				ld	y, #table_battery_unk_C105
				jsr	table_rB_fixed_16_interpolate

				mov	a, b
				ld	x, var_temp_7A
				jsr	mult_rBrX2

				st	d, var_temp_7A
				tbbc	bit7, var_flags_46, loc_E379

				ld	d, #0758h
				tbbs	bit0, var_io_input1, loc_E397

				ld	d, #0564h
				tbbc	bit2, var_flags_46, loc_E397

				ld	d, #014Ah
				bra	loc_E397

; ***************************************************************************

loc_E379:							; CODE XREF: sub_C57A+1DEB-j
				tbbs	bit3, var_flags_4D, loc_E38F

				clr	b
				ld	a, nv_unk_trim_98
				tbbs	bit0, var_flags_42, loc_E384

				ld	a, #50h

loc_E384:							; CODE XREF: sub_C57A+1E05-j
				div	d, #61h
				bcc	loc_E38A

				ld	b, #0FFh

loc_E38A:							; CODE XREF: sub_C57A+1E0C-j
				ld	x, var_temp_7A
				jsr	mult_rBrX


loc_E38F:							; CODE XREF: sub_C57A:loc_E379-j
				cmp	d, #0F424h
				ble	loc_E397

				ld	d, #0F424h

loc_E397:							; CODE XREF: sub_C57A+1DF1-j
								; sub_C57A+1DF7-j ...
				di
				st	d, var_inj_pw_inj1
				st	d, unk_106
				st	d, unk_108
				st	d, unk_10A
				clrb	bit7, var_ignition_flags
				ei
				bra	loc_E3C6

; END OF FUNCTION CHUNK	FOR sub_C57A

; *************** S U B	R O U T	I N E ***************************************


sub_E3A9:							; CODE XREF: sub_C57A:loc_E2F3-p
				ld	a, unk_9F
				tbbc	bit0, var_flags_46, loc_E3B4

				tbbc	bit0, var_io_input1, loc_E3B4

				inc	a
				beq	loc_E3C2


loc_E3B4:							; CODE XREF: sub_E3A9+2-j
								; sub_E3A9+5-j
				cmp	#20h, var_rpm_div_25
				bcc	loc_E3C2

				cmp	#3Dh, var_cnt_startup
				bcc	loc_E3C2

				cmp	a, #0A8h
				bcs	loc_E3C3


loc_E3C2:							; CODE XREF: sub_E3A9+9-j
								; sub_E3A9+E-j ...
				clr	a

loc_E3C3:							; CODE XREF: sub_E3A9+17-j
				st	a, unk_9F
				ret

; End of function sub_E3A9

; ***************************************************************************
; START	OF FUNCTION CHUNK FOR sub_C57A

loc_E3C6:							; CODE XREF: sub_C57A+1DA9-j
								; sub_C57A+1E2D-j
				bra	loc_E42D

; END OF FUNCTION CHUNK	FOR sub_C57A

; *************** S U B	R O U T	I N E ***************************************


sub_E3C8:							; CODE XREF: sub_C57A+476-p
								; sub_C57A:loc_E31A-p
				ld	x, unk_134
				ld	a, unk_231
				beq	loc_E3E7

				tbbc	bit2, unk_44, loc_E3DD

				tbbc	bit2, var_flags_4D, loc_E3DD

				mul	a, #80h
				shl	d
				bcc	loc_E3DD

				ld	a, #0FFh

loc_E3DD:							; CODE XREF: sub_E3C8+8-j
								; sub_E3C8+B-j ...
				mov	a, b
				add	b, #80h
				bcc	loc_E3E4

				ld	b, #0FFh

loc_E3E4:							; CODE XREF: sub_E3C8+18-j
				jsr	mult_rBrX2


loc_E3E7:							; CODE XREF: sub_E3C8+6-j
				ld	b, unk_116
				bmi	loc_E3EF

				jsr	mult_rBrX2


loc_E3EF:							; CODE XREF: sub_E3C8+22-j
				push	x
				jsr	sub_D14D

				clr	a
				add	b, unk_62
				addc	a, #00h
				add	d, #0100h
				st	d, var_temp_w
				mov	s, x
				ld	x, x + 00h
				jsr	sub_C4D4

				jsr	divide_rD_32_saturate

				st	b, unk_1C5
				ld	a, unk_1CC
				st	a, var_flags_4E
				jsr	loc_DB3F

				ld	a, var_flags_4E
				st	a, unk_1CC
				ld	d, unk_1C0
				jsr	divide_rD_128

				add	d, var_temp_w
				sub	d, #0199h
				bcc	loc_E425

				clr	a
				clr	b

loc_E425:							; CODE XREF: sub_E3C8+59-j
				pull	x
				jsr	sub_C4D4

				st	d, unk_132
				ret

; End of function sub_E3C8

; ***************************************************************************
; START	OF FUNCTION CHUNK FOR sub_C57A

loc_E42D:							; CODE XREF: sub_C57A:loc_E3C6-j
				ld	x, #0080h
				ld	a, unk_22A
				add	x, a
				ld	a, unk_22B
				add	x, a
				add	x, a
				ld	a, unk_22E
				add	x, a
				add	x, a
				add	x, a
				add	x, a
				tbbc	bit2, var_flags_46, loc_E448

				ld	a, unk_22D
				add	x, a
				add	x, a

loc_E448:							; CODE XREF: sub_C57A+1EC6-j
				ld	a, unk_230
				add	x, a
				mov	x, d
				sub	b, unk_11A
				subc	a, #00h
				shl	d
				mov	d, x
				ld	b, unk_235
				cmp	b, #80h
				beq	loc_E45F

				jsr	sub_C4D0

				mov	d, x

loc_E45F:							; CODE XREF: sub_C57A+1EDF-j
				ld	d, unk_226
				jsr	mult_rDrX

				mov	d, x
				tbbc	bit2, var_flags_46, loc_E46E

				ld	b, unk_60
				jsr	mult_rBrX2


loc_E46E:							; CODE XREF: sub_C57A+1EEC-j
				ld	b, unk_22F
				jsr	sub_C4D0

				st	d, unk_134
				clrb	bit0, var_diag_errors_5
				ld	a, var_nv_idle_trim
				tbbs	bit0, var_flags_42, loc_E480

				ld	a, #66h

loc_E480:							; CODE XREF: sub_C57A+1F01-j
				mul	a, #04h
				st	d, unk_79
				ld	d, var_iscv_unk_190
				sub	d, unk_79
				bcc	loc_E48E

				jsr	set_knock_sensor_err_flag


loc_E48E:							; CODE XREF: sub_C57A+1F0F-j
				mov	d, x
				ld	a, #19h
				jsr	mult_rArX

				jsr	check_knock_sensor_err_flag

				tbbc	bit1, var_diag_errors_5, loc_E49F

				add	d, #0010h
				bvs	loc_E4A4


loc_E49F:							; CODE XREF: sub_C57A+1F1D-j
				cmpz	a
				bmi	loc_E4A7

				beq	loc_E4A8


loc_E4A4:							; CODE XREF: sub_C57A+1F23-j
				ld	b, #0FFh
; ***************************************************************************
				.db 41h
; ***************************************************************************

loc_E4A7:							; CODE XREF: sub_C57A+1F26-j
				clr	b

loc_E4A8:							; CODE XREF: sub_C57A+1F28-j
				st	b, unk_13D
				bra	loc_E4C2

; END OF FUNCTION CHUNK	FOR sub_C57A

; *************** S U B	R O U T	I N E ***************************************


sub_E4AD:							; CODE XREF: sub_C57A+1FADp
								; sub_E6DBp
				ld	d, var_tps
				cmpz	a
				bne	loc_E4B3

				clr	b

loc_E4B3:							; CODE XREF: sub_E4AD+3-j
				st	d, var_temp_w
				ld	a, unk_13D
				mul	a, #40h
				add	d, var_temp_w
				bcc	locret_E4C1

				ld	d, #0FFFFh

locret_E4C1:							; CODE XREF: sub_E4AD+F-j
				ret

; End of function sub_E4AD

; ***************************************************************************
; START	OF FUNCTION CHUNK FOR sub_C57A

loc_E4C2:							; CODE XREF: sub_C57A+1F31-j
				jmp	loc_E741

; END OF FUNCTION CHUNK	FOR sub_C57A

; *************** S U B	R O U T	I N E ***************************************


sub_E4C5:							; CODE XREF: sub_C57A+479-p
								; sub_C57A+1DA3-p
				jsr	sub_E6DB

				st	a, unk_131
				mov	x, d
				st	a, unk_13F
				ld	b, unk_13E
				jsr	mult_rBrX2

				st	x, unk_12B
				ld	d, var_pim2
				tbbs	bit0, unk_40, loc_E4E3

				tbbs	bit0, var_flags_46, loc_E4E3

				tbbc	bit7, unk_47, loc_E4E6


loc_E4E3:							; CODE XREF: sub_E4C5+15-j
								; sub_E4C5+18-j
				jmp	loc_E59B

; ***************************************************************************

loc_E4E6:							; CODE XREF: sub_E4C5+1B-j
				ld	d, var_inj_pw_inj1
				add	d, #0591h
				bcc	loc_E4F1

				ld	d, #0FFFFh

loc_E4F1:							; CODE XREF: sub_E4C5+27-j
				shr	d
				shr	d
				shr	d
				st	d, var_temp_w
				ld	a, unk_103
				mul	a, #0ABh
; End of function sub_E4C5

; START	OF FUNCTION CHUNK FOR sub_C57A
				add	d, #053Fh
				bcc	loc_E503

				ld	d, #0FFFFh

loc_E503:							; CODE XREF: sub_C57A+1F84-j
				sub	d, #0755h
				jsr	divide_rD_32_saturate

				mov	b, a
				ld	y, #00F0h
				mul	a, y + 00h
				add	d, #0100h
				bcs	loc_E518

				add	d, var_temp_w
				bcc	loc_E51A


loc_E518:							; CODE XREF: sub_C57A+1F98-j
				ld	a, #0FFh

loc_E51A:							; CODE XREF: sub_C57A+1F9C-j
				cmp	a, #0Eh
				ble	loc_E520

				ld	a, #0Eh

loc_E520:							; CODE XREF: sub_C57A+1FA2-j
				push	a
				shr	a
				st	a, var_temp_7B
				tbbc	bit6, unk_47, loc_E550

				bsr	sub_E4AD

				jsr	divide_rD_64

				st	d, var_temp_w
				ld	a, var_tps_delta
				st	a, var_temp_7A
				mul	a, var_temp_7B
				cmp	#00h, var_temp_7A
				bpz	loc_E542

				sub	a, var_temp_7B
				add	d, var_temp_w
				bcs	loc_E544

				clr	a
				clr	b
; ***************************************************************************
				.db 8Ch
; ***************************************************************************

loc_E542:							; CODE XREF: sub_C57A+1FBD-j
				add	d, var_temp_w

loc_E544:							; CODE XREF: sub_C57A+1FC3-j
				shl	d
				shl	d
				shl	d
				jsr	sub_E6E1

				ld	b, unk_13E
				jsr	mult_rBrX2


loc_E550:							; CODE XREF: sub_C57A+1FAA-j
				pull	a
				st	a, var_temp_7B
				ld	d, unk_12D
				st	d, var_temp_w

loc_E558:							; CODE XREF: sub_C57A+1FEAj
				push	x
				ld	y, #0078h
				ld	b, var_temp_7A
				jsr	sub_C54C

				pull	x
				dec	var_temp_7B
				bne	loc_E558

				clrb	bit0, var_diag_errors_5
				sub	d, unk_12F
				bcc	loc_E570

				jsr	set_knock_sensor_err_flag


loc_E570:							; CODE XREF: sub_C57A+1FF1-j
				push	d
				ld	a, var_pim2
				sub	a, #61h
				ble	loc_E585

				ld	x, #0000h
				jsr	mult_rArX

				add	d, #0100h
				pull	x
				jsr	mult_rDrX

; ***************************************************************************
				.db 41h
; ***************************************************************************

loc_E585:							; CODE XREF: sub_C57A+1FFB-j
				pull	d
				jsr	check_knock_sensor_err_flag

				tbbc	bit0, var_diag_errors_5, loc_E594

				add	d, var_pim2
				bcs	loc_E59B

				clr	a
				clr	b
				bra	loc_E59B

; ***************************************************************************

loc_E594:							; CODE XREF: sub_C57A+200F-j
				add	d, var_pim2
				bcc	loc_E59B

				ld	d, #0FFFFh

loc_E59B:							; CODE XREF: sub_E4C5:loc_E4E3-j
								; sub_C57A+2014-j ...
				st	d, unk_202
				ld	d, unk_12B
				sub	d, unk_12F
				bcs	loc_E5AC

				bpz	loc_E5B0

				ld	a, #7Fh
				bra	loc_E5B0

; ***************************************************************************

loc_E5AC:							; CODE XREF: sub_C57A+202A-j
				bmi	loc_E5B0

				ld	a, #80h

loc_E5B0:							; CODE XREF: sub_C57A+202C-j
								; sub_C57A+2030-j ...
				st	a, unk_140
				ld	d, unk_12D
				sub	d, unk_12F
				bcs	loc_E5C1

				bpz	loc_E5C5

				ld	a, #7Fh
				bra	loc_E5C5

; ***************************************************************************

loc_E5C1:							; CODE XREF: sub_C57A+203F-j
				bmi	loc_E5C5

				ld	a, #80h

loc_E5C5:							; CODE XREF: sub_C57A+2041-j
								; sub_C57A+2045-j ...
				st	a, unk_141
				jsr	sub_E996

				jsr	sub_E7D9

				ld	a, unk_1D1
				st	a, var_flags_4E
				tbbc	bit0, var_flags_46, loc_E5D9

				jmp	loc_E6D2

; ***************************************************************************

loc_E5D9:							; CODE XREF: sub_C57A+2059-j
				ld	a, #61h
				sub	a, nv_unk_trim_98
				bcc	loc_E5E0

				clr	a

loc_E5E0:							; CODE XREF: sub_C57A+2063-j
				mul	a, #12h
				push	d
				jsr	divide_rD_64_saturate

				st	b, unk_F6
				pull	d
				add	d, unk_202
				bcc	loc_E5F1

				ld	d, #0FFFFh

loc_E5F1:							; CODE XREF: sub_C57A+2072-j
				cmp	d, #0000h
				bcc	loc_E5FC

				ld	d, #0000h
				setb	bit2, var_diag_errors_5
; ***************************************************************************
				.db 8Ch
; ***************************************************************************

loc_E5FC:							; CODE XREF: sub_C57A+207A-j
				clrb	bit2, var_diag_errors_5
				jsr	divide_rD_16

				mov	d, x
				push	x
				ld	a, unk_1C5
				jsr	mult_rArX

				ld	x, #6400h
				tbbs	bit6, var_flags_46, loc_E612

				ld	x, #6400h

loc_E612:							; CODE XREF: sub_C57A+2092-j
				jsr	sub_C57A

				sub	d, #3333h
				bcc	loc_E61C

				clr	a
				clr	b

loc_E61C:							; CODE XREF: sub_C57A+209E-j
				st	d, unk_1C3
				pull	x
				ld	d, unk_132
				jsr	divide_rD_16

				jsr	mult_rDrX

				tbbs	bit0, unk_40, loc_E642

				st	d, var_temp_w
				ld	d, unk_121
				bpz	loc_E63B

				add	d, var_temp_w
				bcs	loc_E642

				clr	a
				clr	b
				bra	loc_E642

; ***************************************************************************

loc_E63B:							; CODE XREF: sub_C57A+20B7-j
				add	d, var_temp_w
				bcc	loc_E642

				ld	d, #0FFFFh

loc_E642:							; CODE XREF: sub_C57A+20AF-j
								; sub_C57A+20BB-j ...
				st	d, var_temp_w
				cmp	#30h, var_rpm_x_5p12
				bcc	loc_E651

				cmp	#2Ch, var_rpm_x_5p12
				bcc	loc_E653

				clrb	bit1, var_flags_4E
; ***************************************************************************
				.db 8Ch
; ***************************************************************************

loc_E651:							; CODE XREF: sub_C57A+20CD-j
				setb	bit1, var_flags_4E

loc_E653:							; CODE XREF: sub_C57A+20D2-j
				cmp	#39h, var_pim2
				bcs	loc_E668

				tbbs	bit2, var_flags_46, loc_E668

				cmp	#0CAh, var_ect
				bcs	loc_E668

				cmp	#0D2h, var_ect
				bcs	loc_E66A

				setb	bit0, var_flags_4E
; ***************************************************************************
				.db 8Ch
; ***************************************************************************

loc_E668:							; CODE XREF: sub_C57A+20DC-j
								; sub_C57A+20DE-j ...
				clrb	bit0, var_flags_4E

loc_E66A:							; CODE XREF: sub_C57A+20E9-j
				ld	y, #unk_10C
				ld	x, #unk_C23A
				tbbc	bit1, var_flags_4E, loc_E676

				ld	x, #unk_C23E

loc_E676:							; CODE XREF: sub_C57A+20F6-j
								; sub_C57A+2121j
				push	x
				push	y
				ld	a, x + 00h
				ld	x, var_temp_w
				tbbs	bit0, unk_40, loc_E682

				tbbs	bit0, var_flags_4E, loc_E683


loc_E682:							; CODE XREF: sub_C57A+2102-j
				clr	a

loc_E683:							; CODE XREF: sub_C57A+2105-j
				jsr	mult_rArX

				add	d, var_temp_w
				bcc	loc_E68D

				ld	d, #0FFFFh

loc_E68D:							; CODE XREF: sub_C57A+210E-j
				ld	y, #inj_pw_limits
				jsr	y + 25h

				pull	y
				pull	x
				st	d, [y]
				cmp	y, #0112h
				bgt	loc_E69D

				inc	x
				bra	loc_E676

; ***************************************************************************

loc_E69D:							; CODE XREF: sub_C57A+211E-j
				tbbs	bit7, var_flags_46, loc_E6A3

				tbbc	bit3, var_flags_4D, loc_E6BE


loc_E6A3:							; CODE XREF: sub_C57A:loc_E69D-j
				ld	d, #0294h
				tbbs	bit2, var_flags_46, loc_E6AC

				ld	d, #0AC8h

loc_E6AC:							; CODE XREF: sub_C57A+212C-j
				di
				st	d, var_inj_pw_inj1
				st	d, unk_106
				st	d, unk_108
				st	d, unk_10A
				setb	bit7, var_ignition_flags
				ei
				bra	loc_E6D2

; ***************************************************************************

loc_E6BE:							; CODE XREF: sub_C57A+2126-j
				ld	x, #var_inj_pw_inj1
				ld	y, #unk_10C
				di

loc_E6C5:							; CODE XREF: sub_C57A+2153j
				ld	d, [y]
				st	d, x + 00h
				inc	x
				inc	x
				cmp	x, #010Ah
				ble	loc_E6C5

				setb	bit7, var_ignition_flags
				ei

loc_E6D2:							; CODE XREF: sub_C57A+205C-j
								; sub_C57A+2142-j
				ld	a, var_flags_4E
				st	a, unk_1D1
				jsr	sub_F2E7

				ret

; END OF FUNCTION CHUNK	FOR sub_C57A

; *************** S U B	R O U T	I N E ***************************************


sub_E6DB:							; CODE XREF: sub_E4C5-p
				jsr	sub_E4AD

				shr	d
				shr	d
				shr	d
; End of function sub_E6DB


; *************** S U B	R O U T	I N E ***************************************


sub_E6E1:							; CODE XREF: sub_C57A+1FCD-p
				cmp	a, #05h
				bcs	loc_E6EF

				add	a, #05h
				shr	d
				cmp	a, #08h
				bcs	loc_E6EF

				add	a, #08h
				shr	d

loc_E6EF:							; CODE XREF: sub_E6E1+2-j
								; sub_E6E1+9-j
				mov	d, x
				ld	d, var_rpm_x_5p12
				shr	d
				shr	d
				cmp	a, #06h
				bcs	loc_E6FB

				add	a, #06h
				shr	d

loc_E6FB:							; CODE XREF: sub_E6E1+15-j
				ld	y, #word_C006
				jsr	map_rD_rX_interpolate

				push	d
				jsr	divide_rD_8

				mov	d, x
				ld	d, var_rpm_x_5p12
				ld	y, #word_C090
				jsr	map_rD_32_rX_map_interpolate

				st	a, var_temp_7A
				pull	x
				ret

; End of function sub_E6E1


; *************** S U B	R O U T	I N E ***************************************


sub_E712:							; CODE XREF: iv6_4ms_process+67p
				ld	x, unk_12B
				tbbc	bit0, var_flags_46, loc_E71B

				st	x, unk_12D

loc_E71B:							; CODE XREF: sub_E712+3-j
				ld	y, #unk_12D
				ld	b, unk_131
				jsr	sub_C54C

				ret

; End of function sub_E712


; *************** S U B	R O U T	I N E ***************************************


sub_E725:							; CODE XREF: iv6_4ms_process:loc_F7ABp
				ld	d, unk_12D
				tbbs	bit0, var_flags_46, loc_E73D

				sub	d, unk_12F
				beq	locret_E740

				rorc	a
				rorc	b
				shra	a
				rorc	b
				cmp	d, #0000h
				bne	loc_E73A

				inc	b

loc_E73A:							; CODE XREF: sub_E725+12-j
				add	d, unk_12F

loc_E73D:							; CODE XREF: sub_E725+3-j
				st	d, unk_12F

locret_E740:							; CODE XREF: sub_E725+9-j
				ret

; End of function sub_E725

; ***************************************************************************
; START	OF FUNCTION CHUNK FOR sub_C57A

loc_E741:							; CODE XREF: sub_C57A:loc_E4C2-j
				ld	y, #unk_C131
				ld	b, unk_123
				bpz	loc_E74C

				ld	y, #unk_C13B

loc_E74C:							; CODE XREF: sub_C57A+21CD-j
				ld	d, var_rpm_x_5p12
				jsr	table_rD_fixed64_interpolate

				st	a, unk_136
				tbbs	bit5, unk_44, loc_E771

				ld	y, #unk_C14E
				jsr	table_ect_fixed_32_interpolate

				bsr	sub_E7B7

				st	d, var_temp_w
				ld	y, #unk_C145
				jsr	table_ect_fixed_32_interpolate

				add	d, var_temp_w
				bcc	loc_E76E

				ld	d, #0FFFFh

loc_E76E:							; CODE XREF: sub_C57A+21EF-j
				st	d, unk_137

loc_E771:							; CODE XREF: sub_C57A+21DA-j
				ld	y, #unk_C157
				jsr	table_ect_pair_interpolate

				st	d, var_temp_w
				ld	y, #unk_C179
				jsr	table_ect_pair_interpolate

				bsr	sub_E7B7

				add	d, unk_137
				bcc	loc_E789

				ld	d, #0FFFFh

loc_E789:							; CODE XREF: sub_C57A+220A-j
				bsr	sub_E7C3

				st	d, unk_139
				ld	y, #unk_C168
				jsr	table_ect_pair_interpolate

				st	d, var_temp_w
				ld	y, #unk_C18A
				jsr	table_ect_pair_interpolate

				bsr	sub_E7B7

				bsr	sub_E7C3

				st	d, unk_13B
				jmp	loc_E98B

; END OF FUNCTION CHUNK	FOR sub_C57A

; *************** S U B	R O U T	I N E ***************************************


sub_E7A6:							; CODE XREF: sub_E7D9+1A3p
				tbbc	bit5, unk_44, locret_E7B6

				ld	d, unk_137
				sub	d, #000Ch
				bcc	loc_E7B3

				clr	a
				clr	b

loc_E7B3:							; CODE XREF: sub_E7A6+9-j
				st	d, unk_137

locret_E7B6:							; CODE XREF: sub_E7A6-j
				ret

; End of function sub_E7A6


; *************** S U B	R O U T	I N E ***************************************


sub_E7B7:							; CODE XREF: sub_C57A+21E3-p
								; sub_C57A+2205-p ...
				mov	d, x
				ld	a, nv_unk_trim_96
				tbbs	bit0, var_flags_42, loc_E7BF

				ld	a, #00h

loc_E7BF:							; CODE XREF: sub_E7B7+3-j
				jsr	mult_rArX

				ret

; End of function sub_E7B7


; *************** S U B	R O U T	I N E ***************************************


sub_E7C3:							; CODE XREF: sub_C57A:loc_E789-p
								; sub_C57A+2224-p
				add	d, var_temp_w
				bcc	loc_E7CA

				ld	d, #0FFFFh

loc_E7CA:							; CODE XREF: sub_E7C3+2-j
				mov	d, x
				ld	a, unk_23B
				jsr	mult_rArX

				add	a, #04h
				bcc	locret_E7D8

				ld	d, #0FFFFh

locret_E7D8:							; CODE XREF: sub_E7C3+10-j
				ret

; End of function sub_E7C3


; *************** S U B	R O U T	I N E ***************************************


sub_E7D9:							; CODE XREF: sub_C57A+D07-p
								; sub_C57A+2051-p ...
				tbs	bit3, unk_41
				beq	loc_E7E0

				jmp	locret_E97F

; ***************************************************************************

loc_E7E0:							; CODE XREF: sub_E7D9+2-j
				ld	d, unk_202
				ld	y, #table_pim_unk_C11D
				jsr	table_rD_fixed64_interpolate

				shr	d
				tbbs	bit5, unk_44, loc_E804

				st	d, unk_125
				st	d, unk_127
				st	d, unk_129
				clr	a
				clr	b
				st	d, unk_123
				st	d, unk_121
				ld	#0FFh, unk_AA
				jmp	locret_E97F

; ***************************************************************************

loc_E804:							; CODE XREF: sub_E7D9+11-j
				push	d
				ld	x, unk_129
				cmp	d, unk_129
				bcc	loc_E811

				mov	d, x
				ld	d, unk_129

loc_E811:							; CODE XREF: sub_E7D9+32-j
				st	d, var_temp_w
				st	x, var_temp_7A
				ld	y, #var_temp_w
				ld	d, unk_125
				jsr	clamp_rD

				push	d
				clrb	bit0, var_diag_errors_5
				sub	d, unk_125
				bcc	loc_E829

				jsr	set_knock_sensor_err_flag


loc_E829:							; CODE XREF: sub_E7D9+4B-j
				cmp	d, #0100h
				bcs	loc_E857

				mov	d, x
				ld	a, unk_23A
				tbbc	bit0, var_diag_errors_5, loc_E838

				ld	a, unk_239

loc_E838:							; CODE XREF: sub_E7D9+59-j
				neg	a
				cmp	a, #00h
				bne	loc_E83E

				dec	a

loc_E83E:							; CODE XREF: sub_E7D9+62-j
				mul	a, #80h
				jsr	mult_rDrX

				mov	x, d
				jsr	check_knock_sensor_err_flag

				add	d, unk_123
				bvc	loc_E854

				ld	d, #7FFFh
				tbbc	bit0, var_diag_errors_5, loc_E854

				inc	a
				inc	b

loc_E854:							; CODE XREF: sub_E7D9+71-j
								; sub_E7D9+76-j
				st	d, unk_123

loc_E857:							; CODE XREF: sub_E7D9+53-j
				pull	d
				st	d, unk_125
				ld	y, #var_temp_w
				ld	d, unk_127
				jsr	clamp_rD

				st	d, unk_127
				pull	d
				mov	d, y
				tbbc	bit0, var_limiter_flags, loc_E86E

				clr	unk_AA

loc_E86E:							; CODE XREF: sub_E7D9+90-j
				cmp	#02h, unk_AA
				bcc	loc_E87B

				inc	unk_AA
				tbbs	bit2, var_flags_46, loc_E87B

				add	d, #01F4h

loc_E87B:							; CODE XREF: sub_E7D9+98-j
								; sub_E7D9+9C-j
				sub	d, unk_127
				ld	x, unk_127
				st	x, unk_129
				ld	x, unk_125
				st	x, unk_127
				xch	x, y
				st	x, unk_125
				clrb	bit0, var_diag_errors_5
				bcc	loc_E895

				jsr	set_knock_sensor_err_flag


loc_E895:							; CODE XREF: sub_E7D9+B7-j
				mov	d, x
				ld	b, unk_237
				tbbc	bit0, var_diag_errors_5, loc_E89F

				ld	b, unk_238

loc_E89F:							; CODE XREF: sub_E7D9+C0-j
				jsr	mult_rBrX2

				st	d, var_temp_w
				ld	y, #unk_C12C
				jsr	table_rD_fixed2_interpolate

				st	a, var_temp_7A
				ld	a, unk_239
				tbbc	bit0, var_diag_errors_5, loc_E8B5

				ld	a, unk_23A

loc_E8B5:							; CODE XREF: sub_E7D9+D6-j
				mul	a, var_temp_7A
				shl	d
				bcc	loc_E8BC

				ld	a, #0FFh

loc_E8BC:							; CODE XREF: sub_E7D9+DF-j
				mov	a, b
				neg	b
				cmp	b, #00h
				bne	loc_E8C3

				dec	b

loc_E8C3:							; CODE XREF: sub_E7D9+E7-j
				push	b
				ld	x, var_temp_w
				jsr	mult_rArX

				cmpz	a
				bpz	loc_E8CF

				ld	d, #7FFFh

loc_E8CF:							; CODE XREF: sub_E7D9+F1-j
				jsr	check_knock_sensor_err_flag

				st	d, var_temp_7A
				ld	x, var_temp_w
				pull	a
				mul	a, #80h
				jsr	mult_rDrX

				mov	x, d
				jsr	check_knock_sensor_err_flag

				st	d, var_temp_w
				clrb	bit0, var_diag_errors_5
				ld	d, unk_123
				bpz	loc_E8EC

				jsr	set_knock_sensor_err_flag


loc_E8EC:							; CODE XREF: sub_E7D9+10E-j
				mov	d, x
				push	d
				ld	a, unk_136
				push	a
				mul	a, #80h
				shr	d
				shr	d
				neg	a
				neg	b
				subc	a, #00h
				cmp	d, #0000h
				bne	loc_E901

				dec	a
				dec	b

loc_E901:							; CODE XREF: sub_E7D9+124-j
				jsr	mult_rDrX

				mov	x, d
				jsr	check_knock_sensor_err_flag

				add	d, var_temp_w
				bvc	loc_E914

				ld	d, #7FFFh
				tbbc	bit0, var_diag_errors_5, loc_E914

				inc	a
				inc	b

loc_E914:							; CODE XREF: sub_E7D9+131-j
								; sub_E7D9+136-j
				jsr	sub_E980

				st	d, unk_123
				pull	a
				pull	x
				jsr	mult_rArX

				shr	d
				shr	d
				jsr	check_knock_sensor_err_flag

				add	d, var_temp_7A
				bvc	loc_E930

				ld	d, #7FFFh
				tbbc	bit0, var_diag_errors_5, loc_E930

				inc	a
				inc	b

loc_E930:							; CODE XREF: sub_E7D9+14D-j
								; sub_E7D9+152-j
				jsr	sub_E980

				mov	d, x
				clrb	bit0, var_diag_errors_5
				cmpz	a
				bpz	loc_E93C

				jsr	set_knock_sensor_err_flag


loc_E93C:							; CODE XREF: sub_E7D9+15E-j
				push	d
				cmp	d, #0020h
				bcc	loc_E964

				ld	d, #0040h
				st	a, unk_79
				st	b, var_temp_7B
				ld	a, unk_13B
				st	a, var_temp_7A
				ld	a, unk_139
				st	a, unk_7C
				ld	#02h, var_temp_w
				mov	x, d
				add	d, #0020h
				mov	b, a
				clr	b
				ld	y, #var_temp_w
				jsr	sub_C3D3

				bra	loc_E96D

; ***************************************************************************

loc_E964:							; CODE XREF: sub_E7D9+167-j
				ld	d, unk_139
				tbbc	bit0, var_diag_errors_5, loc_E96D

				ld	d, unk_13B

loc_E96D:							; CODE XREF: sub_E7D9+189-j
								; sub_E7D9+18E-j
				mov	d, x
				pull	d
				shl	d
				jsr	mult_rDrX

				jsr	sub_C518

				jsr	check_knock_sensor_err_flag

				st	d, unk_121
				jsr	sub_E7A6


locret_E97F:							; CODE XREF: sub_E7D9+4-j
								; sub_E7D9+28-j
				ret

; End of function sub_E7D9


; *************** S U B	R O U T	I N E ***************************************


sub_E980:							; CODE XREF: sub_E7D9:loc_E914-p
								; sub_E7D9:loc_E930-p
				cmpz	a
				bpz	locret_E98A

				cmp	#7Ah, var_cnt_startup
				bcc	locret_E98A

				clr	a
				clr	b

locret_E98A:							; CODE XREF: sub_E980+1-j
								; sub_E980+6-j
				ret

; End of function sub_E980

; ***************************************************************************
; START	OF FUNCTION CHUNK FOR sub_C57A

loc_E98B:							; CODE XREF: sub_C57A+2229-j
				bsr	sub_E996

				jsr	sub_E7D9

				nop
				nop
				nop
				jmp	loc_C729

; END OF FUNCTION CHUNK	FOR sub_C57A

; *************** S U B	R O U T	I N E ***************************************


sub_E996:							; CODE XREF: sub_C57A:loc_D27E-p
								; sub_C57A+204E-p ...

; FUNCTION CHUNK AT EA20 SIZE 000000AB BYTES
; FUNCTION CHUNK AT EB98 SIZE 000000EE BYTES
; FUNCTION CHUNK AT EC97 SIZE 000000A8 BYTES
; FUNCTION CHUNK AT ED88 SIZE 00000080 BYTES
; FUNCTION CHUNK AT EE32 SIZE 0000006F BYTES
; FUNCTION CHUNK AT EEBD SIZE 00000069 BYTES

				cmp	#3Dh, unk_C3
				bcs	loc_E9A1

				setb	bit2, var_ignition_flags
				clrb	bit4, var_ignition_flags
				clrb	bit0, var_ignition_flags

loc_E9A1:							; CODE XREF: sub_E996+3-j
				ld	y, #unk_C246
				ld	a, var_adc_battery
				clr	b
				jsr	sub_C3D3

				st	a, var_temp_w
				ld	y, #unk_C251
				jsr	table_rpm_pair_interpolate

				mul	a, var_temp_w
				jsr	divide_rD_32

				st	d, unk_16B
				ld	y, #unk_C25C
				jsr	table_rpm_pair_interpolate

				st	a, unk_16A
				ld	a, unk_1CD
				st	a, var_flags_4E
				ld	y, #unk_C2D1
				ld	b, var_rpm_div_25
				jsr	table_rB_fixed_32_interpolate

				st	a, var_temp_7A
				tbbs	bit2, var_flags_46, loc_E9DE

				ld	a, unk_12D
				add	a, #0Ah
				cmp	a, var_temp_7A
				bcc	loc_E9E2


loc_E9DE:							; CODE XREF: sub_E996+3C-j
				setb	bit0, var_flags_4E
				clr	unk_A3

loc_E9E2:							; CODE XREF: sub_E996+46-j
				cmp	#0D2h, var_ect
				bcs	loc_E9EC

				cmp	#78h, var_rpm_div_25
				bcs	loc_E9EE


loc_E9EC:							; CODE XREF: sub_E996+4F-j
				clrb	bit0, var_flags_4E

loc_E9EE:							; CODE XREF: sub_E996+54-j
				tbbc	bit0, var_flags_4E, loc_EA09

				ld	b, unk_141
				cmp	b, #06h
				blta	loc_EA09

				ld	a, unk_12D
				cmp	a, var_temp_7A
				bcs	loc_EA09

				ld	y, #unk_C2D6
				jsr	table_rpm_pair_interpolate

				st	a, unk_A3
				clrb	bit0, var_flags_4E

loc_EA09:							; CODE XREF: sub_E996:loc_E9EE-j
								; sub_E996+60-j	...
				bra	loc_EA20

; End of function sub_E996


; *************** S U B	R O U T	I N E ***************************************


sub_EA0B:							; CODE XREF: sub_E996:loc_EBA7p
				ld	a, unk_A3
				beq	locret_EA16

				sub	a, #09h
				bcc	loc_EA14

				clr	a

loc_EA14:							; CODE XREF: sub_EA0B+6-j
				st	a, unk_A3

locret_EA16:							; CODE XREF: sub_EA0B+2-j
				ret

; End of function sub_EA0B


; *************** S U B	R O U T	I N E ***************************************


sub_EA17:							; CODE XREF: sub_E996:loc_EE32p
				ld	a, unk_A3
				cmp	a, #2Bh
				ble	locret_EA1F

				ld	a, #2Bh

locret_EA1F:							; CODE XREF: sub_EA17+4-j
				ret

; End of function sub_EA17

; ***************************************************************************
; START	OF FUNCTION CHUNK FOR sub_E996

loc_EA20:							; CODE XREF: sub_E996:loc_EA09-j
				ld	a, var_flags_4E
				st	a, unk_1CD
				ld	a, unk_1CE
				st	a, var_flags_4E
				tbbs	bit6, unk_40, loc_EA54

				cmp	#5Ch, var_cnt_startup
				bcs	loc_EA54

				ld	b, unk_F5
				ld	y, #unk_C2AC
				jsr	table_rB_fixed_32_interpolate

				cmp	a, var_rpm_div_25
				ble	loc_EA54

				cmp	#28h, var_rpm_div_25
				bcs	loc_EA54

				cmp	#03h, var_speed_kph
				bcs	loc_EA54

				cmp	#0D2h, var_ect
				bcs	loc_EA54

				cmp	#93h, var_adc_battery
				bcs	loc_EA54

				setb	bit1, var_flags_4E

loc_EA54:							; CODE XREF: sub_E996+94-j
								; sub_E996+9A-j	...
				ld	a, unk_141
				ld	b, unk_12D
				st	d, var_temp_w
				tbbc	bit2, var_flags_46, loc_EA63

				clr	unk_D3
				clrb	bit1, var_flags_4E

loc_EA63:							; CODE XREF: sub_E996+C6-j
				tbbc	bit1, var_io_input1, loc_EA6C

				clrb	bit0, var_flags_4E
				clrb	bit2, var_flags_4E
				bra	loc_EAA6

; ***************************************************************************

loc_EA6C:							; CODE XREF: sub_E996:loc_EA63-j
				cmp	a, #0FEh
				blta	loc_EAAB

				tbbs	bit2, var_flags_4E, loc_EA7F

				cmp	a, #05h
				blta	loc_EA7F

				cmp	b, #21h
				bcs	loc_EA7F

				clr	unk_B9
				setb	bit2, var_flags_4E

loc_EA7F:							; CODE XREF: sub_E996+DA-j
								; sub_E996+DF-j	...
				ld	y, #unk_C2C6
				ld	b, unk_F5
				jsr	table_rB_fixed_32_interpolate

				cmp	a, unk_B9
				bcs	loc_EAAB

				ld	d, var_temp_w
				tbbc	bit1, var_flags_4E, loc_EAAD

				tbbs	bit0, var_flags_4E, loc_EAAD

				cmp	a, #09h
				blta	loc_EAAD

				cmp	b, #4Dh
				bcs	loc_EAAD

				cmp	#1Fh, unk_D3
				bcc	loc_EAAD

				setb	bit3, var_flags_4E
				setb	bit0, var_flags_4E
				bra	loc_EAAD

; ***************************************************************************

loc_EAA6:							; CODE XREF: sub_E996+D4-j
				ld	a, #0FFh
				st	a, unk_156

loc_EAAB:							; CODE XREF: sub_E996+D8-j
								; sub_E996+F3-j
				clrb	bit3, var_flags_4E

loc_EAAD:							; CODE XREF: sub_E996+F7-j
								; sub_E996+FA-j	...
				ld	d, var_temp_w
				tbbc	bit0, unk_44, loc_EAB5

				tbbc	bit2, var_flags_46, loc_EABD


loc_EAB5:							; CODE XREF: sub_E996+119-j
				cmp	a, #08h
				blta	loc_EAC8

				cmp	b, #26h
				bcs	loc_EAC8


loc_EABD:							; CODE XREF: sub_E996+11C-j
				clr	a
				st	a, unk_D4
				st	a, unk_15A
				ld	a, var_rpm_div_25
				st	a, unk_15F

loc_EAC8:							; CODE XREF: sub_E996+121-j
								; sub_E996+125-j
				jmp	loc_EB98

; END OF FUNCTION CHUNK	FOR sub_E996

; *************** S U B	R O U T	I N E ***************************************


sub_EACB:							; CODE XREF: sub_E996+553p
				tbbc	bit3, var_flags_4E, loc_EADA

				ld	b, unk_14F
				ld	y, #unk_C2B3
				jsr	table_rB_fixed_32_interpolate

				st	a, unk_156

loc_EADA:							; CODE XREF: sub_EACB-j
				ld	d, var_rpm_x_5p12
				cmp	d, #5400h
				bcc	loc_EAE4

				jsr	calc_rpm


loc_EAE4:							; CODE XREF: sub_EACB+14-j
				st	d, unk_15B
				mov	d, x
				sub	d, unk_15D
				bcs	loc_EAF2

				jsr	divide_rD_2_saturate

				bra	loc_EAF8

; ***************************************************************************

loc_EAF2:							; CODE XREF: sub_EACB+20-j
				clr	b
				ld	a, var_rpm_div_25
				st	a, unk_15F

loc_EAF8:							; CODE XREF: sub_EACB+25-j
				st	b, unk_159
				st	x, unk_15D
				tbbs	bit2, var_flags_46, loc_EB1F

				ld	a, var_rpm_div_25
				sub	a, unk_15F
				bcc	loc_EB09

				clr	a

loc_EB09:							; CODE XREF: sub_EACB+3B-j
				cmp	a, #0Eh
				bcc	loc_EB1F

				tbbc	bit1, var_flags_4E, loc_EB1F

				ld	a, unk_F5
				cmp	a, #20h
				bcs	loc_EB1F

				cmp	a, #8Dh
				bcc	loc_EB1F

				cmp	#99h, unk_D3
				bcs	loc_EB27


loc_EB1F:							; CODE XREF: sub_EACB+33-j
								; sub_EACB+40-j	...
				ld	d, #0FFFEh
				st	a, unk_15A
				st	b, unk_D4

loc_EB27:							; CODE XREF: sub_EACB+52-j
				ld	b, unk_159
				sub	b, unk_15A
				bcc	loc_EB30

				clr	b

loc_EB30:							; CODE XREF: sub_EACB+62-j
				ld	y, #unk_C2BA
				jsr	table_rB_fixed_32_interpolate

				push	d
				ld	y, #unk_C2CD
				ld	b, var_tps
				jsr	table_rB_fixed4_interpolate

				mov	a, b
				pull	x
				jsr	mult_rBrX2

				sub	a, unk_14F
				bcs	loc_EB4A

				clr	a

loc_EB4A:							; CODE XREF: sub_EACB+7C-j
				neg	a
				st	a, unk_157
				cmp	a, unk_156
				ble	loc_EB56

				ld	a, unk_156

loc_EB56:							; CODE XREF: sub_EACB+86-j
				add	a, unk_158
				bcc	loc_EB5D

				ld	a, #0FFh

loc_EB5D:							; CODE XREF: sub_EACB+8E-j
				cmp	a, #00h
				bcc	loc_EB63

				ld	a, #00h

loc_EB63:							; CODE XREF: sub_EACB+94-j
				st	a, unk_155
				ret

; End of function sub_EACB


; *************** S U B	R O U T	I N E ***************************************


sub_EB67:							; CODE XREF: iv6_4ms_process+5Cp
				ld	b, unk_1CE
				cmpb	b, #08h
				bne	locret_EB7A

				ld	b, #04h
				add	b, unk_156
				bcc	loc_EB77

				ld	b, #0FFh

loc_EB77:							; CODE XREF: sub_EB67+C-j
				st	b, unk_156

locret_EB7A:							; CODE XREF: sub_EB67+5-j
				ret

; End of function sub_EB67


; *************** S U B	R O U T	I N E ***************************************


sub_EB7B:							; CODE XREF: sub_C57A+C29-p
				clr	a
				cmp	#14h, unk_D4
				bcs	loc_EB8A

				ld	a, unk_15A
				add	a, #04h
				bcc	loc_EB8A

				ld	a, #0FFh

loc_EB8A:							; CODE XREF: sub_EB7B+4-j
								; sub_EB7B+B-j
				st	a, unk_15A
				ret

; End of function sub_EB7B


; *************** S U B	R O U T	I N E ***************************************


sub_EB8E:							; CODE XREF: sub_C57A+1D7F-p
				ld	y, #unk_C2C1
				jsr	table_ect_pair_interpolate

				st	a, unk_158
				ret

; End of function sub_EB8E

; ***************************************************************************
; START	OF FUNCTION CHUNK FOR sub_E996

loc_EB98:							; CODE XREF: sub_E996:loc_EAC8-j
				ld	a, var_flags_4E
				st	a, unk_1CE
				jsr	sub_F63F

				tbs	bit1, unk_41
				beq	loc_EBA7

				jmp	locret_EF25

; ***************************************************************************

loc_EBA7:							; CODE XREF: sub_E996+20C-j
				jsr	sub_EA0B

				ld	a, var_ect
				cmp	#32h, var_rpm_x_5p12
				bcs	loc_EBB5

				cmp	a, #86h
				bcc	loc_EBC1


loc_EBB5:							; CODE XREF: sub_E996+219-j
				cmp	a, #0DCh
				bcc	loc_EBC1

				tbbs	bit2, var_flags_46, loc_EBFE

				cmp	#61h, var_pim2
				ble	loc_EBD6


loc_EBC1:							; CODE XREF: sub_E996+21D-j
								; sub_E996+221-j
				ld	a, unk_14E
				sub	a, #80h
				beq	loc_EC05

				bgt	loc_EBCE

				add	a, #01h
				bra	loc_EBD0

; ***************************************************************************

loc_EBCE:							; CODE XREF: sub_E996+232-j
				sub	a, #01h

loc_EBD0:							; CODE XREF: sub_E996+236-j
				bcs	loc_EC05

				add	a, #80h
				bra	loc_EC07

; ***************************************************************************

loc_EBD6:							; CODE XREF: sub_E996+229-j
				st	a, var_temp_w
				ld	y, #unk_C263
				jsr	table_rA_pair_interpolate

				st	a, unk_7C
				ld	a, var_temp_w
				ld	y, #unk_C274
				jsr	table_rA_pair_interpolate

				st	a, var_temp_7A
				ld	d, #4E57h
				st	a, unk_79
				st	b, var_temp_7B
				ld	#02h, var_temp_w
				ld	d, var_pim2
				ld	y, #var_temp_w
				jsr	sub_C3D3

				bra	loc_EC07

; ***************************************************************************

loc_EBFE:							; CODE XREF: sub_E996+223-j
				ld	y, #unk_C285
				jsr	table_rA_pair_interpolate

; ***************************************************************************
				.db 8Ch
; ***************************************************************************

loc_EC05:							; CODE XREF: sub_E996+230-j
								; sub_E996:loc_EBD0-j
				ld	a, #80h

loc_EC07:							; CODE XREF: sub_E996+23E-j
								; sub_E996+266-j
				st	a, unk_14E
				ld	a, unk_1CF
				st	a, var_flags_4E
				ld	a, #55h
				tbbc	bit2, var_flags_46, loc_EC32

				cmp	#5Ch, var_cnt_startup
				bcs	loc_EC32

				cmp	#3Dh, unk_CC
				bcs	loc_EC32

				ld	d, unk_74
				add	d, #00C0h
				sub	d, var_rpm_x_5p12
				bcc	loc_EC29

				clr	a
				clr	b

loc_EC29:							; CODE XREF: sub_E996+28F-j
				jsr	divide_rD_2_saturate

				ld	y, #unk_C296
				jsr	table_rB_fixed_32_interpolate


loc_EC32:							; CODE XREF: sub_E996+27B-j
								; sub_E996+281-j ...
				st	a, var_temp_w
				clrb	bit0, var_flags_4E
				tbbs	bit6, var_flags_46, loc_EC40

				tbbc	bit1, var_flags_4E, loc_EC46

				clrb	bit1, var_flags_4E
				bra	loc_EC44

; ***************************************************************************

loc_EC40:							; CODE XREF: sub_E996+2A0-j
				tbs	bit1, var_flags_4E
				bne	loc_EC46


loc_EC44:							; CODE XREF: sub_E996+2A8-j
				setb	bit0, var_flags_4E

loc_EC46:							; CODE XREF: sub_E996+2A3-j
								; sub_E996+2AC-j
				tbbs	bit6, var_flags_42, loc_EC50

				tbbc	bit2, var_flags_4E, loc_EC56

				clrb	bit2, var_flags_4E
				bra	loc_EC54

; ***************************************************************************

loc_EC50:							; CODE XREF: sub_E996:loc_EC46-j
				tbs	bit2, var_flags_4E
				bne	loc_EC56


loc_EC54:							; CODE XREF: sub_E996+2B8-j
				setb	bit0, var_flags_4E

loc_EC56:							; CODE XREF: sub_E996+2B3-j
								; sub_E996+2BC-j
				tbbs	bit0, var_flags_46, loc_EC75

				tbbc	bit2, var_flags_46, loc_EC7D

				cmp	#28h, var_rpm_div_25
				bcc	loc_EC7D

				cmp	#15h, var_rpm_div_25
				bcs	loc_EC7D

				cmp	#02h, var_speed_kph
				bcc	loc_EC7D

				cmp	#0E4h, var_ect
				bcs	loc_EC7D

				tbbs	bit0, var_flags_4E, loc_EC7D

				bra	loc_EC97

; ***************************************************************************

loc_EC75:							; CODE XREF: sub_E996:loc_EC56-j
				clr	a
				clr	b
				st	d, unk_177
				st	d, unk_179

loc_EC7D:							; CODE XREF: sub_E996+2C3-j
								; sub_E996+2C9-j ...
				clr	unk_D2
				bsr	sub_EC8D

				bsr	sub_EC86

				jmp	loc_ECE2

; END OF FUNCTION CHUNK	FOR sub_E996

; *************** S U B	R O U T	I N E ***************************************


sub_EC86:							; CODE XREF: sub_E996+2EB-p
								; sub_E996+308p ...
				di
				clr	a
				st	a, unk_170
				ei
				ret

; End of function sub_EC86


; *************** S U B	R O U T	I N E ***************************************


sub_EC8D:							; CODE XREF: sub_E996+2E9-p
								; sub_E996+32Fp ...
				ld	d, #8080h
				st	d, unk_173
				st	d, unk_175
				ret

; End of function sub_EC8D

; ***************************************************************************
; START	OF FUNCTION CHUNK FOR sub_E996

loc_EC97:							; CODE XREF: sub_E996+2DD-j
				ld	a, unk_170
				cmp	a, #20h
				bcs	loc_ECE2

				bsr	sub_EC86

				ld	y, #unk_173

loc_ECA3:							; CODE XREF: sub_E996+31Bj
				push	y
				pull	x

loc_ECA5:							; CODE XREF: sub_E996+319j
				inc	y
				cmp	y, #unk_177
				bcc	loc_ECB3

				ld	a, x + 00h
				cmp	a, y + 00h
				bcc	loc_ECA5

				bra	loc_ECA3

; ***************************************************************************

loc_ECB3:							; CODE XREF: sub_E996+313-j
				ld	a, x + 00h
				cmp	a, #83h
				bcs	loc_ECC7

				ld	a, x + 04h
				add	a, #09h
				cmp	a, #33h
				ble	loc_ECC3

				ld	a, #33h

loc_ECC3:							; CODE XREF: sub_E996+329-j
				st	a, x + 04h
				bsr	sub_EC8D


loc_ECC7:							; CODE XREF: sub_E996+321-j
				ld	y, #unk_177

loc_ECCA:							; CODE XREF: sub_E996+33Aj
				ld	a, [y]
				beq	loc_ECE2

				cmp	y, #unk_17B
				bcs	loc_ECCA

				ld	y, #unk_177

loc_ECD5:							; CODE XREF: sub_E996+34Aj
				ld	a, y + 00h
				sub	a, #09h
				bcc	loc_ECDC

				clr	a

loc_ECDC:							; CODE XREF: sub_E996+343-j
				st	a, [y]
				cmp	y, #unk_17B
				bcs	loc_ECD5


loc_ECE2:							; CODE XREF: sub_E996+2ED-j
								; sub_E996+306-j ...
				ld	a, unk_D2
				bne	loc_ECF9

				di
				ld	y, #0177h
				ld	a, #2Bh

loc_ECEC:							; CODE XREF: sub_E996+360j
				cmp	a, y + 00h
				bcc	loc_ECF2

				st	a, y + 00h

loc_ECF2:							; CODE XREF: sub_E996+358-j
				inc	y
				cmp	y, #unk_17B
				bcs	loc_ECEC

				ei

loc_ECF9:							; CODE XREF: sub_E996+34E-j
				ld	b, var_temp_w
				cmp	#06h, unk_D2
				bcs	loc_ED35

				clr	a
				clr	b
				ld	y, #0177h

loc_ED05:							; CODE XREF: sub_E996+377j
				add	b, y + 00h
				addc	a, #00h
				inc	y
				cmp	y, #unk_17B
				bcs	loc_ED05

				jsr	divide_rD_4_saturate

				st	b, unk_79
				ld	b, unk_A1
				shr	b
				shr	b
				shr	b
				shr	b
				add	b, #02h
				and	b, #03h
				ld	y, #unk_177
				add	y, b
				clr	a
				ld	b, var_temp_w
				add	b, y + 00h
				addc	a, #00h
				sub	b, unk_79
				subc	a, #00h
				beq	loc_ED35

				bcs	loc_ED34

				ld	b, #0FFh
; ***************************************************************************
				.db 41h
; ***************************************************************************

loc_ED34:							; CODE XREF: sub_E996+399-j
				clr	b

loc_ED35:							; CODE XREF: sub_E996+368-j
								; sub_E996+397-j
				ld	y, #byte_C3A0
				jsr	y + 16h

				st	b, unk_150
				bra	loc_ED91

; END OF FUNCTION CHUNK	FOR sub_E996
; ***************************************************************************

loc_ED3F:							; CODE XREF: iv6_ne_process+36Ap
				cmp	#5Ch, unk_D2
				bcs	loc_ED77

				ld	x, #unk_173
				ld	a, unk_A2
				shr	a
				shr	a
				shr	a
				shr	a
				and	a, #03h
				add	x, a
				ld	a, x + 00h
				mul	a, #07h
				push	d
				ld	d, var_ne_sum3
				sub	d, unk_171
				pull	y
				add	d, #0424h
				bpz	loc_ED62

				clr	a
				clr	b

loc_ED62:							; CODE XREF: ROM:ED5E-j
				jsr	divide_rD_8_saturate

				cmp	b, #0B3h
				bcs	loc_ED7D

				ld	a, x + 04h
				beq	loc_ED74

				sub	a, #1Ah
				bcc	loc_ED72

				clr	a

loc_ED72:							; CODE XREF: ROM:ED6F-j
				st	a, x + 04h

loc_ED74:							; CODE XREF: ROM:ED6B-j
				jsr	sub_EC8D


loc_ED77:							; CODE XREF: ROM:ED42-j
				clr	a
				st	a, unk_170
				bra	loc_ED84

; ***************************************************************************

loc_ED7D:							; CODE XREF: ROM:ED67-j
				add	y, b
				mov	y, d
				jsr	divide_rD_8_saturate

				st	b, x + 00h

loc_ED84:							; CODE XREF: ROM:ED7B-j
				ld	d, var_ne_sum3
				st	d, unk_171
				ld	a, unk_170
				inc	a
				st	a, unk_170
				ret

; ***************************************************************************

loc_ED91:							; CODE XREF: sub_E996+3A7-j
				ld	a, var_flags_4E
				st	a, unk_1CF
				ld	a, unk_236
				tbbc	bit2, var_flags_46, loc_EDD4

				mov	a, b
				ld	a, unk_150
				cmp	a, #55h
				beq	loc_EDAF

				clr	a
				add	d, #001Ah
				bpz	loc_EDAC

				clr	a
				clr	b

loc_EDAC:							; CODE XREF: sub_E996+412-j
				jsr	clamp_rD_FF


loc_EDAF:							; CODE XREF: sub_E996+40C-j
				st	b, var_temp_w
				ld	y, #unk_C29F
				ld	b, var_rpm_div_25
				jsr	table_rB_fixed_16_interpolate

				ld	x, #unk_C2A8
				tbbc	bit6, var_flags_46, loc_EDC0

				inc	x

loc_EDC0:							; CODE XREF: sub_E996+426-j
				tbbs	bit6, var_flags_42, loc_EDC5

				inc	x
				inc	x

loc_EDC5:							; CODE XREF: sub_E996:loc_EDC0-j
				cmp	a, x + 00h
				bcc	loc_EDCB

				ld	a, x + 00h

loc_EDCB:							; CODE XREF: sub_E996+431-j
				cmp	a, var_temp_w
				ble	loc_EDD4

				jsr	sub_EC86

				ld	a, var_temp_w

loc_EDD4:							; CODE XREF: sub_E996+403-j
								; sub_E996+437-j
				st	a, unk_14D
				ld	b, unk_154
				ld	a, unk_A6
				cmp	a, #0FFh
				beq	loc_EDFB

				cmpz	a
				bne	loc_EDED

				ld	b, #2Bh
				tbbs	bit2, var_limiter_flags, loc_EE03

				tbbs	bit3, var_limiter_flags, loc_EE03

				bra	loc_EDFE

; ***************************************************************************

loc_EDED:							; CODE XREF: sub_E996+44B-j
				cmp	a, #0Ch
				bcc	loc_EDF7

				sub	b, #01h
				bcc	loc_EDFE

				bra	loc_EDFB

; ***************************************************************************

loc_EDF7:							; CODE XREF: sub_E996+459-j
				sub	b, #09h
				bcc	loc_EDFE


loc_EDFB:							; CODE XREF: sub_E996+448-j
								; sub_E996+45F-j
				clr	b
				ld	a, #0FEh

loc_EDFE:							; CODE XREF: sub_E996+455-j
								; sub_E996+45D-j ...
				inc	a
				beq	loc_EE03

				st	a, unk_A6

loc_EE03:							; CODE XREF: sub_E996+44F-j
								; sub_E996+452-j ...
				st	b, unk_154
				bra	loc_EE32

; END OF FUNCTION CHUNK	FOR sub_E996

; *************** S U B	R O U T	I N E ***************************************


sub_EE08:							; CODE XREF: sub_C57A:loc_CC7D-p
				tbbc	bit3, var_limiter_flags, locret_EE1C

				cmp	#0Ah, var_speed_kph
				bcs	loc_EE19

				cmp	#29h, var_tps
				bcs	loc_EE19

				clr	unk_A6
				bra	locret_EE1C

; ***************************************************************************

loc_EE19:							; CODE XREF: sub_EE08+6-j
								; sub_EE08+B-j
				ld	#0FFh, unk_A6

locret_EE1C:							; CODE XREF: sub_EE08-j
								; sub_EE08+F-j
				ret

; End of function sub_EE08


; *************** S U B	R O U T	I N E ***************************************


sub_EE1D:							; CODE XREF: sub_C57A:check_clear_speed_limiter-p
				tbbc	bit2, var_limiter_flags, locret_EE31

				cmp	#0Ah, var_speed_kph
				bcs	loc_EE2E

				cmp	#29h, var_tps
				bcs	loc_EE2E

				clr	unk_A6
				bra	locret_EE31

; ***************************************************************************

loc_EE2E:							; CODE XREF: sub_EE1D+6-j
								; sub_EE1D+B-j
				ld	#0FFh, unk_A6

locret_EE31:							; CODE XREF: sub_EE1D-j
								; sub_EE1D+F-j
				ret

; End of function sub_EE1D

; ***************************************************************************
; START	OF FUNCTION CHUNK FOR sub_E996

loc_EE32:							; CODE XREF: sub_E996+470-j
				jsr	sub_EA17

				add	a, unk_210
				bcc	loc_EE3C

				ld	a, #0FFh

loc_EE3C:							; CODE XREF: sub_E996+4A2-j
				ld	b, unk_23D
				cmpb	b, #0Fh
				beq	loc_EE49

				add	a, #1Ah
				bcc	loc_EE49

				ld	a, #0FFh

loc_EE49:							; CODE XREF: sub_E996+4AB-j
								; sub_E996+4AF-j
				add	a, unk_154
				bcc	loc_EE50

				ld	a, #0FFh

loc_EE50:							; CODE XREF: sub_E996+4B6-j
				st	a, unk_215
				ld	a, var_flags_43_copy_1D0
				st	a, var_flags_4E
				cmp	#87h, unk_5C
				bgt	loc_EE62

				cmp	#24h, var_rpm_div_25
				bcc	loc_EE66


loc_EE62:							; CODE XREF: sub_E996+4C5-j
				clrb	bit6, var_flags_4E
				bra	loc_EE9A

; ***************************************************************************

loc_EE66:							; CODE XREF: sub_E996+4CA-j
				tbbs	bit6, unk_40, loc_EE9A

				tbbc	bit6, var_flags_4E, loc_EE73

				clrb	bit6, var_flags_4E
				ld	d, #0000h
				bra	loc_EE9C

; ***************************************************************************

loc_EE73:							; CODE XREF: sub_E996+4D3-j
				ld	d, unk_152
				cmp	a, #0FEh
				bcc	loc_EE9A

				tbbs	bit2, var_flags_46, loc_EE8C

				cmp	d, #0056h
				bcs	loc_EE87

				add	d, #0009h
				bra	loc_EE9C

; ***************************************************************************

loc_EE87:							; CODE XREF: sub_E996+4EA-j
				add	d, #0022h
				bra	loc_EE9C

; ***************************************************************************

loc_EE8C:							; CODE XREF: sub_E996+4E4-j
				cmp	d, #0010h
				bcs	loc_EE96

				add	d, #0009h
				bra	loc_EE9C

; ***************************************************************************

loc_EE96:							; CODE XREF: sub_E996+4F9-j
				add	d, #0001h
; ***************************************************************************
				.db 8Ch
; ***************************************************************************

loc_EE9A:							; CODE XREF: sub_E996+4CE-j
								; sub_E996:loc_EE66-j ...
				ld	a, #0FEh

loc_EE9C:							; CODE XREF: sub_E996+4DB-j
								; sub_E996+4EF-j ...
				st	d, unk_152
				bra	loc_EEBD

; END OF FUNCTION CHUNK	FOR sub_E996

; *************** S U B	R O U T	I N E ***************************************


sub_EEA1:							; CODE XREF: sub_C57A:loc_CAD4-p
				tbbs	bit6, unk_40, locret_EEBC

				tbbs	bit0, var_limiter_flags, locret_EEBC

				tbbc	bit3, unk_44, locret_EEBC

				tbbc	bit5, var_flags_4E, locret_EEBC

				tbbc	bit2, var_flags_46, locret_EEBC

				cmp	#05h, var_speed_kph
				bcs	locret_EEBC

				cmp	#0C4h, var_ect
				bcs	locret_EEBC

				setb	bit6, var_flags_4E

locret_EEBC:							; CODE XREF: sub_EEA1-j
								; sub_EEA1+3-j ...
				ret

; End of function sub_EEA1

; ***************************************************************************
; START	OF FUNCTION CHUNK FOR sub_E996

loc_EEBD:							; CODE XREF: sub_E996+509-j
				ld	a, var_flags_4E
				st	a, var_flags_43_copy_1D0
				clr	a
				ld	b, unk_14D
				add	b, unk_14E
				rolc	a
				add	b, unk_233
				addc	a, #00h
				sub	d, #0085h
				bmi	loc_EEDF

				cmp	d, #00E7h
				ble	loc_EEDB

				ld	b, #0E7h

loc_EEDB:							; CODE XREF: sub_E996+541-j
				cmp	b, #00h
				bcc	loc_EEE1


loc_EEDF:							; CODE XREF: sub_E996+53C-j
				ld	b, #00h

loc_EEE1:							; CODE XREF: sub_E996+547-j
				st	b, unk_14F
				ld	a, unk_1CE
				st	a, var_flags_4E
				jsr	sub_EACB

				tbbs	bit5, unk_40, loc_EEF8

				tbbs	bit7, var_flags_46, loc_EEF8

				tbbs	bit0, unk_40, loc_EF0A

				tbbc	bit3, var_flags_4D, loc_EEFC


loc_EEF8:							; CODE XREF: sub_E996+556-j
								; sub_E996+559-j
				ld	b, #40h
				bra	loc_EF04

; ***************************************************************************

loc_EEFC:							; CODE XREF: sub_E996+55F-j
				tbbc	bit5, var_io_input1, loc_EF0A

				tbbc	bit2, var_flags_46, loc_EF0A

				ld	b, #40h

loc_EF04:							; CODE XREF: sub_E996+564-j
				st	b, unk_151
				jmp	locret_EF25

; ***************************************************************************

loc_EF0A:							; CODE XREF: sub_E996+55C-j
								; sub_E996:loc_EEFC-j ...
				ld	b, unk_151
				add	b, #04h
				bcs	loc_EF16

				cmp	b, unk_14F
				ble	loc_EF19


loc_EF16:							; CODE XREF: sub_E996+579-j
				ld	b, unk_14F

loc_EF19:							; CODE XREF: sub_E996+57E-j
				tbbc	bit0, var_io_input1, loc_EF22

				cmp	b, #2Bh
				ble	loc_EF22

				ld	b, #2Bh

loc_EF22:							; CODE XREF: sub_E996:loc_EF19-j
								; sub_E996+588-j
				st	b, unk_151

locret_EF25:							; CODE XREF: sub_E996+20E-j
								; sub_E996+571-j
				ret

; END OF FUNCTION CHUNK	FOR sub_E996
; ***************************************************************************

				; public int_vector_e_ne
int_vector_e_ne:						; DATA XREF: ROM:FFFAo
				clrb	bit6, IRQLL
				push	x
				push	y
				ld	b, unk_A1
				bmi	loc_EF4D

				cmp	#3Fh, unk_BE
				bcs	loc_EF4D

				ld	a, unk_181
				tbbc	bit6, IRQL, loc_EF3D	; Interrupt Request Flag MSB

				inc	a
				bne	loc_EF3D

				dec	a

loc_EF3D:							; CODE XREF: ROM:EF36-j
								; ROM:EF3A-j
				tbbs	bit6, PORTA, loc_EF4E	; Port A Data Register

				cmp	a, #02h
				beq	loc_EF4B

				cmp	a, #06h
				bcs	loc_EF4D

				setb	bit7, var_error_flags1
; ***************************************************************************
				.db 8Ch
; ***************************************************************************

loc_EF4B:							; CODE XREF: ROM:EF42-j
				clrb	bit7, var_error_flags1

loc_EF4D:							; CODE XREF: ROM:EF2C-j
								; ROM:EF31-j ...
				clr	a

loc_EF4E:							; CODE XREF: ROM:loc_EF3D-j
				st	a, unk_181
				clrb	bit6, IRQL
				ld	b, unk_A1
				tbbc	bit7, PORTA, loc_EF76	; Port A Data Register

				tbbc	bit6, PORTA, loc_EF7D	; Port A Data Register

				cmpz	b
				bmi	loc_EF91

				mov	b, a
				inc	b
				and	a, #0Fh
				cmp	a, #05h
				bcs	loc_EF91

				and	b, #0F0h
				add	b, #10h
				mov	b, a
				cmp	b, #20h
				beq	loc_EF86

				cmp	b, #40h
				bne	loc_EF91

				clr	a
				bra	loc_EF86

; ***************************************************************************

loc_EF76:							; CODE XREF: ROM:EF55-j
				clr	a
				cmp	b, #35h
				beq	loc_EF90

				bra	loc_EF83

; ***************************************************************************

loc_EF7D:							; CODE XREF: ROM:EF58-j
				ld	a, #20h
				cmp	b, #15h
				beq	loc_EF90


loc_EF83:							; CODE XREF: ROM:EF7B-j
				cmpz	b
				bmi	loc_EF90


loc_EF86:							; CODE XREF: ROM:EF6D-j
								; ROM:EF74-j
				tbbc	bit2, unk_40, loc_EF90

				tbbs	bit0, var_flags_46, loc_EF90

				setb	bit3, var_diag_errors_5
				setb	bit1, var_error_flags1

loc_EF90:							; CODE XREF: ROM:EF79-j
								; ROM:EF81-j ...
				mov	a, b

loc_EF91:							; CODE XREF: ROM:EF5C-j
								; ROM:EF64-j ...
				st	b, unk_A1
				bra	loc_EFC4


; *************** S U B	R O U T	I N E ***************************************


init_ne_counters:						; CODE XREF: sub_C57A:loc_C659-p
								; sub_C57A+2F2-p
				ld	d, #5500h
				ld	y, #unk_EA
				st	d, [y]
				st	d, [y]
				st	d, [y]
				ld	d, #0FFFFh
				st	d, var_ne_sum3
				st	a, unk_A1
				st	a, unk_A2
				ret

; End of function init_ne_counters


; *************** S U B	R O U T	I N E ***************************************


sub_EFA8:							; CODE XREF: iv6_4ms_process+59p
				tbbc	bit0, var_io_input1, loc_EFBC

				tbs	bit7, unk_44
				bne	locret_EFC3

				cmp	#0Ch, unk_AE
				bcs	locret_EFC3

				ld	a, #0FFh
				st	a, unk_A1
				st	a, unk_A2
				bra	locret_EFC3

; ***************************************************************************

loc_EFBC:							; CODE XREF: sub_EFA8-j
				tbbc	bit7, unk_44, locret_EFC3

				clrb	bit7, unk_44
				clr	unk_AE

locret_EFC3:							; CODE XREF: sub_EFA8+5-j
								; sub_EFA8+A-j ...
				ret

; End of function sub_EFA8

; ***************************************************************************

loc_EFC4:							; CODE XREF: ROM:EF93-j
				jsr	sub_F3E9

				clrb	bit3, var_flags_42
				setb	bit1, IRQLL
				pull	y
				pull	x
				reti


; *************** S U B	R O U T	I N E ***************************************


iv6_ne_process:							; CODE XREF: int_vector_6_sw_int+8p

; FUNCTION CHUNK AT F1E1 SIZE 000000FA BYTES
; FUNCTION CHUNK AT F321 SIZE 00000026 BYTES

				jsr	injector_cold_start

				jsr	sub_DCAC

				ld	x, ASR2			; ASR2 edge counter value MSB
				st	x, unk_FF
				clr	a
				ld	b, unk_A1
				bpz	loc_EFDF

				ld	a, #08h

loc_EFDF:							; CODE XREF: iv6_ne_process+D-j
				xch	a, unk_C3
				xch	b, unk_A2
				cmpz	b
				bmi	loc_F002

				ld	b, unk_A2
				and	b, #07h
				cmpb	b, #01h
				bne	loc_F00D

				ld	y, #unk_EA
				add	y, b
				cmp	a, #08h
				bcc	loc_EFFE

				mov	x, d
				sub	d, unk_101
				cmp	a, #55h
				bcs	loc_F001


loc_EFFE:							; CODE XREF: iv6_ne_process+26-j
				ld	d, #5500h

loc_F001:							; CODE XREF: iv6_ne_process+2E-j
				st	d, [y]

loc_F002:							; CODE XREF: iv6_ne_process+16-j
				st	x, unk_101
				ld	d, unk_EA
				add	d, unk_EC
				add	d, unk_EE
				st	d, var_ne_sum3

loc_F00D:							; CODE XREF: iv6_ne_process+1E-j
				ld	b, unk_A2
				bpz	loc_F014

				jmp	loc_F1E1

; ***************************************************************************

loc_F014:							; CODE XREF: iv6_ne_process+41-j
				and	b, #07h
				push	b
				bne	loc_F01B

				clrb	bit1, unk_41

loc_F01B:							; CODE XREF: iv6_ne_process+49-j
				cmp	b, #04h
				bne	loc_F053

				tbbs	bit2, var_ignition_flags, loc_F053

				cmp	#3Ch, var_rpm_div_25
				bcc	loc_F053

				ld	a, #02h
				ld	b, #56h
				sub	d, unk_16D
				shr	d
				st	a, unk_A4
				ld	x, unk_EE
				jsr	mult_rBrX

				cmp	#00h, unk_A4
				beq	loc_F03D

				add	d, unk_EE

loc_F03D:							; CODE XREF: iv6_ne_process+6B-j
				sub	d, #0035h
				add	d, unk_101
				sub	d, unk_16B
				mov	d, x
				di
				cmp	d, CPR0			; Timer	comparison #0 MSB
				bpz	loc_F052

				tbbc	bit0, var_ignition_flags, loc_F052

				jsr	sub_F19B


loc_F052:							; CODE XREF: iv6_ne_process+7C-j
								; iv6_ne_process+7E-j
				ei

loc_F053:							; CODE XREF: iv6_ne_process+4F-j
								; iv6_ne_process+51-j ...
				pull	b
				tbbc	bit2, var_ignition_flags, loc_F07F

				cmp	b, #03h
				bne	loc_F05D

				clrb	bit4, var_ignition_flags

loc_F05D:							; CODE XREF: iv6_ne_process+8B-j
				tbbs	bit4, var_ignition_flags, loc_F07C

				ld	a, #2Bh
				st	a, unk_167
				ld	a, #4Bh
				st	a, unk_212
				cmpz	b
				bne	loc_F072

				di
				clrb	bit0, DOUT
				bra	loc_F079

; ***************************************************************************

loc_F072:							; CODE XREF: iv6_ne_process+9D-j
				cmp	b, #05h
				bne	loc_F07C

				di
				setb	bit0, DOUT

loc_F079:							; CODE XREF: iv6_ne_process+A2-j
				jsr	sub_F1CC


loc_F07C:							; CODE XREF: iv6_ne_process:loc_F05D-j
								; iv6_ne_process+A6-j
				jmp	loc_F1E1

; ***************************************************************************

loc_F07F:							; CODE XREF: iv6_ne_process+86-j
				mov	d, y
				cmp	b, #01h
				beq	loc_F08B

				cmp	b, #03h
				beq	loc_F092

				jmp	loc_F15A

; ***************************************************************************

loc_F08B:							; CODE XREF: iv6_ne_process+B4-j
				ld	b, unk_151
				clrb	bit5, var_ignition_flags
				bra	loc_F095

; ***************************************************************************

loc_F092:							; CODE XREF: iv6_ne_process+B8-j
				ld	b, unk_167

loc_F095:							; CODE XREF: iv6_ne_process+C2-j
				clrb	bit4, var_ignition_flags
				tbbs	bit7, var_flags_46, loc_F0AB

				tbbs	bit0, unk_40, loc_F0B6

				tbbs	bit3, var_flags_4D, loc_F0AB

				tbbc	bit2, var_flags_46, loc_F0B6

				tbbc	bit5, var_io_input1, loc_F0B6

				ld	d, #0080h
				bra	loc_F0AE

; ***************************************************************************

loc_F0AB:							; CODE XREF: iv6_ne_process+C9-j
								; iv6_ne_process+CF-j
				ld	d, #0056h

loc_F0AE:							; CODE XREF: iv6_ne_process+DB-j
				mov	d, x
				shr	d
				st	b, unk_167
				mov	x, d
				bra	loc_F0FD

; ***************************************************************************

loc_F0B6:							; CODE XREF: iv6_ne_process+CC-j
								; iv6_ne_process+D2-j ...
				cmp	b, unk_155
				bcs	loc_F0BE

				ld	b, unk_155

loc_F0BE:							; CODE XREF: iv6_ne_process+EB-j
				clr	a
				shl	d
				st	d, unk_A4
				clr	a
				ld	b, unk_14F
				shl	d
				sub	b, unk_215
				subc	a, #00h
				bcc	loc_F0D0

				clr	a
				clr	b

loc_F0D0:							; CODE XREF: iv6_ne_process+FE-j
				cmp	d, unk_A4
				bcs	loc_F0D6

				ld	d, unk_A4

loc_F0D6:							; CODE XREF: iv6_ne_process+104-j
				cmp	d, unk_152
				bcs	loc_F0DE

				ld	d, unk_152

loc_F0DE:							; CODE XREF: iv6_ne_process+10B-j
				mov	d, x
				shr	d
				st	b, unk_167
				ld	a, unk_150
				add	x, a
				mov	x, d
				sub	d, #0055h
				bcc	loc_F0EF

				clr	a
				clr	b

loc_F0EF:							; CODE XREF: iv6_ne_process+11D-j
				mov	d, x
				ld	a, unk_240
				cmp	#30h, unk_A2
				bcc	loc_F0FB

				ld	a, unk_241

loc_F0FB:							; CODE XREF: iv6_ne_process+128-j
				add	x, a
				mov	x, d

loc_F0FD:							; CODE XREF: iv6_ne_process+E6-j
				cmp	d, #01CDh
				ble	loc_F105

				ld	d, #01CDh

loc_F105:							; CODE XREF: iv6_ne_process+132-j
				mov	d, x
				shr	d
				shr	b
				add	b, #35h
				st	b, unk_212
				mov	x, d
				sub	d, #0007h
				bcc	loc_F115

				clr	a
				clr	b

loc_F115:							; CODE XREF: iv6_ne_process+143-j
				st	d, unk_16D
				mov	y, d
				ld	a, #06h
				sub	a, b
				ld	b, #56h
				sub	d, unk_16D
				mov	d, x
				ld	a, var_rpm_x_5p12
				mul	a, #0E9h
				st	a, unk_A4
				mov	x, d
				shr	b
				cmp	b, unk_A4
				bcc	loc_F137

				dec	a
				bpz	loc_F135

				clr	a
				ld	b, unk_A4
; ***************************************************************************
				.db 8Ch
; ***************************************************************************

loc_F135:							; CODE XREF: iv6_ne_process+161-j
				add	b, #80h

loc_F137:							; CODE XREF: iv6_ne_process+15E-j
				inc	a
				st	d, unk_163
				mov	x, d
				st	b, unk_A4
				mov	a, b
				clr	a
				div	d, #06h
				xch	b, unk_A4
				div	d, #06h
				mov	b, a
				jsr	sub_F1D5

				cmp	#00h, unk_A4
				beq	loc_F151

				add	d, var_ne_sum3

loc_F151:							; CODE XREF: iv6_ne_process+17F-j
				sub	d, #0035h
				add	d, unk_FF
				bsr	sub_F17B

				setb	bit0, var_ignition_flags

loc_F15A:							; CODE XREF: iv6_ne_process+BA-j
				ld	d, unk_163
				dec	a
				st	a, unk_163
				bne	loc_F1E1

				mov	b, a
				bsr	sub_F1D5

				st	b, unk_A4
				mov	a, b
				clr	a
				div	d, #03h
				xch	b, unk_A4
				div	d, #03h
				ld	a, unk_A4
				sub	d, #0035h
				add	d, unk_FF
				bsr	sub_F1B2

				bra	loc_F1E1

; End of function iv6_ne_process


; *************** S U B	R O U T	I N E ***************************************


sub_F17B:							; CODE XREF: iv6_ne_process+188-p
								; int_vector_9_ignition+A2p
				sub	d, unk_16B
				mov	d, x
				cmp	#1Dh, var_ne_sum3
				bcc	sub_F19B

				sub	d, unk_168
				bmi	loc_F192

				shr	d
				cmpz	a
				bne	sub_F19B

				cmp	b, unk_16A
				bcc	sub_F19B


loc_F192:							; CODE XREF: sub_F17B+C-j
				clr	a
				ld	b, unk_16A
				shl	d
				add	d, unk_168
				mov	d, x
; End of function sub_F17B


; *************** S U B	R O U T	I N E ***************************************


sub_F19B:							; CODE XREF: iv6_ne_process+81-p
								; sub_F17B+7-j ...
				st	x, unk_161
				di
				tbbc	bit0, DOUT, loc_F1AE	; DOUT Data Register

				ld	d, TIMER		; Timer	MSB (bit11~bit18)
				add	d, #0004h
				cmp	d, CPR0			; Timer	comparison #0 MSB
				bpz	loc_F1D3

				inc	a
				st	d, CPR0			; Timer	comparison #0 MSB

loc_F1AE:							; CODE XREF: sub_F19B+4-j
				setb	bit0, DOUT
				bra	loc_F1C2

; End of function sub_F19B


; *************** S U B	R O U T	I N E ***************************************


sub_F1B2:							; CODE XREF: iv6_ne_process+1A9-p
				st	d, unk_161
				di
				tbbs	bit3, var_ignition_flags, sub_F1BD

				setb	bit5, var_ignition_flags
				bra	loc_F1D3

; End of function sub_F1B2


; *************** S U B	R O U T	I N E ***************************************


sub_F1BD:							; CODE XREF: sub_F1B2+4-j
								; int_vector_9_ignition+Ep
				di
				clrb	bit0, DOUT
				clrb	bit1, var_ignition_flags

loc_F1C2:							; CODE XREF: sub_F19B+15-j
				ld	d, unk_161
				sub	d, #0004h
				cmp	d, TIMER		; Timer	MSB (bit11~bit18)
				bpz	loc_F1CE

; End of function sub_F1BD


; *************** S U B	R O U T	I N E ***************************************


sub_F1CC:							; CODE XREF: iv6_ne_process:loc_F079-p
				ld	d, TIMER		; Timer	MSB (bit11~bit18)

loc_F1CE:							; CODE XREF: sub_F1BD+D-j
				add	d, #0004h
				st	d, CPR0			; Timer	comparison #0 MSB

loc_F1D3:							; CODE XREF: sub_F19B+E-j
								; sub_F1B2+9-j
				ei
				ret

; End of function sub_F1CC


; *************** S U B	R O U T	I N E ***************************************


sub_F1D5:							; CODE XREF: iv6_ne_process+179-p
								; iv6_ne_process+196-p
				mov	d, y
				mul	a, var_ne_sum3
				mov	d, x
				mov	y, d
				mul	a, unk_F1
				addc	a, #00h
				add	x, a
				mov	x, d
				ret

; End of function sub_F1D5

; ***************************************************************************
; START	OF FUNCTION CHUNK FOR iv6_ne_process

loc_F1E1:							; CODE XREF: iv6_ne_process+43-j
								; iv6_ne_process:loc_F07C-j ...
				ld	a, unk_A2
				bpz	loc_F1E8

				jmp	loc_F321

; ***************************************************************************

loc_F1E8:							; CODE XREF: iv6_ne_process+215-j
				ld	d, var_inj_pw_inj1
				tbbs	bit0, var_flags_46, loc_F20F

				tbbs	bit5, unk_44, loc_F244

				cmp	#18h, var_rpm_div_25
				bcc	loc_F1FB

				cmp	#1Fh, var_cnt_startup
				bcs	loc_F20F


loc_F1FB:							; CODE XREF: iv6_ne_process+226-j
				cmp	#11h, unk_A2
				bne	loc_F20F

				shr	d
				setb	bit5, unk_44
				ld	x, #table_injector_control
				jsr	injector_update

				inc	x
				jsr	injector_update

				bra	loc_F238

; ***************************************************************************

loc_F20F:							; CODE XREF: iv6_ne_process+21D-j
								; iv6_ne_process+22B-j ...
				clrb	bit5, unk_44
				ld	x, #table_injector_control
				cmp	#12h, unk_A2
				beq	loc_F22C

				cmp	#32h, unk_A2
				beq	loc_F22C

				inc	x
				cmp	#02h, unk_A2
				beq	loc_F22C

				cmp	#22h, unk_A2
				beq	loc_F22C

				jmp	loc_F2B7

; ***************************************************************************

loc_F22C:							; CODE XREF: iv6_ne_process+249-j
								; iv6_ne_process+24E-j ...
				tbbc	bit7, var_ignition_flags, loc_F230

				shr	d

loc_F230:							; CODE XREF: iv6_ne_process:loc_F22C-j
				jsr	injector_update

				inc	x
				inc	x
				jsr	injector_update


loc_F238:							; CODE XREF: iv6_ne_process+23F-j
								; iv6_ne_process+27Cj ...
				ld	a, #02h
				st	a, unk_145
				ld	a, #10h
				st	a, unk_147
				bra	loc_F298

; ***************************************************************************

loc_F244:							; CODE XREF: iv6_ne_process+220-j
				ld	b, unk_148
				mov	b, a
				cmp	b, #35h
				bgt	loc_F238

				and	b, #0Fh
				cmp	b, #05h
				bgt	loc_F238

				cmp	a, unk_A2
				bne	loc_F2B7

				ld	b, unk_145
				and	b, #03h
				ld	x, #table_injector_control
				add	x, b
				ld	y, #var_inj_pw_inj1
				add	y, b
				add	y, b
				ld	d, y + 00h
				jsr	injector_update

				ld	a, unk_145
				inc	a
				and	a, #03h
				st	a, unk_145
				ld	d, unk_146
				sub	a, b
				bcs	loc_F280

				cmp	a, #05h
				ble	loc_F294

				ld	a, #05h
				bra	loc_F294

; ***************************************************************************

loc_F280:							; CODE XREF: iv6_ne_process+2A8-j
				cmp	a, #0FDh
				bcc	loc_F28E

				push	b
				ld	b, unk_145
				shr	b
				pull	b
				bcs	loc_F28E

				clrb	bit3, unk_41

loc_F28E:							; CODE XREF: iv6_ne_process+2B4-j
								; iv6_ne_process+2BC-j
				cmp	a, #0FBh
				bcc	loc_F294

				ld	a, #0FBh

loc_F294:							; CODE XREF: iv6_ne_process+2AC-j
								; iv6_ne_process+2B0-j ...
				add	a, b
				st	a, unk_147

loc_F298:							; CODE XREF: iv6_ne_process+274-j
				ld	a, unk_145
				mul	a, #06h
				add	b, unk_147
				sub	b, #0Ch
				bcc	loc_F2A6

				add	b, #18h

loc_F2A6:							; CODE XREF: iv6_ne_process+2D4-j
				cmp	b, #18h
				bcs	loc_F2AC

				sub	b, #18h

loc_F2AC:							; CODE XREF: iv6_ne_process+2DA-j
				clr	a
				div	d, #06h
				shl	b
				shl	b
				shl	b
				shl	b
				add	a, b
				st	a, unk_148

loc_F2B7:							; CODE XREF: iv6_ne_process+25B-j
								; iv6_ne_process+286-j
				tbbc	bit5, unk_44, loc_F2D7

				ld	a, unk_148
				mov	a, b
				and	a, #07h
				and	b, #30h
				sub	a, #03h
				bcc	loc_F2CC

				sub	b, #10h
				and	b, #30h
				add	a, #06h

loc_F2CC:							; CODE XREF: iv6_ne_process+2F6-j
				add	a, b
				cmp	a, unk_A2
				bne	loc_F2D9

				ld	a, unk_145
				shr	a
				bcs	loc_F2D9


loc_F2D7:							; CODE XREF: iv6_ne_process:loc_F2B7-j
				clrb	bit3, unk_41

loc_F2D9:							; CODE XREF: iv6_ne_process+301-j
								; iv6_ne_process+307-j
				bra	loc_F321

; END OF FUNCTION CHUNK	FOR iv6_ne_process
; ***************************************************************************
table_injector_control:		.db 10h, 40h, 80h, 20h		; DATA XREF: iv6_ne_process+235-o
								; iv6_ne_process+243-o ...
				.db 0EFh, 0BFh,	7Fh, 0DFh
				.db 38h, 3Ch, 3Eh, 3Ah

; *************** S U B	R O U T	I N E ***************************************


sub_F2E7:							; CODE XREF: sub_C57A+215D-p
				ld	d, var_inj_pw_inj1
				add	d, #0591h
				rorc	a
				rorc	b
				jsr	divide_rD_16

				mov	d, x
				ld	d, var_rpm_x_5p12
				jsr	divide_rD_16

				jsr	mult_rDrX

				div	d, #31h
				ld	y, #unk_C242
				tbbs	bit2, var_flags_46, loc_F305

				inc	y
				inc	y

loc_F305:							; CODE XREF: sub_F2E7+19-j
				cmp	#0B3h, var_ect
				bcs	loc_F30B

				inc	y

loc_F30B:							; CODE XREF: sub_F2E7+21-j
				ld	a, y + 00h
				st	a, unk_103
				add	b, y + 00h
				cmp	b, #1Ah
				ble	loc_F318

				ld	b, #1Ah

loc_F318:							; CODE XREF: sub_F2E7+2D-j
				sub	b, #18h
				neg	b
				add	b, #0Ah
				st	b, unk_146
				ret

; End of function sub_F2E7

; ***************************************************************************
; START	OF FUNCTION CHUNK FOR iv6_ne_process

loc_F321:							; CODE XREF: iv6_ne_process+217-j
								; iv6_ne_process:loc_F2D9-j
				jsr	loc_F4A4

				ld	a, unk_A2
				cmp	a, #00h
				beq	loc_F32E

				cmp	a, #20h
				bne	loc_F330


loc_F32E:							; CODE XREF: iv6_ne_process+35A-j
				clrb	bit2, unk_41

loc_F330:							; CODE XREF: iv6_ne_process+35E-j
				and	a, #07h
				bne	locret_F346

				clrb	bit0, unk_41
				clrb	bit1, unk_44
				jsr	loc_ED3F

				jsr	sub_CDD5

				ld	a, unk_1D5
				or	a, #02h
				st	a, unk_1D5

locret_F346:							; CODE XREF: iv6_ne_process+364-j
				ret

; END OF FUNCTION CHUNK	FOR iv6_ne_process
; ***************************************************************************
				.db  01h
				.db 0F3h ; ๓
				.db 0DAh ; ฺ
				.db  40h ; @
				.db  03h

; *************** S U B	R O U T	I N E ***************************************
injectors_batch_update:		bsr	check_batch_inj_limiters
				bcs	injector_skip

				; scale injector pulse-width for different size injectors
				jsr	scale_injector_pw
				bcs	injector_skip

				; drive each injector in turn
				ld	x, #table_injector_control
injector_batch_loop:		bsr	injector_drive
				inc	x
				cmp	x, #(table_injector_control+3)
				ble	injector_batch_loop
injector_skip:			ret

; *************** S U B	R O U T	I N E ***************************************
injector_update:		bsr	check_inj_limiters
				bcs	injector_skip

				; scale injector pulsewidth for different size injectors
				jsr	scale_injector_pw
				bcs	injector_skip				
				
				mov	d, y
				ld	a, unk_1D5
				or	a, #01h
				st	a, unk_1D5
				mov	y, d
				
; *************** S U B	R O U T	I N E ***************************************
injector_drive:			push	d			; Store injector pulsewidth for later
				clr	a
				ld	b, x + 08h		; Get address of CPRx register for this injector
				mov	d, y			; Copy address of CPRx reigser into Y
				di				; Disable interrupt whilst changing registers
				ld	a, LDOUT		; Get current injectors state
				cmpb	a, x + 00h		; Check if injector is on...
				bne	injector_already_on	; ...jump if it is
				
				; adjust injection pulsewidth for injector latency
				pull	d			; Retreive injector pulsewidth
				push	d			; Save it again!
				add	d, var_inj_battery_adjust ; Add calculated injector latency to pulsewidth
				push	x			
				bra	loc_F3A1

; ***************************************************************************

injector_already_on:		ld	d, y + 00h		; Get time when injector will be turned off
				sub	d, TIMER		; Subtract current time
				cmp	a, #0FFh		; Check if result is negative...
				bne	loc_F39D		; ...jump if it is not
				clr	a			; Injector switch off time has passed...
				clr	b			; ...so clear D
				
loc_F39D:			push	x
				mov	s, x
				add	d, x + 02h		; Add injector pulsewidth to current duration remaining

				
loc_F3A1:			bcc	loc_F3A6		; Jump if no overflow
				ld	d, #0FFFFh		; Set to maximum pulsewidth
				
loc_F3A6:			push	d
				mov	s, x
				ld	d, var_ne_sum3
				cmp	d, #3D09h
				ble	loc_F3B2
				ld	d, #3D09h

loc_F3B2:			shl	d
				shl	d
				cmp	d, x + 00h
				bcs	loc_F3BA
				ld	d, x + 00h

loc_F3BA:			pull	x
				pull	x
				add	d, TIMER		; Timer	MSB (bit11~bit18)
				st	d, y + 00h
				ld	d, DOUT			; DOUT Data Register
				or	a, x + 00h
				and	b, x + 04h
				st	d, DOUT			; DOUT Data Register
				ld	d, DOUT			; DOUT Data Register
				and	a, x + 04h
				or	b, x + 00h
				st	b, DOM			; DOUT Control Register
				st	a, DOUT			; DOUT Data Register
				pull	d
				ei
				ret

; *************** S U B	R O U T	I N E ***************************************
check_batch_inj_limiters:	mov	d, y
				ld	a, #10011100b
				bra	check_limiters_flags

; *************** S U B	R O U T	I N E ***************************************
check_inj_limiters:		mov	d, y
				ld	a, #10011111b

check_limiters_flags:		and	a, var_limiter_flags
				bne	limiter_active
				;tbbs	bit4, var_limiter_flags, limiter_active
				clrc
				.db 41h				; skip next single byte instruction
limiter_active:			setc
				mov	y, d
				ret


				.org 0F3E9h
				
; *************** S U B	R O U T	I N E ***************************************
sub_F3E9:							; CODE XREF: ROM:loc_EFC4-p
				ld	b, unk_A1
				ld	a, unk_1AF
				cmpz	b
				bne	loc_F3F5

				setb	bit1, PORTB
				bra	loc_F3FB

; ***************************************************************************

loc_F3F5:							; CODE XREF: sub_F3E9+6-j
				and	b, #07h
				bne	loc_F3FE

				clrb	bit1, PORTB

loc_F3FB:							; CODE XREF: sub_F3E9+A-j
				jmp	loc_F48F

; ***************************************************************************

loc_F3FE:							; CODE XREF: sub_F3E9+E-j
				dec	b
				bne	loc_F404

				jmp	loc_F485

; ***************************************************************************

loc_F404:							; CODE XREF: sub_F3E9+16-j
				dec	b
				beq	loc_F40A

				jmp	locret_F4A3

; ***************************************************************************

loc_F40A:							; CODE XREF: sub_F3E9+1C-j
				tbbs	bit5, unk_40, loc_F482

				tbbc	bit2, DOUT, loc_F482	; DOUT Data Register

				tbbs	bit5, IRQLL, loc_F482	; Interrupt Request Flag LSB

				tbbs	bit5, PORTD_ASRIN, loc_F482 ; Port D Data Register / ASR Input Data

				cmp	#7Ah, unk_BA
				ble	loc_F482

				cmp	#7Ah, unk_BC
				ble	loc_F482

				mov	a, b
				tbbc	bit5, PORTB, loc_F426	; Port B Data Register

				add	b, #04h

loc_F426:							; CODE XREF: sub_F3E9+38-j
				shr	b
				shr	b
				shr	b
				rorc	b
				bvc	loc_F44A

				bcs	loc_F479

				cmp	#39h, var_rpm_x_5p12
				bcs	loc_F482

				cmp	#92h, var_rpm_x_5p12
				bcc	loc_F482

				cmp	#03h, unk_A7
				bcc	loc_F441

				inc	unk_A7
				bra	loc_F482

; ***************************************************************************

loc_F441:							; CODE XREF: sub_F3E9+52-j
				tbbc	bit7, var_diag_errors_5, loc_F482

				setb	bit5, var_flags_46
				setb	bit0, var_error_flags2
				bra	loc_F482

; ***************************************************************************

loc_F44A:							; CODE XREF: sub_F3E9+41-j
				cmp	#0Eh, var_rpm_x_5p12
				bcs	loc_F482

				cmp	#92h, var_rpm_x_5p12
				bcc	loc_F482

				ld	b, nv_diag_errors_1
				cmpb	b, #80h
				bne	loc_F482

				and	a, #0F0h
				add	a, #10h
				cmp	a, #0C0h
				bcs	loc_F467

				setb	bit4, var_diag_errors_5
				clr	a
				bra	loc_F46B

; ***************************************************************************

loc_F467:							; CODE XREF: sub_F3E9+77-j
				cmp	a, #60h
				bne	loc_F483


loc_F46B:							; CODE XREF: sub_F3E9+7C-j
				clrb	bit2, DOUT
				div	d, #00h
				div	d, #00h
				div	d, #00h
				setb	bit2, DOUT
				setb	bit5, var_flags_46
				bra	loc_F483

; ***************************************************************************

loc_F479:							; CODE XREF: sub_F3E9+43-j
				tbbs	bit0, var_error_flags2,	loc_F482

				clrb	bit5, var_flags_46
				clrb	bit4, var_diag_errors_5
				clr	unk_A7

loc_F482:							; CODE XREF: sub_F3E9:loc_F40A-j
								; sub_F3E9+24-j	...
				clr	a

loc_F483:							; CODE XREF: sub_F3E9+80-j
								; sub_F3E9+8E-j
				bra	loc_F4A0

; ***************************************************************************

loc_F485:							; CODE XREF: sub_F3E9+18-j
				clrb	bit1, PORTB
				bra	loc_F48B

; ***************************************************************************
				.db  77h ; w
				.db  22h ; "
; ***************************************************************************

loc_F48B:							; CODE XREF: sub_F3E9+9E-j
				setb	bit0, PORTB
				bra	locret_F4A3

; ***************************************************************************

loc_F48F:							; CODE XREF: sub_F3E9:loc_F3FB-j
				tbbc	bit5, PORTB, loc_F494	; Port B Data Register

				or	a, #08h

loc_F494:							; CODE XREF: sub_F3E9:loc_F48F-j
				clrb	bit0, PORTB
				tbbs	bit4, PORTB, loc_F49B	; Port B Data Register

				or	a, #02h

loc_F49B:							; CODE XREF: sub_F3E9+AD-j
				tbbs	bit3, PORTB, loc_F4A0	; Port B Data Register

				or	a, #01h

loc_F4A0:							; CODE XREF: sub_F3E9:loc_F483-j
								; sub_F3E9:loc_F49B-j
				st	a, unk_1AF

locret_F4A3:							; CODE XREF: sub_F3E9+1E-j
								; sub_F3E9+A4-j
				ret

; End of function sub_F3E9

; ***************************************************************************

loc_F4A4:							; CODE XREF: iv6_ne_process:loc_F321-p
				ld	b, unk_A2
				bpz	loc_F4AB

				jmp	locret_F63E

; ***************************************************************************

loc_F4AB:							; CODE XREF: ROM:F4A6-j
				and	b, #0Fh
				bne	loc_F4B1

				bra	loc_F4B8

; ***************************************************************************

loc_F4B1:							; CODE XREF: ROM:F4AD-j
				cmp	b, #01h
				bne	loc_F4B5

loc_F4B5:
				jmp	locret_F63E

; ***************************************************************************

loc_F4B8:							; CODE XREF: ROM:F4AF-j
				ld	a, unk_1B0
				inc	a
				beq	loc_F4C1

				st	a, unk_1B0

loc_F4C1:							; CODE XREF: ROM:F4BC-j
				ld	a, var_rpm_x_5p12
				cmp	a, #90h
				bcc	loc_F4E4

				cmp	a, #10h
				bcs	loc_F4ED

				tbbs	bit2, var_flags_46, loc_F4ED

				ld	a, unk_234
				cmp	a, #04h
				bcs	loc_F4ED

				cmp	#0D2h, var_ect
				bcs	loc_F4ED

				setb	bit7, var_diag_errors_5
				tbbc	bit5, var_flags_46, loc_F4F6

				ld	a, unk_1B1
				bra	loc_F4F1

; ***************************************************************************

loc_F4E4:							; CODE XREF: ROM:F4C5-j
				tbbc	bit7, var_diag_errors_5, loc_F4ED

				ld	a, unk_1AB
				st	a, unk_1AD

loc_F4ED:							; CODE XREF: ROM:F4C9-j
								; ROM:F4CB-j ...
				clrb	bit7, var_diag_errors_5
				ld	a, #1Ah

loc_F4F1:							; CODE XREF: ROM:F4E2-j
				clr	unk_DD
				jmp	loc_F57A

; ***************************************************************************

loc_F4F6:							; CODE XREF: ROM:F4DC-j
				ld	a, unk_1AF
				and	a, #03h
				beq	loc_F537

				ld	y, #unk_C375
				add	y, a
				ld	a, y + 00h
				ld	b, unk_1B0
				cmp	b, #04h
				bgt	loc_F517

				shl	a
				cmp	b, #01h
				bgt	loc_F517

				push	b
				ld	b, unk_210
				pull	b
				bne	loc_F517

				shl	a

loc_F517:							; CODE XREF: ROM:F508-j
								; ROM:F50D-j ...
				add	a, unk_1AB
				bcc	loc_F51E

				ld	a, #0FFh

loc_F51E:							; CODE XREF: ROM:F51A-j
				st	a, unk_1AB
				cmp	b, #04h
				bcs	loc_F533

				sub	a, unk_1B2
				ble	loc_F533

				shr	a
				shr	a
				inc	a
				add	a, unk_1B2
				st	a, unk_1B2

loc_F533:							; CODE XREF: ROM:F523-j
								; ROM:F528-j
				clr	a
				st	a, unk_1B0

loc_F537:							; CODE XREF: ROM:F4FB-j
				ld	a, unk_1B1
				mov	a, b
				sub	a, unk_1B3
				bcc	loc_F548

				add	a, unk_1AB
				bcs	loc_F54D

				clr	a
				bra	loc_F54D

; ***************************************************************************

loc_F548:							; CODE XREF: ROM:F53E-j
				add	a, unk_1AB
				bcs	loc_F550


loc_F54D:							; CODE XREF: ROM:F543-j
								; ROM:F546-j
				cmp	a, b
				ble	loc_F551


loc_F550:							; CODE XREF: ROM:F54B-j
				mov	b, a

loc_F551:							; CODE XREF: ROM:F54E-j
				ld	b, unk_14F
				shl	b
				bcs	loc_F56E

				sub	b, unk_234
				bcc	loc_F56E

				add	b, unk_1B1
				bcs	loc_F562

				clr	b

loc_F562:							; CODE XREF: ROM:F55F-j
				cmp	a, b
				ble	loc_F56E

				mov	b, a
				cmp	a, #1Ah
				bcc	loc_F56C

				ld	a, #1Ah

loc_F56C:							; CODE XREF: ROM:F568-j
				bra	loc_F57A

; ***************************************************************************

loc_F56E:							; CODE XREF: ROM:F555-j
								; ROM:F55A-j ...
				ld	b, unk_160
				bne	loc_F57A

				cmp	a, unk_1B2
				bgt	loc_F57F

				mov	a, b
; ***************************************************************************
				.db 8Ch
; ***************************************************************************

loc_F57A:							; CODE XREF: ROM:F4F3-j
								; ROM:loc_F56C-j ...
				ld	b, #1Ah
				st	b, unk_1B2

loc_F57F:							; CODE XREF: ROM:F576-j
				st	a, unk_1AB
				ld	a, unk_1B1
				st	a, unk_1B3
				clr	a
				tbbs	bit2, var_flags_46, loc_F5BB

				ld	a, unk_1AB
				cmp	#0D2h, var_ect
				bcc	loc_F598

				add	a, #00h
				bra	loc_F5AB

; ***************************************************************************

loc_F598:							; CODE XREF: ROM:F592-j
				ld	b, #90h
				cmp	b, #91h
				bcc	loc_F5AB

				cmp	#90h, var_rpm_x_5p12
				bcs	loc_F5AB

				ld	a, unk_1AD
				sub	a, nv_table_knock_info+2
				bra	loc_F5AE

; ***************************************************************************

loc_F5AB:							; CODE XREF: ROM:F596-j
								; ROM:F59C-j ...
				sub	a, unk_1B1

loc_F5AE:							; CODE XREF: ROM:F5A9-j
				bcc	loc_F5B8

				add	a, unk_234
				bcs	loc_F5BB

				clr	a
				bra	loc_F5BB

; ***************************************************************************

loc_F5B8:							; CODE XREF: ROM:loc_F5AE-j
				ld	a, unk_234

loc_F5BB:							; CODE XREF: ROM:F589-j
								; ROM:F5B3-j ...
				st	a, unk_210
				cmp	#40h, unk_C5
				bcc	loc_F5C6

				jmp	locret_F63E

; ***************************************************************************

loc_F5C6:							; CODE XREF: ROM:F5C1-j
				clr	unk_C5
				ld	a, unk_1AB
				sub	a, #02h
				bcc	loc_F5D0

				clr	a

loc_F5D0:							; CODE XREF: ROM:F5CD-j
				ld	b, unk_210
				bne	loc_F5DB

				cmp	a, #1Ah
				bcc	loc_F5DB

				ld	a, #1Ah

loc_F5DB:							; CODE XREF: ROM:F5D3-j
								; ROM:F5D7-j
				st	a, unk_1AB
				ld	b, unk_1B1
				beq	loc_F61D

				ld	a, var_rpm_x_5p12
				cmp	a, #18h
				bcs	loc_F61D

				cmp	a, #90h
				bcc	loc_F61D

				ld	a, unk_1B2
				sub	a, #11h
				bcc	loc_F606

				ld	a, unk_1B4
				ld	y, #unk_C379
				add	y, a
				ld	a, y + 00h
				add	a, b
				cmp	a, #0ABh
				ble	loc_F604

				ld	a, #0ABh

loc_F604:							; CODE XREF: ROM:F600-j
				bra	loc_F614

; ***************************************************************************

loc_F606:							; CODE XREF: ROM:F5F2-j
				sub	a, #11h
				ble	loc_F61D

				xch	a, b
				sub	a, b
				bcs	loc_F612

				cmp	a, #1Ah
				bcc	loc_F614


loc_F612:							; CODE XREF: ROM:F60C-j
				ld	a, #1Ah

loc_F614:							; CODE XREF: ROM:loc_F604-j
								; ROM:F610-j
				ld	y, #nv_table_knock_info
				ld	b, unk_1B4
				add	y, b
				st	a, y + 00h

loc_F61D:							; CODE XREF: ROM:F5E1-j
								; ROM:F5E7-j ...
				ld	x, #table_knock_rpm_C37C
				ld	b, unk_1B4
				shl	b
				add	x, b
				ld	a, var_rpm_div_25
				clr	b
				cmp	a, x + 00h
				bcs	loc_F632

				inc	b
				cmp	a, x + 01h
				bcs	loc_F632

				inc	b

loc_F632:							; CODE XREF: ROM:F62A-j
								; ROM:F62F-j
				st	b, unk_1B4
				ld	y, #nv_table_knock_info
				add	y, b
				ld	a, y + 00h
				st	a, unk_1B1

locret_F63E:							; CODE XREF: ROM:F4A8-j
								; ROM:loc_F4B5-j ...
				ret


; *************** S U B	R O U T	I N E ***************************************


sub_F63F:							; CODE XREF: sub_E996+207-p
				tbbc	bit5, var_flags_46, loc_F64D

				di
				ld	d, #7373h
				st	d, nv_table_knock_info
				st	a, nv_table_knock_info+2
				ei

loc_F64D:							; CODE XREF: sub_F63F-j
				cmp	#0D2h, var_ect
				bcs	loc_F65F

				tbbs	bit5, var_flags_46, loc_F65F

				ld	a, unk_5C
				cmp	a, #96h
				bcc	loc_F661

				cmp	a, #6Ah
				ble	loc_F661


loc_F65F:							; CODE XREF: sub_F63F+11-j
								; sub_F63F+13-j
				clr	unk_C6

loc_F661:							; CODE XREF: sub_F63F+1A-j
								; sub_F63F+1E-j
				cmp	#06h, unk_C6
				bcs	loc_F669

				setb	bit2, PORTB
; ***************************************************************************
				.db 8Ch
; ***************************************************************************

loc_F669:							; CODE XREF: sub_F63F+25-j
				clrb	bit2, PORTB
				ret

; End of function sub_F63F


; *************** S U B	R O U T	I N E ***************************************


				; public int_vector_9_ignition
int_vector_9_ignition:						; DATA XREF: ROM:FFF0o

; FUNCTION CHUNK AT F6EA SIZE 0000002A BYTES

				push	x
				push	y
				clrb	bit0, IRQL
				tbbc	bit0, LDOUT, loc_F6EC	; Latch	DOUT

				clrb	bit0, var_ignition_flags
				tbbc	bit5, var_ignition_flags, loc_F67F

				clrb	bit5, var_ignition_flags
				jsr	sub_F1BD

				bra	loc_F68A

; ***************************************************************************

loc_F67F:							; CODE XREF: int_vector_9_ignition+9-j
				ld	d, CPR0			; Timer	comparison #0 MSB
				add	d, #3F7Ah
				st	d, CPR0			; Timer	comparison #0 MSB
				clrb	bit0, DOUT
				setb	bit1, var_ignition_flags

loc_F68A:							; CODE XREF: int_vector_9_ignition+11-j
				tbs	bit3, var_ignition_flags
				bne	loc_F6EA

				jsr	sub_DCD5

				tbbs	bit4, IRQLL, loc_F6CC	; Interrupt Request Flag LSB

				ld	d, unk_182
				inc	a
				bne	loc_F69B

				dec	a

loc_F69B:							; CODE XREF: int_vector_9_ignition+2C-j
				cmp	a, #05h
				bcs	loc_F6A1

				setb	bit4, var_limiter_flags

loc_F6A1:							; CODE XREF: int_vector_9_ignition+31-j
				cmp	#3Fh, unk_BE
				bcs	loc_F6D4

				cmp	#3Ch, var_rpm_x_5p12
				bcs	loc_F6B3

				cmp	#73h, var_adc_battery
				bcs	loc_F6D4

				tbbs	bit0, var_io_input1, loc_F6D4


loc_F6B3:							; CODE XREF: int_vector_9_ignition+3D-j
				cmp	b, #01h
				bgt	loc_F6B9

				clr	unk_BD

loc_F6B9:							; CODE XREF: int_vector_9_ignition+49-j
				inc	b
				bne	loc_F6BD

				dec	b

loc_F6BD:							; CODE XREF: int_vector_9_ignition+4E-j
				cmp	b, #09h
				bcs	loc_F6D6

				cmp	#3Fh, unk_BD
				bcs	loc_F6D6

				setb	bit2, var_error_flags1
				setb	bit4, var_flags_4D
				bra	loc_F6D6

; ***************************************************************************

loc_F6CC:							; CODE XREF: int_vector_9_ignition+25-j
				clrb	bit4, IRQLL
				clrb	bit4, var_limiter_flags
				clrb	bit2, var_error_flags1
				ld	a, #01h

loc_F6D4:							; CODE XREF: int_vector_9_ignition+38-j
								; int_vector_9_ignition+42-j ...
				ld	b, #01h

loc_F6D6:							; CODE XREF: int_vector_9_ignition+53-j
								; int_vector_9_ignition+58-j ...
				st	d, unk_182
				bra	loc_F6EA

; End of function int_vector_9_ignition


; *************** S U B	R O U T	I N E ***************************************


sub_F6DB:							; CODE XREF: ROM:DEF0-p
				tbbs	bit4, var_flags_4D, loc_F6E0

				clr	unk_E1

loc_F6E0:							; CODE XREF: sub_F6DB-j
				and	a, #0FBh
				cmp	#2Eh, unk_E1
				ble	locret_F6E9

				or	a, #04h

locret_F6E9:							; CODE XREF: sub_F6DB+A-j
				ret

; End of function sub_F6DB

; ***************************************************************************
; START	OF FUNCTION CHUNK FOR int_vector_9_ignition

loc_F6EA:							; CODE XREF: int_vector_9_ignition+20-j
								; int_vector_9_ignition+6D-j
				bra	loc_F711

; ***************************************************************************

loc_F6EC:							; CODE XREF: int_vector_9_ignition+4-j
				ld	d, CPR0			; Timer	comparison #0 MSB
				st	d, unk_168
				tbbs	bit5, unk_40, loc_F6FA

				tbbs	bit0, var_io_input1, loc_F6FA

				clrb	bit2, var_ignition_flags
; ***************************************************************************
				.db 8Ch
; ***************************************************************************

loc_F6FA:							; CODE XREF: int_vector_9_ignition+85-j
								; int_vector_9_ignition+88-j
				setb	bit2, var_ignition_flags
				tbbc	bit3, var_ignition_flags, loc_F703

				clrb	bit3, var_ignition_flags
				setb	bit4, var_ignition_flags

loc_F703:							; CODE XREF: int_vector_9_ignition+90-j
				tbbs	bit1, var_ignition_flags, loc_F711

				tbbs	bit2, var_ignition_flags, loc_F711

				ld	d, var_ne_sum3
				add	d, unk_168
				jsr	sub_F17B


loc_F711:							; CODE XREF: int_vector_9_ignition:loc_F6EA-j
								; int_vector_9_ignition:loc_F703-j ...
				pull	y
				pull	x
				reti

; END OF FUNCTION CHUNK	FOR int_vector_9_ignition

; *************** S U B	R O U T	I N E ***************************************


				; public int_4ms_watchdog
int_4ms_watchdog:						; DATA XREF: ROM:FFF6o
				clrb	bit4, IRQL
				push	x
				push	y
				ld	a, var_adc_index
				mov	a, b
				and	b, #03h
				beq	loc_F724

				add	a, #80h
				bcc	loc_F72E

				clr	a

loc_F724:							; CODE XREF: int_4ms_watchdog+9-j
				ld	b, #00h
				st	b, unk_F7
				setb	bit1, SSD
				setc
				rolc	b
				st	b, SIDR_SODR		; Serial Input/Output Data Register

loc_F72E:							; CODE XREF: int_4ms_watchdog+D-j
				st	a, var_adc_index
				jsr	sub_D32F

				ld	a, TIMER		; Timer	MSB (bit11~bit18)
				shr	a
				shr	a
				shr	a
				bcc	loc_F73A

loc_F73A:
				clrb	bit2, var_flags_42
				setb	bit1, IRQLL
				pull	y
				pull	x
				reti

; End of function int_4ms_watchdog


; *************** S U B	R O U T	I N E ***************************************


iv6_4ms_process:						; CODE XREF: int_vector_6_sw_int+Fp
				ld	d, #0AD15h
				jsr	increment_counters

				jsr	check_io_inputs

				ld	b, unk_AB
				tbs	bit3, DOUT		; DOUT Data Register
				beq	loc_F797

				ld	a, unk_23C
				cmpb	a, #04h
				beq	loc_F75E

				tbbs	bit3, unk_47, loc_F777

				setb	bit3, unk_47
				bra	loc_F763

; ***************************************************************************

loc_F75E:							; CODE XREF: iv6_4ms_process+14-j
				tbbc	bit3, unk_47, loc_F777

				clrb	bit3, unk_47

loc_F763:							; CODE XREF: iv6_4ms_process+1B-j
				clr	unk_AC
				add	b, #10h
				cmp	b, #20h
				bcs	loc_F795

				ld	b, #20h
				ld	a, unk_6D
				and	a, #0FEh
				st	a, unk_6D
				clrb	bit7, var_flags_46
				bra	loc_F795

; ***************************************************************************

loc_F777:							; CODE XREF: iv6_4ms_process+16-j
								; iv6_4ms_process:loc_F75E-j
				inc	unk_AC
				cmp	#16h, unk_AC
				bcs	loc_F795

				clrb	bit3, unk_47
				clrb	bit3, DOUT
				clr	unk_AC
				and	b, #0Fh
				inc	b
				cmp	b, #03h
				bcs	loc_F795

				ld	b, #03h
				ld	a, unk_6D
				or	a, #01h
				st	a, unk_6D
				setb	bit7, var_flags_46

loc_F795:							; CODE XREF: iv6_4ms_process+28-j
								; iv6_4ms_process+34-j ...
				st	b, unk_AB

loc_F797:							; CODE XREF: iv6_4ms_process+D-j
				jsr	start_dma

				jsr	sub_EFA8

				jsr	sub_EB67

				inc	unk_C2
				ld	a, #01h
				cmpb	a, unk_C2
				beq	loc_F7AB

				jsr	sub_E712


loc_F7AB:							; CODE XREF: iv6_4ms_process+65-j
				jsr	sub_E725

				cmp	#56h, unk_B2
				bcs	loc_F7C7

				clr	unk_B2
				jsr	check_set_speed_limiter

				jsr	calc_speed_kph

				ld	d, var_rpm_x_5p12
				shr	d
				shr	d
				div	d, var_speed_kph
				bcc	loc_F7C5

				ld	b, #0FFh

loc_F7C5:							; CODE XREF: iv6_4ms_process+80-j
				st	b, unk_F5

loc_F7C7:							; CODE XREF: iv6_4ms_process+70-j
				tbbc	bit1, var_flags_42, loc_F7F3

				ld	a, TIMER		; Timer	MSB (bit11~bit18)
				shr	a
				shr	a
				shr	a
				bcs	loc_F7EA

				shr	a
				bcs	loc_F7E4

				shr	a
				bcs	loc_F7E0

				shr	a
				bcs	loc_F7DC

				bra	loc_F7F3

; ***************************************************************************

loc_F7DC:							; CODE XREF: iv6_4ms_process+97-j
				clrb	bit7, unk_41
				bra	loc_F7F3

; ***************************************************************************

loc_F7E0:							; CODE XREF: iv6_4ms_process+94-j
				clrb	bit6, unk_41
				bra	loc_F7F3

; ***************************************************************************

loc_F7E4:							; CODE XREF: iv6_4ms_process+91-j
				clrb	bit5, unk_41
				clrb	bit4, unk_41
				bra	loc_F7F3

; ***************************************************************************

loc_F7EA:							; CODE XREF: iv6_4ms_process+8E-j
				ld	d, #0C304h
				jsr	increment_counters

				jsr	copy_dma_tx


loc_F7F3:							; CODE XREF: iv6_4ms_process:loc_F7C7-j
								; iv6_4ms_process+99-j ...
				setb	bit7, var_flags_42
				ret

; End of function iv6_4ms_process


; *************** S U B	R O U T	I N E ***************************************


start_dma:							; CODE XREF: sub_C57A+194-p
								; sub_E1C9+A-p ...
				cmp	#04h, unk_C1
				ble	loc_F807

				ld	a, unk_1D7
				and	a, #0BFh
				st	a, unk_1D7
				st	a, ASR0N		; ASR0 neg edge	counter	value MSB
				bra	loc_F811

; ***************************************************************************

loc_F807:							; CODE XREF: start_dma+3-j
				ld	a, TIMER3		; Timer	LSB (bit0~bit2)
				cmpb	a, #40h
				beq	loc_F825

				cmpb	a, #08h
				bne	loc_F813


loc_F811:							; CODE XREF: start_dma+F-j
				clr	unk_C1

loc_F813:							; CODE XREF: start_dma+19-j
				ld	a, unk_1D7
				or	a, #40h
				st	a, unk_1D7
				st	a, ASR0N		; ASR0 neg edge	counter	value MSB
				ld	d, #91FAh
				st	d, ASR3			; ASR3 edge counter value MSB
				ld	#0B7h, TIMER3		; Timer	LSB (bit0~bit2)

loc_F825:							; CODE XREF: start_dma+15-j
				cmp	#24h, unk_76
				bcs	loc_F83E

				clrb	bit2, IMASKL
				ld	a, unk_1D7
				and	a, #7Fh
				st	a, unk_1D7
				st	a, ASR0N		; ASR0 neg edge	counter	value MSB
				ld	a, TIMER3		; Timer	LSB (bit0~bit2)
				or	a, #80h
				st	a, TIMER3		; Timer	LSB (bit0~bit2)
				bra	loc_F867

; ***************************************************************************

loc_F83E:							; CODE XREF: start_dma+32-j
				setb	bit2, IMASKL
				cmp	#04h, unk_C0
				ble	locret_F86D

				ld	a, unk_1D7
				and	a, #7Fh
				st	a, ASR0N		; ASR0 neg edge	counter	value MSB
				or	a, #80h
				st	a, unk_1D7
				st	a, ASR0N		; ASR0 neg edge	counter	value MSB
				ld	d, #81D8h
				st	d, ASR2			; ASR2 edge counter value MSB
				ld	#4Fh, TIMER3		; Timer	LSB (bit0~bit2)
				ld	b, unk_77
				inc	b
				bne	loc_F861

				dec	b

loc_F861:							; CODE XREF: start_dma+68-j
				st	b, unk_77
				cmp	b, #03h
				bcs	loc_F86B


loc_F867:							; CODE XREF: start_dma+46-j
				setb	bit7, var_flags_46
				clrb	bit2, SSD

loc_F86B:							; CODE XREF: start_dma+6F-j
				clr	unk_C0

locret_F86D:							; CODE XREF: start_dma+4D-j
				ret

; End of function start_dma


; *************** S U B	R O U T	I N E ***************************************


				; public IV0
IV0:								; DATA XREF: ROM:FFDEo
				push	x
				push	y
				clrb	bit2, IRQLL
				ld	b, unk_76
				ld	a, TIMER3		; Timer	LSB (bit0~bit2)
				cmpb	a, #30h
				bne	loc_F887

				tbbs	bit2, RAMST, loc_F887	; Built-in RAM status

				jsr	copy_dma_rx

				clr	unk_C0
				clr	unk_77
				clr	b
				bra	loc_F88B

; ***************************************************************************

loc_F887:							; CODE XREF: IV0+A-j
								; IV0+C-j
				inc	b
				bne	loc_F88B

				dec	b

loc_F88B:							; CODE XREF: IV0+17-j
								; IV0+1A-j
				st	b, unk_76
				ld	d, #81D8h
				st	d, ASR2			; ASR2 edge counter value MSB
				ld	#4Fh, TIMER3		; Timer	LSB (bit0~bit2)
				ld	b, RAMST		; Built-in RAM status
				ld	b, unk_1C
				pull	y
				pull	x
				reti

; End of function IV0


; *************** S U B	R O U T	I N E ***************************************


copy_dma_tx:							; CODE XREF: sub_C57A+187-p
								; iv6_4ms_process+AF-p
				ld	a, nv_unk_trim_98
				tbbs	bit0, var_flags_42, loc_F8A3

				ld	a, #50h

loc_F8A3:							; CODE XREF: copy_dma_tx+2-j
				st	a, unk_207
				ld	a, nv_unk_trim_96
				tbbs	bit0, var_flags_42, loc_F8AD

				ld	a, #00h

loc_F8AD:							; CODE XREF: copy_dma_tx+C-j
				st	a, unk_20A
				ld	a, var_cnt_startup
				st	a, unk_208
				ld	a, var_cnt_E4
				st	a, unk_209
				ld	a, unk_60
				st	a, unk_20B
				ld	d, var_inj_pw_inj1
				st	d, unk_200
				ld	d, nv_table_knock_info
				st	d, unk_20D
				ld	a, nv_table_knock_info+2
				st	a, unk_20F
				ld	a, unk_1B5
				st	a, unk_216
				ld	a, var_tps_delta
				st	a, unk_217
				ld	d, var_error_flags1
				st	d, unk_218
				ld	a, var_flags_46
				st	a, unk_21A
				clr	a
				ld	b, var_flags_43_copy_1D0
				cmpb	b, #80h
				beq	loc_F8F0

				or	a, #01h

loc_F8F0:							; CODE XREF: copy_dma_tx+50-j
				ld	b, unk_1D4
				cmpb	b, #04h
				beq	loc_F8F9

				or	a, #02h

loc_F8F9:							; CODE XREF: copy_dma_tx+59-j
				tbbc	bit1, var_io_input1, loc_F8FE

				or	a, #04h

loc_F8FE:							; CODE XREF: copy_dma_tx:loc_F8F9-j
				ld	b, unk_1D2
				cmpb	b, #01h
				beq	loc_F907

				or	a, #08h

loc_F907:							; CODE XREF: copy_dma_tx+67-j
				tbbc	bit7, var_diag_errors_5, loc_F90C

				or	a, #10h

loc_F90C:							; CODE XREF: copy_dma_tx:loc_F907-j
				tbbc	bit3, var_io_input1, loc_F911

				or	a, #20h

loc_F911:							; CODE XREF: copy_dma_tx:loc_F90C-j
				st	a, dmatx_flags_1
				ld	a, var_limiter_flags
				st	a, dmatx_limiter_flags
				ret

; End of function copy_dma_tx


; *************** S U B	R O U T	I N E ***************************************


copy_dma_rx:							; CODE XREF: IV0+F-p
				ld	x, #dmarx_unk_220
				ld	y, #var_dma_rx_buffer

loc_F920:							; CODE XREF: copy_dma_rx+Ej
				ld	d, [y]
				st	d, x + 00h
				inc	x
				inc	x
				cmp	x, #byte_242
				bcs	loc_F920

				ret

; End of function copy_dma_rx


; *************** S U B	R O U T	I N E ***************************************


				; public int_vector_6_sw_int
int_vector_6_sw_int:						; DATA XREF: ROM:FFEAo
				clrb	bit1, IRQLL
				push	x
				push	y
				tbs	bit3, var_flags_42	; Test and set NE process background code flag
				bne	loc_F936

				jsr	iv6_ne_process


loc_F936:							; CODE XREF: int_vector_6_sw_int+6-j
				tbs	bit2, var_flags_42	; Test and set 4ms background code flag
				bne	loc_F93D

				jsr	iv6_4ms_process


loc_F93D:							; CODE XREF: int_vector_6_sw_int+D-j
				pull	y
				pull	x
				reti

; End of function int_vector_6_sw_int


; *************** S U B	R O U T	I N E ***************************************


				; public int_vector_4_kph
int_vector_4_kph:						; DATA XREF: ROM:FFE6o

; FUNCTION CHUNK AT F984 SIZE 00000003 BYTES

				clrb	bit7, IRQLL
				push	x
				push	y
				tbs	bit5, TAIT		; Timer	ASR Control
				beq	loc_F94D

				clrb	bit5, TAIT
				ld	d, ASR3			; ASR3 edge counter value MSB
; ***************************************************************************
				.db 8Ch
; ***************************************************************************

loc_F94D:							; CODE XREF: int_vector_4_kph+6-j
				ld	d, UNK34
				cmp	#05h, var_4ms_cnt_B3
				bgt	loc_F95D

				sub	d, var_kph_71
				cmp	d, #00FAh
				ble	loc_F96A

				add	d, var_kph_71

loc_F95D:							; CODE XREF: int_vector_4_kph+12-j
				st	d, var_kph_71
				di
				ld	a, var_kph_table
				inc	a
				beq	loc_F967

				st	a, var_kph_table

loc_F967:							; CODE XREF: int_vector_4_kph+23-j
				ei
				clr	var_4ms_cnt_B3

loc_F96A:							; CODE XREF: int_vector_4_kph+19-j
				bra	return_from_isr

; End of function int_vector_4_kph


; *************** S U B	R O U T	I N E ***************************************


calc_speed_kph:							; CODE XREF: iv6_4ms_process+77-p
				clr	a
				ld	x, #var_kph_table
				xch	a, x + 00h
				xch	a, x + 01h
				add	a, x + 01h
				bcc	loc_F97A

				ld	a, #0FFh

loc_F97A:							; CODE XREF: calc_speed_kph+A-j
				cmp	a, #02h
				bgt	loc_F97F

				clr	a

loc_F97F:							; CODE XREF: calc_speed_kph+10-j
				xch	a, var_speed_kph
				st	a, var_speed_kph_2
				ret

; End of function calc_speed_kph

; ***************************************************************************
; START	OF FUNCTION CHUNK FOR int_vector_4_kph

return_from_isr:						; CODE XREF: int_vector_4_kph:loc_F96A-j
				pull	y
				pull	x
				reti

; END OF FUNCTION CHUNK	FOR int_vector_4_kph
; ***************************************************************************

				; public int_vector_1_serial_rx
int_vector_1_serial_rx:						; DATA XREF: ROM:FFE0o
				clrb	bit3, IRQLL
				push	x
				push	y
				tbbs	bit6, SSD, loc_F99D	; Serial Status	Data Register

				ld	a, SIDR_SODR		; Serial Input/Output Data Register
				setb	bit1, SSD
				ld	#02h, SIDR_SODR		; Serial Input/Output Data Register
				ld	b, #0Dh

loc_F997:							; CODE XREF: ROM:F99Bj
				tbbs	bit7, SSD, loc_F9A3	; Serial Status	Data Register

				dec	b
				bne	loc_F997


loc_F99D:							; CODE XREF: ROM:F98B-j
								; ROM:F9A5j
				ld	b, SIDR_SODR		; Serial Input/Output Data Register
				ld	a, #0FFh
				bra	loc_F9C0

; ***************************************************************************

loc_F9A3:							; CODE XREF: ROM:loc_F997-j
				clrb	bit3, IRQLL
				tbbs	bit6, SSD, loc_F99D	; Serial Status	Data Register

				ld	b, SIDR_SODR		; Serial Input/Output Data Register
				mov	d, x
				tbbc	bit1, var_flags_42, loc_F9B1

				tbbc	bit7, var_flags_42, loc_F9BE


loc_F9B1:							; CODE XREF: ROM:F9AB-j
				cmp	#18h, unk_AD
				bgt	loc_F9BE

				tbs	bit0, PORTA		; Port A Data Register
				beq	loc_F9BC

				clrb	bit0, PORTA

loc_F9BC:							; CODE XREF: ROM:F9B8-j
				clrb	bit7, var_flags_42

loc_F9BE:							; CODE XREF: ROM:F9AE-j
								; ROM:F9B4-j
				ld	a, unk_F7

loc_F9C0:							; CODE XREF: ROM:F9A1-j
				push	a
				tbbs	bit1, var_flags_42, adc_advance_index

				clr	a
				ld	b, unk_F7
				inc	b
				cmp	b, #0Eh
				bne	adc_send_command

				setb	bit1, var_flags_42
				jmp	loc_FA48

; ***************************************************************************

adc_advance_index:						; CODE XREF: ROM:F9C1-j
				ld	a, var_adc_index
				inc	a
				and	a, #7Fh
				mov	a, b
				and	b, #07h
				ld	y, #table_adc_channel
				tbbs	bit1, unk_40, loc_F9E5

				tbbs	bit0, unk_40, loc_F9E5

				ld	y, #table_adc_channel_2

loc_F9E5:							; CODE XREF: ROM:F9DC-j
								; ROM:F9DF-j
				add	y, b
				ld	b, y + 00h
				bpz	adc_send_command

				cmp	b, #81h
				beq	adc_81h_command

				cmp	b, #80h
				beq	adc_debug_command

				bra	adc_skip_command

; ***************************************************************************

adc_81h_command:						; CODE XREF: ROM:F9EC-j
				mov	a, b
				shr	b
				shr	b
				shr	b
				and	b, #0Fh
				ld	y, #table_adc_channel_low_pri
				add	y, b
				ld	b, y + 00h

adc_send_command:						; CODE XREF: ROM:F9CA-j
								; ROM:F9E8-j
				setb	bit1, SSD
				st	b, unk_F7
				setc
				rolc	b
				and	b, #1Fh
				st	b, SIDR_SODR		; Serial Input/Output Data Register
				bra	adc_skip_command

; ***************************************************************************

adc_debug_command:						; CODE XREF: ROM:F9F0-j
				push	a
				clrb	bit1, SSD
				ld	a, #0DAh
				st	a, SIDR_SODR		; Serial Input/Output Data Register
				ld	a, #0Eh

loc_FA15:							; CODE XREF: ROM:FA19j
				tbbs	bit7, SSD, loc_FA1D	; Serial Status	Data Register

				dec	a
				bne	loc_FA15

				bra	loc_FA20

; ***************************************************************************

loc_FA1D:							; CODE XREF: ROM:loc_FA15-j
				tbbc	bit6, SSD, loc_FA24	; Serial Status	Data Register


loc_FA20:							; CODE XREF: ROM:FA1B-j
				ld	a, SIDR_SODR		; Serial Input/Output Data Register
				bra	loc_FA40

; ***************************************************************************

loc_FA24:							; CODE XREF: ROM:loc_FA1D-j
				ld	b, SIDR_SODR		; Serial Input/Output Data Register
				ld	a, SSD			; Serial Status	Data Register
				and	a, #01h
				cmp	d, #001Fh
				bne	loc_FA33

				ld	d, #word_FFDC
; ***************************************************************************
				.db 41h
; ***************************************************************************

loc_FA33:							; CODE XREF: ROM:FA2D-j
				shl	d
				mov	d, y
				ld	d, [y]
				clrb	bit1, SSD
				st	a, SIDR_SODR		; Serial Input/Output Data Register
				div	d, #00h
				clrb	bit1, SSD
				st	b, SIDR_SODR		; Serial Input/Output Data Register

loc_FA40:							; CODE XREF: ROM:FA22-j
				clrb	bit3, IRQLL
				pull	a
				inc	a
				and	a, #7Fh

adc_skip_command:						; CODE XREF: ROM:F9F2-j
								; ROM:FA0A-j
				st	a, var_adc_index

loc_FA48:							; CODE XREF: ROM:F9CE-j
				pull	b
				cmp	b, #0FFh
				bne	loc_FA50

				jmp	adc_complete

; ***************************************************************************

loc_FA50:							; CODE XREF: ROM:FA4B-j
				shl	b
				and	b, #1Eh
				ld	y, #table_adc_handler
				add	y, b
				ld	y, y + 00h
				mov	x, d
				mov	a, b
				jmp	y + 00h

; ***************************************************************************
table_adc_handler:		.dw adc_handler_pim		; DATA XREF: ROM:FA53-o
				.dw adc_handler_tps
				.dw adc_handler_o2_heater
				.dw adc_handler_battery
				.dw adc_handler_ect
				.dw adc_handler_tha
				.dw loc_FE58
				.dw loc_FE5E
				.dw adc_handler_unk_fd7f
				.dw loc_FE64
				.dw adc_handler_tham
				.dw adc_handler_complete
				.dw adc_handler_o2_sensor
				.dw loc_FE6A


table_adc_channel:		.db 82h, 02h, 81h, 80h		; DATA XREF: ROM:F9D9-o
				.db 82h, 08h, 01h, 80h


table_adc_channel_2:		.db 82h, 03h, 81h, 80h		; DATA XREF: ROM:F9E2-o
				.db 82h, 08h, 01h, 80h


table_adc_channel_low_pri:	.db 04h, 0Ah, 03h, 06h		; DATA XREF: ROM:F9FA-o
				.db 04h, 05h, 03h, 07h
				.db 04h, 0Ah, 03h, 09h
				.db 04h, 0Dh, 03h, 0Ch
; ***************************************************************************

adc_complete:							; CODE XREF: ROM:FA4D-j
								; ROM:FBD9j ...
				pull	y
				pull	x
				reti


; *************** S U B	R O U T	I N E ***************************************


check_io_inputs:						; CODE XREF: sub_C57A+181-p
								; sub_C57A+184-p ...
				clr	a
				tbbc	bit1, PORTA, loc_FAA2	; Port A Data Register

				or	a, #01h

loc_FAA2:							; CODE XREF: check_io_inputs+1-j
				tbbs	bit2, PORTA, loc_FAA7	; Port A Data Register

				or	a, #02h

loc_FAA7:							; CODE XREF: check_io_inputs:loc_FAA2-j
				tbbs	bit3, PORTA, loc_FAAC	; Port A Data Register

				or	a, #04h

loc_FAAC:							; CODE XREF: check_io_inputs:loc_FAA7-j
				tbbs	bit4, PORTA, loc_FAB1	; Port A Data Register

				or	a, #08h

loc_FAB1:							; CODE XREF: check_io_inputs:loc_FAAC-j
				tbbc	bit5, PORTA, loc_FAB6	; Port A Data Register

				or	a, #10h

loc_FAB6:							; CODE XREF: check_io_inputs:loc_FAB1-j
				tbbs	bit6, PORTB, loc_FABB	; Port B Data Register

				or	a, #20h

loc_FABB:							; CODE XREF: check_io_inputs:loc_FAB6-j
				tbbs	bit7, PORTB, loc_FAC0	; Port B Data Register

				or	a, #40h

loc_FAC0:							; CODE XREF: check_io_inputs:loc_FABB-j
				tbbc	bit2, PORTD_ASRIN, loc_FAC5 ; Port D Data Register / ASR Input Data

				or	a, #80h

loc_FAC5:							; CODE XREF: check_io_inputs:loc_FAC0-j
				ld	x, #var_io_input1
				ld	y, #unk_FD
				bsr	deglitch_io_input

				clr	a
				tbbc	bit3, PORTD_ASRIN, loc_FAD3 ; Port D Data Register / ASR Input Data

				or	a, #01h

loc_FAD3:							; CODE XREF: check_io_inputs+32-j
				tbbc	bit0, PORTC, loc_FAD8	; Port C Data Register

				or	a, #02h

loc_FAD8:							; CODE XREF: check_io_inputs:loc_FAD3-j
				tbbs	bit1, PORTC, loc_FADD	; Port C Data Register

				or	a, #04h

loc_FADD:							; CODE XREF: check_io_inputs:loc_FAD8-j
				tbbs	bit2, PORTC, loc_FAE2	; Port C Data Register

				or	a, #08h

loc_FAE2:							; CODE XREF: check_io_inputs:loc_FADD-j
				tbbs	bit6, PORTC, loc_FAE7	; Port C Data Register

				or	a, #10h

loc_FAE7:							; CODE XREF: check_io_inputs:loc_FAE2-j
				tbbs	bit7, PORTC, loc_FAEC	; Port C Data Register

				or	a, #20h

loc_FAEC:							; CODE XREF: check_io_inputs:loc_FAE7-j
				tbbs	bit0, IRQLL, loc_FAF1	; Interrupt Request Flag LSB

				or	a, #40h

loc_FAF1:							; CODE XREF: check_io_inputs:loc_FAEC-j
				tbbc	bit4, PBCS, loc_FAF6	; Port B Control Register

				or	a, #80h

loc_FAF6:							; CODE XREF: check_io_inputs:loc_FAF1-j
				ld	x, #var_io_input2
				ld	y, #unk_FE
; End of function check_io_inputs


; *************** S U B	R O U T	I N E ***************************************


deglitch_io_input:						; CODE XREF: check_io_inputs+2F-p
				mov	a, b
				xor	a, x + 00h
				and	a, y + 00h
				st	b, y + 00h
				and	b, x + 00h
				add	a, b
				st	a, x + 00h
				ret

; End of function deglitch_io_input

; ***************************************************************************

adc_handler_pim:						; DATA XREF: ROM:table_adc_handler-o
				ld	y, #pim_adc_limits
				jsr	y + 0Eh

				ld	a, var_flags_184
				bcc	loc_FB35

				ld	x, #6666h
				tbbc	bit2, unk_40, loc_FB1D

				setb	bit5, var_error_flags1
				setb	bit3, var_diag_errors_5

loc_FB1D:							; CODE XREF: ROM:FB16-j
				cmpb	a, #01h
				bne	loc_FB27

				or	a, #01h
				clr	var_cnt_sensor_error
				bra	loc_FB3E

; ***************************************************************************

loc_FB27:							; CODE XREF: ROM:FB1F-j
				cmp	#0Fh, var_cnt_sensor_error
				bcs	loc_FB2E

				setb	bit5, var_error_flags1

loc_FB2E:							; CODE XREF: ROM:FB2A-j
				ld	x, #6666h
				setb	bit3, var_flags_4D
				bra	loc_FB3E

; ***************************************************************************

loc_FB35:							; CODE XREF: ROM:FB11-j
				and	a, #0FEh
				tbbs	bit2, unk_40, loc_FB3C

				clrb	bit5, var_error_flags1

loc_FB3C:							; CODE XREF: ROM:FB37-j
				clrb	bit3, var_flags_4D

loc_FB3E:							; CODE XREF: ROM:FB25-j
								; ROM:FB33-j
				st	a, var_flags_184
				mov	x, d
				sub	d, #2940h
				bcc	loc_FB4B

				clr	a
				clr	b
				bra	loc_FB5F

; ***************************************************************************

loc_FB4B:							; CODE XREF: ROM:FB45-j
				mov	d, x
				push	b
				mul	a, #49h
				st	d, unk_11F
				pull	a
				mul	a, #49h
				add	x, a
				mov	x, d
				add	d, unk_11F
				bcc	loc_FB5F

				ld	d, #0FFFFh

loc_FB5F:							; CODE XREF: ROM:FB49-j
								; ROM:FB5A-j
				tbbs	bit0, unk_40, loc_FBAF

				tbbs	bit1, unk_47, loc_FB75

				cmp	#0Ch, TIMER		; Timer	MSB (bit11~bit18)
				bcs	loc_FBAF

				setb	bit1, unk_47
				st	a, unk_F4
				tbbc	bit0, var_io_input1, loc_FBAF ;	Jump if	STA low	(starter not running)


loc_FB71:							; CODE XREF: ROM:FB8Aj
				setb	bit2, unk_47
				bra	loc_FBAF

; ***************************************************************************

loc_FB75:							; CODE XREF: ROM:FB62-j
				sub	d, var_pim2
				rorc	a
				rorc	b
				jsr	divide_rD_2_signed

				add	d, var_pim2
				mov	d, y
				tbbs	bit2, unk_47, loc_FB98

				sub	a, unk_F4
				bcc	loc_FB87

				neg	a

loc_FB87:							; CODE XREF: ROM:FB84-j
				cmp	a, #01h
				mov	y, d
				bgt	loc_FB71

				tbbc	bit0, var_io_input1, loc_FB98 ;	Jump if	STA low	(starter not running)

				setb	bit2, unk_47
				cmp	#0FFh, unk_C3
				bcs	loc_FB98

				setb	bit0, unk_47

loc_FB98:							; CODE XREF: ROM:FB7F-j
								; ROM:FB8C-j ...
				tbbc	bit0, unk_47, loc_FBAF

				tbbc	bit5, RAMST, loc_FBAF	; Built-in RAM status

				push	d
				ld	b, unk_F4
				ld	y, #byte_C39E
				jsr	y + 18h

				ld	x, #nv_unk_trim_98
				jsr	write_rB_nv_ram

				clrb	bit0, unk_47
				pull	d

loc_FBAF:							; CODE XREF: ROM:loc_FB5F-j
								; ROM:FB68-j ...
				st	d, var_pim2
				st	d, dmatx_pim2
				jmp	loc_FBD6


; *************** S U B	R O U T	I N E ***************************************


sub_FBB7:							; CODE XREF: sub_C57A+47C-p
				ld	b, nv_unk_trim_98
				ld	y, #byte_C39E
				jsr	y + 18h

				bcc	loc_FBC3

				jsr	clear_nv_ram


loc_FBC3:							; CODE XREF: sub_FBB7+7-j
				ld	a, nv_unk_trim_98
				tbbs	bit0, var_flags_42, loc_FBCA

				ld	a, #50h

loc_FBCA:							; CODE XREF: sub_FBB7+E-j
				clr	b
				shr	d
				div	d, #61h
				bcc	loc_FBD2

				ld	b, #0FFh

loc_FBD2:							; CODE XREF: sub_FBB7+17-j
				st	b, unk_13E
				ret

; End of function sub_FBB7

; ***************************************************************************

loc_FBD6:							; CODE XREF: ROM:FBB4-j
				jsr	check_boost_limit

				jmp	adc_complete

; ***************************************************************************

adc_handler_o2_heater:						; DATA XREF: ROM:table_adc_handler-o
				mov	x, d
				shl	d
				bcs	loc_FBE3

				shl	d
				bcc	loc_FBE5


loc_FBE3:							; CODE XREF: ROM:FBDE-j
				ld	a, #0FFh

loc_FBE5:							; CODE XREF: ROM:FBE1-j
				st	a, var_adc_o2_heater
				ld	b, var_adc_lambda
				ld	y, #table_adc_lambda_C212
				tbbs	bit2, var_flags_46, adc_handler_throttle_closed

				inc	y
				ld	a, unk_FC
				shl	a
				rolc	a
				rolc	a
				and	a, #03h
				add	y, a

adc_handler_throttle_closed:					; CODE XREF: ROM:FBED-j
				cmp	x, #170Ah
				bcs	loc_FC07

				ld	a, y + 05h
				dec	b
				bmi	loc_FC10

				beq	loc_FC0E

				bra	loc_FC11

; ***************************************************************************

loc_FC07:							; CODE XREF: ROM:FBFC-j
				ld	a, y + 00h
				inc	b
				bmi	loc_FC11

				bne	loc_FC10


loc_FC0E:							; CODE XREF: ROM:FC03-j
				setb	bit4, unk_44

loc_FC10:							; CODE XREF: ROM:FC01-j
								; ROM:FC0C-j
				mov	a, b

loc_FC11:							; CODE XREF: ROM:FC05-j
								; ROM:FC0A-j
				st	b, var_adc_lambda
				st	b, dmatx_adc_lambda
				jmp	adc_complete

; ***************************************************************************

adc_handler_tps:						; DATA XREF: ROM:table_adc_handler-o
				st	b, var_tps_raw
				ld	y, #tps_adc_limits
				jsr	y + 06h

				ld	a, var_flags_184
				bcc	loc_FC49

				cmpb	a, #08h
				bne	loc_FC2E

				or	a, #08h
				clr	var_cnt_sensor_error

loc_FC2E:							; CODE XREF: ROM:FC28-j
				tbbs	bit2, unk_40, loc_FC37

				cmp	#0Fh, var_cnt_sensor_error
				bcs	loc_FC3B

; ***************************************************************************
				.db 8Ch
; ***************************************************************************

loc_FC37:							; CODE XREF: ROM:loc_FC2E-j
				setb	bit3, var_diag_errors_5
				setb	bit1, var_error_flags2

loc_FC3B:							; CODE XREF: ROM:FC34-j
				setb	bit7, unk_40
				ld	b, #10h
				st	b, unk_FB

loc_FC41:							; CODE XREF: ROM:FC53j
								; ROM:FC5Bj
				clr	b
				st	b, unk_17C

loc_FC45:							; CODE XREF: ROM:FC66j
				clrb	bit3, var_flags_46
				bra	loc_FC6A

; ***************************************************************************

loc_FC49:							; CODE XREF: ROM:FC24-j
				and	a, #0F7h
				tbbs	bit2, unk_40, loc_FC50

				clrb	bit1, var_error_flags2

loc_FC50:							; CODE XREF: ROM:FC4B-j
				tbbc	bit7, unk_40, loc_FC6A

				tbbc	bit1, var_io_input1, loc_FC41

				ld	y, #byte_C3B2
				jsr	y + 04h

				bcs	loc_FC41

				ld	b, unk_17C
				inc	b
				st	b, unk_17C
				cmp	b, #02h
				bcs	loc_FC45

				clrb	bit7, unk_40

loc_FC6A:							; CODE XREF: ROM:FC47-j
								; ROM:loc_FC50-j
				st	a, var_flags_184
				tbbc	bit7, unk_40, loc_FC7D

				clr	unk_E9
				ld	d, #0000h
				st	d, var_tps
				st	d, dmatx_tps
				jmp	loc_FD08

; ***************************************************************************

loc_FC7D:							; CODE XREF: ROM:FC6D-j
				tbbs	bit1, var_io_input1, loc_FC82

				clr	unk_E9

loc_FC82:							; CODE XREF: ROM:loc_FC7D-j
				ld	a, var_nv_tps
				ld	b, #0AEh
				tbbs	bit0, unk_40, loc_FCE1

				tbbc	bit1, var_flags_42, loc_FCE1

				tbbc	bit0, var_flags_42, loc_FCE1

				tbs	bit5, unk_47
				bne	loc_FC9C

				add	a, #08h
				bcc	loc_FC9A

				ld	a, #0FFh

loc_FC9A:							; CODE XREF: ROM:FC96-j
				bra	loc_FCD1

; ***************************************************************************

loc_FC9C:							; CODE XREF: ROM:FC92-j
				ld	b, unk_E9

loc_FC9E:							; CODE XREF: ROM:FCA4j
				cmp	b, #40h
				bcs	loc_FCA6

				sub	b, #40h
				bra	loc_FC9E

; ***************************************************************************

loc_FCA6:							; CODE XREF: ROM:FCA0-j
				cmp	b, #0Ah
				bne	loc_FCB4

				add	a, #01h
				bcc	loc_FCB0

				ld	a, #0FFh

loc_FCB0:							; CODE XREF: ROM:FCAC-j
				inc	unk_E9
				bra	loc_FCD1

; ***************************************************************************

loc_FCB4:							; CODE XREF: ROM:FCA8-j
				cmp	#02h, unk_E9
				bcs	loc_FCE2

				push	a
				mov	x, d
				jsr	divide_rD_64_saturate

				add	b, #01h
				bcc	loc_FCC4

				ld	b, #0FFh

loc_FCC4:							; CODE XREF: ROM:FCC0-j
				pull	a
				cmp	a, b
				ble	loc_FCE2

				tbs	bit5, var_flags_42
				beq	loc_FCE4

				sub	a, #01h
				bcc	loc_FCD1

				clr	a

loc_FCD1:							; CODE XREF: ROM:loc_FC9A-j
								; ROM:FCB2-j ...
				mov	a, b
				ld	y, #nv_tps_limits
				jsr	y + 02h

				push	x
				ld	x, #var_nv_tps
				jsr	write_rB_nv_ram

				pull	x
				bra	loc_FCE4

; ***************************************************************************

loc_FCE1:							; CODE XREF: ROM:FC87-j
								; ROM:FC8A-j ...
				mov	b, a

loc_FCE2:							; CODE XREF: ROM:FCB7-j
								; ROM:FCC6-j
				clrb	bit5, var_flags_42

loc_FCE4:							; CODE XREF: ROM:FCCA-j
								; ROM:FCDF-j
				clr	b
				shr	d
				shr	d
				push	d
				mov	x, d
				mov	s, x
				sub	d, x + 00h
				bcc	loc_FCF0

				clr	a
				clr	b

loc_FCF0:							; CODE XREF: ROM:FCEC-j
				st	d, var_tps_unk_14A
				pull	x
				st	d, var_tps
				st	d, dmatx_tps
				ld	b, #4Ch
				tbbs	bit3, var_flags_46, loc_FD00

				ld	b, #52h

loc_FD00:							; CODE XREF: ROM:FCFB-j
				cmp	a, b
				bcs	loc_FD06

				setb	bit3, var_flags_46
; ***************************************************************************
				.db 8Ch
; ***************************************************************************

loc_FD06:							; CODE XREF: ROM:FD01-j
				clrb	bit3, var_flags_46

loc_FD08:							; CODE XREF: ROM:FC7A-j
				tbbc	bit7, unk_40, loc_FD14

				clr	a
				st	a, var_tps_delta
				clrb	bit6, unk_47
				setb	bit7, unk_47
				bra	loc_FD6F

; ***************************************************************************

loc_FD14:							; CODE XREF: ROM:loc_FD08-j
				ld	x, var_tps_2
				ld	d, var_tps
				push	x
				mov	s, x
				sub	d, x + 00h
				pull	x
				bcc	loc_FD36

				neg	a
				neg	b
				subc	a, #00h
				cmp	d, #3D71h
				bcs	loc_FD2A

				setb	bit7, unk_47

loc_FD2A:							; CODE XREF: ROM:FD26-j
				cmpb	a, #0E0h
				bne	loc_FD32

				shl	d
				shl	d
				neg	a
; ***************************************************************************
				.db 8Ch
; ***************************************************************************

loc_FD32:							; CODE XREF: ROM:FD2C-j
				ld	a, #80h
				bra	loc_FD45

; ***************************************************************************

loc_FD36:							; CODE XREF: ROM:FD1D-j
				cmp	a, #33h
				bcs	loc_FD3C

				setb	bit5, var_limiter_flags

loc_FD3C:							; CODE XREF: ROM:FD38-j
				cmpb	a, #0E0h
				bne	loc_FD43

				shl	d
				shl	d
; ***************************************************************************
				.db 8Ch
; ***************************************************************************

loc_FD43:							; CODE XREF: ROM:FD3E-j
				ld	a, #7Fh

loc_FD45:							; CODE XREF: ROM:FD34-j
				ld	b, unk_140
				bpz	loc_FD4B

				neg	b

loc_FD4B:							; CODE XREF: ROM:FD48-j
				cmp	b, #01h
				bcc	loc_FD51

				clrb	bit7, unk_47

loc_FD51:							; CODE XREF: ROM:FD4D-j
				ld	b, var_tps_delta
				st	a, var_tps_delta
				tbbs	bit2, var_flags_46, loc_FD6D

				cmp	#0A0h, var_rpm_div_25
				bcc	loc_FD6D

				add	a, b
				bvs	loc_FD6A

				cmpz	a
				beq	loc_FD6D

				bpz	loc_FD66

				neg	a

loc_FD66:							; CODE XREF: ROM:FD63-j
				cmp	a, #02h
				bcs	loc_FD6F


loc_FD6A:							; CODE XREF: ROM:FD5E-j
				setb	bit6, unk_47
; ***************************************************************************
				.db 8Ch
; ***************************************************************************

loc_FD6D:							; CODE XREF: ROM:FD55-j
								; ROM:FD5B-j ...
				clrb	bit6, unk_47

loc_FD6F:							; CODE XREF: ROM:FD12-j
								; ROM:FD68-j
				ld	d, var_tps
				st	d, var_tps_2
				jsr	sub_C977

				jsr	sub_CDE8

				jsr	async_throttle_inject

				jmp	adc_complete

; ***************************************************************************

adc_handler_unk_fd7f:						; DATA XREF: ROM:table_adc_handler-o
				st	b, var_adc_unk_14C
				jmp	adc_complete

; ***************************************************************************

adc_handler_tha:						; DATA XREF: ROM:table_adc_handler-o
				ld	y, #tha_adc_limits
				jsr	y + 0Ch

				ld	a, var_flags_184
				bcc	loc_FDA8

				cmpb	a, #04h
				bne	loc_FD97

				or	a, #04h
				clr	var_cnt_sensor_error

loc_FD97:							; CODE XREF: ROM:FD91-j
				tbbs	bit2, unk_40, loc_FDA0

				cmp	#0Fh, var_cnt_sensor_error
				bcs	loc_FDA4

; ***************************************************************************
				.db 8Ch
; ***************************************************************************

loc_FDA0:							; CODE XREF: ROM:loc_FD97-j
				setb	bit3, var_diag_errors_5
				setb	bit4, var_error_flags1

loc_FDA4:							; CODE XREF: ROM:FD9D-j
				ld	b, #79h			; 79h ^	0FFh = 86h - Default to	20 deg
				bra	loc_FDAF

; ***************************************************************************

loc_FDA8:							; CODE XREF: ROM:FD8D-j
				tbbs	bit2, unk_40, loc_FDAD

				clrb	bit4, var_error_flags1

loc_FDAD:							; CODE XREF: ROM:loc_FDA8-j
				and	a, #0FBh

loc_FDAF:							; CODE XREF: ROM:FDA6-j
				st	a, var_flags_184
				xor	b, #0FFh
				st	b, var_tha
				st	b, dmatx_tha
				jmp	adc_complete

; ***************************************************************************

adc_handler_tham:						; DATA XREF: ROM:table_adc_handler-o
				ld	y, #tham_adc_limits
				jsr	y + 0Ah

				ld	a, var_flags_185
				bcc	loc_FDDF

				cmpb	a, #01h
				bne	loc_FDCE

				or	a, #01h
				clr	var_cnt_sensor_error

loc_FDCE:							; CODE XREF: ROM:FDC8-j
				tbbs	bit2, unk_40, loc_FDD7

				cmp	#0Fh, var_cnt_sensor_error
				bcs	loc_FDDB

; ***************************************************************************
				.db 8Ch
; ***************************************************************************

loc_FDD7:							; CODE XREF: ROM:loc_FDCE-j
				setb	bit3, var_diag_errors_5
				setb	bit4, var_error_flags2

loc_FDDB:							; CODE XREF: ROM:FDD4-j
				ld	b, #79h			; 79h ^	0FFh = 86h - Default to	20 deg
				bra	loc_FDE6

; ***************************************************************************

loc_FDDF:							; CODE XREF: ROM:FDC4-j
				tbbs	bit2, unk_40, loc_FDE4

				clrb	bit4, var_error_flags2	; Clear	THAM sensor error flag

loc_FDE4:							; CODE XREF: ROM:loc_FDDF-j
				and	a, #0FEh		; Clear	bit 0 of flags

loc_FDE6:							; CODE XREF: ROM:FDDD-j
				st	a, var_flags_185	; Store	flags
				xor	b, #0FFh
				st	b, var_tham
				st	b, dmatx_tham
				jmp	adc_complete

; ***************************************************************************

adc_handler_battery:						; DATA XREF: ROM:table_adc_handler-o
				st	b, var_adc_battery
				st	b, dmatx_battery
				tbbc	bit5, RAMST, loc_FE05	; Built-in RAM status

				cmp	b, #53h
				bcs	loc_FE05

				tbs	bit6, unk_44
				beq	loc_FE05

				setb	bit2, DOUT		; Release knock	MCU reset

loc_FE05:							; CODE XREF: ROM:FDF8-j
								; ROM:FDFD-j ...
				ld	b, var_adc_battery
				ld	y, #table_inj_battery_adjust
				jsr	table_rB_fixed_32_interpolate

				jsr	divide_rD_64

				st	d, var_inj_battery_adjust
				jmp	adc_complete

; ***************************************************************************

adc_handler_ect:						; DATA XREF: ROM:table_adc_handler-o
				ld	y, #ect_adc_limits
				jsr	y + 08h

				ld	a, var_flags_184
				bcc	loc_FE3A

				cmpb	a, #02h
				bne	loc_FE28

				or	a, #02h
				clr	var_cnt_sensor_error

loc_FE28:							; CODE XREF: ROM:FE22-j
				tbbs	bit2, unk_40, loc_FE31

				cmp	#0Fh, var_cnt_sensor_error
				bcs	loc_FE35

; ***************************************************************************
				.db  8Ch ; 
; ***************************************************************************

loc_FE31:							; CODE XREF: ROM:loc_FE28-j
				setb	bit3, var_diag_errors_5
				setb	bit3, var_error_flags1

loc_FE35:							; CODE XREF: ROM:FE2E-j
				ld	x, #1B00h		; Default to 82	deg
				bra	loc_FE41

; ***************************************************************************

loc_FE3A:							; CODE XREF: ROM:FE1E-j
				tbbs	bit2, unk_40, loc_FE3F

				clrb	bit3, var_error_flags1

loc_FE3F:							; CODE XREF: ROM:loc_FE3A-j
				and	a, #0FDh

loc_FE41:							; CODE XREF: ROM:FE38-j
				st	a, var_flags_184
				mov	x, d
				xor	a, #0FFh
				xor	b, #0FFh
				and	b, #0C0h
				st	d, var_ect
				st	d, dmatx_ect
				jmp	adc_complete

; ***************************************************************************

adc_handler_o2_sensor:						; DATA XREF: ROM:table_adc_handler-o
				st	b, unk_FC
				jmp	adc_complete

; ***************************************************************************

loc_FE58:							; DATA XREF: ROM:table_adc_handler-o
				st	b, unk_1C6
				jmp	adc_complete

; ***************************************************************************

loc_FE5E:							; DATA XREF: ROM:table_adc_handler-o
				st	b, unk_1C7
				jmp	adc_complete

; ***************************************************************************

loc_FE64:							; DATA XREF: ROM:table_adc_handler-o
				st	b, unk_1C8
				jmp	adc_complete

; ***************************************************************************

loc_FE6A:							; DATA XREF: ROM:table_adc_handler-o
				st	b, unk_1C9
				jmp	adc_complete

; ***************************************************************************

adc_handler_complete:						; DATA XREF: ROM:table_adc_handler-o
				jmp	adc_complete


; *************** S U B	R O U T	I N E ***************************************
; Scale injector pulsewidth in rD
; 
scale_injector_pw:		xch	x, y			; Store X in Y

				mov	d, x
				push 	x
				ld	a, #00h
				
				jsr	mult_rArX
				pop	x
				sub	d, x
				mov	x, d
				xch	x, y			; Restore X
				
				cmp	d, #000Dh
				ret

				
				
; *************** S U B	R O U T	I N E ***************************************
; Compute (rA * rX)/100h, result in rD and rX
; Used to scale a variable by some fraction 80h = 50%, 40h = 25%, and so on
mult_rArX:							; CODE XREF: sub_C54C+Ep
								; sub_C54C+1Ep	...
				push	x
				mov	s, x
				xch	a, x + 01h
				mul	a, x + 01h
				push	b
				xch	a, x + 01h
				mul	a, x + 00h
				mov	d, x
				pull	d
				pull	b
				add	x, b
				shl	a
				mov	x, d
				ret

				
				
				
				
				
				
				
				
				.org 0FFDAh
				
				.dw 5076h
word_FFDC:			.dw 8305h			; DATA XREF: ROM:FA2F-o
				.dw IV0				; External interrupt 0
				.dw int_vector_1_serial_rx	; External interrupt 1
				.dw IVf				; External interrupt 2
				.dw IVf				; External interrupt 3
				.dw int_vector_4_kph		; External interrupt 4
				.dw IVf				; External interrupt 5
				.dw int_vector_6_sw_int		; External interrupt 6
				.dw IVf				; External interrupt 7
				.dw IVf				; External interrupt 8
				.dw int_vector_9_ignition	; External interrupt 9
				.dw IVf				; External interrupt a
				.dw IVf				; External interrupt b
				.dw int_4ms_watchdog		; External interrupt c
				.dw IVf				; External interrupt d
				.dw int_vector_e_ne		; External interrupt e
				.dw IVf				; External interrupt f
				.dw reset_vector		; Processor reset
; end of 'ROM'


				.end
